{"title": "分布式事务的一种实现方式--状态流转", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://blog.csdn.net/qq_23589553/article/details/78468154\">qq_23589553</a>   </div><p>关于分布式事务，参考了网上提到的一些办法，比如利用消息队列实现分布式事务，补偿事务，TCC，最大努力送达，等等。这里给出自己的一些理解和实现。可以称之为状态流转的实现。</p>\n<h3 id=\"一些要点\">一些要点</h3>\n<ul>\n<li>大事务拆分成多个小事务，每个小事务都是单机上的事务</li>\n<li>要支持幂等，即每个小事务多次执行时结果要相同。\n<ul>\n<li>如何达到幂等，一般是加一个状态，如一个带有状态字段的行，在写入业务数据时同时修改状态为“已做”，“已撤销”之类的。下次再做时，先检查状态的值，如果存在且为“已做”，则不用再做了；如果不存在，说明是“未做”，这时需要写入业务数据。</li>\n</ul>\n</li>\n<li>对应一个大事务的多个小事务如何保证全部成功或者全部失败。\n<ul>\n<li>先分析如何保证全部成功，就是多做几次，直到全部成功。由于有幂等的保证，过程中某些小事务多做了几次，是不影响数据的正确性的。</li>\n<li>同理可以分析全部失败即需要回滚的情况，也是在幂等保证的前提下多做几次，直到全部回滚完成。</li>\n<li>如何保证多做几次，办法应该很多，一种方法是在第一个小事务执行前先发一个延时消息，这个消息中包含预先生成的对应整个大事务流程的id。这样就算当前事务流程中在某个步骤失败，以后也有再次检查执行的机会。</li>\n<li>其他的一些技巧。使用唯一索引保证操作的唯一性以及防并发操作。使用CAS(compare and set)来防并发修改操作，如专设一个rowver字段。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"分析一个简单的例子转账业务\">分析一个简单的例子，转账业务。</h3>\n<ul>\n<li>相关的表如下\n<ul>\n<li>Account(userId,amount,rowver)</li>\n<li>AccountTransferState(acsId,idForPart,state,fromUserId,toUserId,amount,rowver)\n<ul>\n<li>注意AccountChangeState有2份记录，只是idForPart不同（注意其他相同，如acsId等相同），分别为fromUserId和toUserId。这样与Account是一一对应的，并且分区方式相同，这样方便事务处理。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"先分析流程中的正常情况\">先分析流程中的正常情况。</h4>\n<ul>\n<li>0,预先生成acsId，并发送消息到队列，消息内容包括AccountTransferState的几乎所有字段 以及 msgType=checkTransfer(在别的情况下还可以msgType=newTransfer，相当于异步进行转账操作)等。\n<ul>\n<li>利用消息队列是自动处理，还可以人工干预。比如，用户（这里指fromUser）可以查询一个AccountTransferState的列表，按时间从晚到早排序。如果哪条记录未完成，可以点按钮触发操作。</li>\n<li>综上2种情况，在预先生成acsId后，都有办法拿到这个acsId以及其他相关数据（如fromUserId等等）。</li>\n</ul>\n</li>\n<li>1,在单机事务中,先检查fromAccount的amount，\n<ul>\n<li>如果不够，则直接返回，整个大事务以fail结束。</li>\n<li>如果够，减少fromAccount 并 新建AccountTransferState(acsId为预先生成,idForPart=fromUserId,state=didOut)。</li>\n</ul>\n</li>\n<li>2,在单机事务中 增加toAccount 并 新建AccountChangeState(idForPart=toUserId,state=finish)</li>\n<li>3,在单机事务中 修改idForPart=fromUserId的AccountTransferState，使state=finish。</li>\n</ul>\n<h4 id=\"再分析流程中的异常情况\">再分析流程中的异常情况。</h4>\n<p>在1，2，3中每一步都可能出异常。（第0步出异常，处理很简单，参考下面的1B步骤即可）<br>\n由于第0步存在，总有办法拿到具体的id和必要数据。从而可以分析检查重做的过程，如下。</p>\n<ul>\n<li>1B,在单机事务中,使用acsId和idForPart=fromUserId查询AccountTransferState记录，\n<ul>\n<li>如果不存在，说明第1步的事务由于各种原因失败，从而是整个流程失败，不用管了。（另外也可以考虑再次转账，不过在这里暂不分析，以避免引入一些不必要的复杂性）</li>\n<li>如果存在，看AccountTransferState记录内容，\n<ul>\n<li>如果state=finish，则说明是在第3步事务完成后出了异常，此时整个流程已经成功完成，不用在这里做什么。</li>\n<li>如果state=didOut，说明第1步已经完成，由下一步来处理，见2B.</li>\n<li>如果state=其他，按业务逻辑分析不应该出现，给开发人员报bug。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>2B, 在单机事务中,使用acsId和idForPart=toUserId查询AccountTransferState记录，\n<ul>\n<li>如果不存在，说明第2步尚未开始或未能成功开始，只需简单做前面的2、3步中的内容</li>\n<li>如果存在，看AccountTransferState记录内容，\n<ul>\n<li>如果state=finish，说明第2步已经成功完成，只需简单做前面的第3步中的内容</li>\n<li>如果state=其他，按业务逻辑分析不应该出现，给开发人员报bug。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>3B,同前面的第3步\n<ul>\n<li>这步比较简单。根据上面的分析，如果能够到这步，只有当前面2步都成功时才到。所以无需判断什么条件，只需简单执行第3步的内容即可。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"分析一个比较复杂的例子使用积分和余额付款积分和余额在不同的库中\">分析一个比较复杂的例子，使用积分和余额付款，积分和余额在不同的库中。</h3>\n<p>由于在不同的库中，还可以把一个小事务抽象成一个远程调用。</p>\n<p>相关的表如下<br>\n这里AccountTransferRequest与4个Account一般是5片。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02d34ae0254147465464\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nAccountTransferRequest(atrId,fromUserId,toUserId,state,crtTime,detailJson,shuoming,rowver)//detailJson 包括 多条记录，每条记录有 AccountType, amount\r\nAccountYuE(userId,amount,rowver)\r\nAccountJiFen(userId,amount,rowver)\r\nAccountYuEChangeState (userIdForPart,atrId,state,rowver, amount)\r\nAccountJiFenChangeState(userIdForPart,atrId,state,rowver, amount)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02d34ae0254147465464-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02d34ae0254147465464-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02d34ae0254147465464-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02d34ae0254147465464-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02d34ae0254147465464-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02d34ae0254147465464-1\"><span class=\"crayon-e\">AccountTransferRequest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">atrId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">fromUserId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">toUserId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">crtTime</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">detailJson</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">shuoming</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rowver</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//detailJson 包括 多条记录，每条记录有 AccountType, amount</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02d34ae0254147465464-2\"><span class=\"crayon-e\">AccountYuE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">userId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">amount</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rowver</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a02d34ae0254147465464-3\"><span class=\"crayon-e\">AccountJiFen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">userId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">amount</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rowver</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02d34ae0254147465464-4\"><span class=\"crayon-e\">AccountYuEChangeState</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">userIdForPart</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">atrId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rowver</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">amount</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a02d34ae0254147465464-5\"><span class=\"crayon-e\">AccountJiFenChangeState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">userIdForPart</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">atrId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rowver</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">amount</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>注意AccountXyzChangeState有2份记录，分别与2个AccountXyz对应，且分区方式相同，这样保证单机事务</p>\n<h3>初次执行所有事务时(第一次也称创建阶段)</h3>\n<p><strong>1,建立转账请求 AccountTransferRequest(state=Init)</strong><br>\n在事务前预先生成atrId,(还考虑先保存到导致这个动作的根动作上，这样便于追查状态)。<br>\n第一次执行暂且不用分布式锁，因为atrId是新生成的，没有别的地方争用。除非是锁根动作的id。<br>\n发送延时消息到队列(1minute,msgType=checkTransfer)。消息内容包括AccountTransferRequest的几乎所有字段，重点的有atrId,fromUserId,msgType=checkTransfer(当异步进行转账操作，还可以msgType=newTransfer)。<br>\n另一方面，用户（这里是fromUser），可以by fromUserId查询一个AccountTransferRequest的列表，按时间从晚到早排序。如果哪条记录未完成，可以点按钮触发操作。（或者从某个根动作得到atrId，并进一步取到数据）<br>\n综上2种情况，都可以拿到atrId和fromUserId。<br>\n另外，toUser暂时认为没有查询AccountTransferRequest的列表的必要。</p>\n<ul>\n<li>一方面，没转账成功，toUser不必知道这个请求状态的中间过程(毕竟现在的电商网站也没有提供这种查询)。</li>\n<li>另一方面，还可以查AccountChangeState作为列表，至于join问题，可以冗余几个字段或一个json字符串字段，或者等这个数据流转到异构数据库来解决查询问题。</li>\n</ul>\n<p><strong>2,处理 AccountJiFen 的转出部分逻辑</strong><br>\n先检查fromAccountJiFen的amount够不够：</p>\n<p>够 ，则 减少fromAccountJiFen 并 新建AccountJiFenChangeState(fromUserId,atrId,state=didOut,atrDetailJson~)</p>\n<p>不够，则 不写fromAccountJiFen和AccountJiFenChangeState的数据。</p>\n<ul>\n<li>此时需要回滚，先发送延时消息到队列，消息内容包括AccountTransferRequest的几乎所有字段，重点的有atrId,msgType=toRollback。</li>\n<li>如果或就算在发送消息前出异常停掉。下次通过消息进入检查处理流程，会重试步骤2，可以走够与不够2个分支，但不会导致数据不一致等错误。</li>\n<li>然后修改AccountTransferRequest的state=toRollback，并修改shuoming字段为失败原因，这里是积分不足。然后返回失败原因提示用户或者发消息通知用户。</li>\n<li>然后执行B处的回滚逻辑，而不是执行下面的逻辑。考虑到通用性，B处的回滚逻辑包括多处数据的处理。</li>\n<li>注意这里由于有分支路径，需要避免并发。因为不排除在某些情况下，相同的两个消息由2个线程并发处理，而且2个线程走的分支不一样，比如先执行的发现amount不够需要回滚，而后执行的发现amount够了（比如之前amount被另一个线程增加了）而继续执行正常分支。这需要一把分布式锁作用在大事务上来避免并发。</li>\n</ul>\n<p><strong>3,处理 AccountYuE 的转出部分逻辑</strong><br>\n先检查fromAccountYuE的amount够不够：<br>\n够 ，则 减少fromAccountYuE 并 新建AccountYuEChangeState(fromUserId,atrId,state=didOut,atrDetailJson~)<br>\n不够，则 不写fromAccountYuE和AccountYuEChangeState的数据。</p>\n<ul>\n<li>而是修改AccountTransferRequest的state=toRollback，并修改shuoming字段为失败原因，这里是余额不足。然后返回失败原因提示用户或者发消息通知用户。</li>\n<li>然后执行B处的回滚逻辑，而不是执行下面的逻辑。考虑到通用性，B处的回滚逻辑包括多处数据的处理。</li>\n<li>注意这里由于有分支路径，需要避免并发。</li>\n</ul>\n<p><strong>4,处理 AccountJiFen 的转入部分逻辑</strong></p>\n<p>在事务中 增加toAccountJiFen 并 新建AccountJiFenChangeState(toUserId,atrId,state=didIn,atrDetailJsonStr~)<br>\n此处不会出现业务逻辑问题而需要回滚，可以设想对应系统停机维护，此时出网络错不应该回滚。所以只需一直重试直到成功即可，当然重试机制需要细化考虑。<br>\n<strong>5,处理 AccountYuE 的转入部分逻辑</strong></p>\n<p>在事务中 增加toAccountYuE 并 新建AccountYuEChangeState(toUserId,atrId,state=didIn,atrDetailJsonStr~)<br>\n此处不会出现业务逻辑问题而需要回滚，可以设想对应系统停机维护，此时出网络错不应该回滚。所以只需一直重试直到成功即可，当然重试机制需要细化考虑。<br>\n<strong>6,修改转账请求AccountTransferRequest的 state=finish</strong><br>\n<strong>7,有无必要修改4个AccountChangeState的state=finish</strong>，待定，暂不考虑<br>\n—-</p>\n<h3>B 回滚逻辑</h3>\n<p><strong>B0 先加一个分布式锁，利用Redisson，以atrId为key。这样可以防止意外的并发执行。</strong><br>\n<strong>B1 先发送延时消息到队列，消息内容包括AccountTransferRequest的几乎所有字段，重点的有atrId,msgType=toRollback。</strong></p>\n<p>以保证下面步骤出异常时，还能继续做回滚操作直到完成。</p>\n<ul>\n<li>如果AccountTransferRequest的state!=toRollback，而是state=Init，则修改AccountTransferRequest的state=toRollback。</li>\n<li>如果state=finish OR fail ，本来是不做任何事情，但是为何能有这条路线是很奇怪的，需要让开发调查是否存在bug。</li>\n</ul>\n<p><strong>B2 from方的 AccountJiFen的回滚</strong><br>\n根据 atrId 和 fromUserId 查询 AccountJiFenChangeState 记录</p>\n<p>如果没查到记录，说明没做转出动作，不用回滚，即不做任何操作。</p>\n<p>如果查到1条记录，（不可能多条记录，否则给开发报bug）</p>\n<ul>\n<li>如果state=didOut，则需要回滚。增加fromAccountJiFen 并 修改AccountJiFenChangeState的state=didRollback 。</li>\n<li>如果state=didRollback，说明已经回滚了，不用再做任何操作了。</li>\n</ul>\n<p><strong>B3 from方的 AccountYuE的回滚</strong><br>\n根据 atrId 和 fromUserId 查询 AccountYuEChangeState 记录<br>\n如果没查到记录，说明没做转出动作，不用回滚，即不做任何操作。<br>\n如果查到1条记录，（不可能多条记录，否则给开发报bug）</p>\n<ul>\n<li>如果state=didOut，则需要回滚。增加fromAccountYuE 并 修改AccountYuEChangeState的state=didRollback 。</li>\n<li>如果state=didRollback，说明已经回滚了，不用再做任何操作了。</li>\n</ul>\n<p><strong>B4 to方的 AccountJiFen的回滚</strong><br>\n根据 atrId 和 toUserId 查询 AccountJiFenChangeState 记录<br>\n如果没查到记录，说明没做转入动作，不用回滚，即不做任何操作。<br>\n如果查到1条记录，（不可能多条记录，否则给开发报bug）</p>\n<ul>\n<li>如果state=didIn，则需要回滚。减少toAccountJiFen 并 修改AccountJiFenChangeState的state=didRollback 。</li>\n<li>如果state=didRollback，说明已经回滚了，不用再做任何操作了。</li>\n</ul>\n<p><strong>B5 to方的 AccountYuE的回滚</strong><br>\n根据 atrId 和 toUserId 查询 AccountYuEChangeState 记录<br>\n如果没查到记录，说明没做转入动作，不用回滚，即不做任何操作。<br>\n如果查到1条记录，（不可能多条记录，否则给开发报bug）</p>\n<ul>\n<li>如果state=didIn，则需要回滚。减少toAccountYuE 并 修改AccountYuEChangeState的state=didRollback 。</li>\n<li>如果state=didRollback，说明已经回滚了，不用再做任何操作了。</li>\n</ul>\n<p><strong>B6 最后修改AccountTransferRequest的state=fail</strong><br>\n<strong>B7 释放分布式锁</strong><br>\n—-<br>\n由于在1–6中每一步都可能失败或异常，研究处理失败情况。<br>\n由于可以拿到具体的id，所以先分2种情况，一种是完全新增，此时对应上面的步骤，简单。<br>\n一种是某个步骤失败后，通过某种方式重启这个转账流程，在下面讨论。</p>\n<p><strong>0C,先加一个分布式锁</strong>，利用Redisson，以atrId为key。这样可以防止意外的并发执行。至于为何要避免并发在前面有地方分析过。<br>\n<strong>1C,使用atrId查询AccountTransferRequest记录</strong><br>\n如果不存在，说明第1步就没成功，可以以全新方式重做上面的1–6步。暂不考虑已经返回错误信息给用户，由用户决定，而不用做任何动作的情况。<br>\n如果存在，看AccountTransferRequest记录内容，</p>\n<ul>\n<li>如果state=finish，此时整个流程已经成功完成，不用做什么，只需消费掉这条消息即可。</li>\n<li>如果state=fail，整个流程已经失败，也不用管了。</li>\n<li>如果state=toRollback，转入 B 回滚逻辑 的处理流程</li>\n<li>如果state=Init，说明至少第1步已经完成，由第2步来检查处理，见2C.</li>\n<li>如果state=其他，按业务逻辑分析不应该出现，给开发人员报错提醒是bug。</li>\n</ul>\n<p><strong>2C, 使用atrId和idForPart=fromUserId查询AccountJiFenChangeState记录</strong><br>\n如果不存在，说明第2步尚未开始或未能成功开始，简单做2–6步。这里有可能之前是第2步检查失败，但是未能修改AccountTransferRequest记录状态。注意可能出现以前检查失败，现在检查可以成功的情况。虽然单独做没有问题，但是并发做则有隐患，需要防止并发。<br>\n如果存在，看AccountJiFenChangeState记录内容：</p>\n<ul>\n<li>如果state=didOut，说明第2步已经成功完成，由第3步来检查处理，见3C.</li>\n<li>如果state=didRollback,说明应该回滚了，转入 B 回滚逻辑 的处理流程</li>\n<li>如果state=其他，按业务逻辑分析不应该出现，给开发人员报错提醒是bug。</li>\n</ul>\n<p><strong>3C, 使用atrId和idForPart=fromUserId查询AccountYuEChangeState记录</strong><br>\n如果不存在，说明第3步尚未开始或未能成功开始，简单做3–6步。这里有可能之前是第3步检查失败，但是未能修改AccountTransferRequest记录状态。注意可能出现以前检查失败，现在检查可以成功的情况。虽然单独做没有问题，但是并发做则有隐患，需要防止并发。<br>\n如果存在，看AccountYuEChangeState记录内容：</p>\n<ul>\n<li>如果state=didOut，说明第3步已经成功完成，由第4步来检查处理，见4C.</li>\n<li>如果state=didRollback,说明应该回滚了，转入 B 回滚逻辑 的处理流程</li>\n<li>如果state=其他，按业务逻辑分析不应该出现，给开发人员报错提醒是bug。</li>\n</ul>\n<p><strong>4C, 使用atrId和idForPart=toUserId查询AccountJiFenChangeState记录</strong><br>\n如果不存在，说明第4步尚未开始或未能成功开始，简单做4–6步<br>\n如果存在，看AccountJiFenChangeState记录内容：</p>\n<ul>\n<li>如果state=didOut，说明第4步已经成功完成，由第5步来检查处理，见5C.</li>\n<li>如果state=didRollback,说明应该回滚了，转入 B 回滚逻辑 的处理流程</li>\n<li>如果state=其他，按业务逻辑分析不应该出现，给开发人员报错提醒是bug。</li>\n</ul>\n<p><strong>5C, 使用atrId和idForPart=toUserId查询AccountYuEChangeState记录</strong><br>\n如果不存在，说明第5步尚未开始或未能成功开始，简单做5–6步<br>\n如果存在，看AccountYuEChangeState记录内容：</p>\n<ul>\n<li>如果state=didOut，说明第5步已经成功完成，由第6步来检查处理，见6C.</li>\n<li>如果state=didRollback,说明应该回滚了，转入 B 回滚逻辑 的处理流程</li>\n<li>如果state=其他，按业务逻辑分析不应该出现，给开发人员报错提醒是bug。</li>\n</ul>\n<p><strong>6C,同第6步</strong><br>\n<strong>7C,释放分布式锁</strong></p>\n<hr>\n<h3 id=\"小结\">小结</h3>\n<p>这种状态流转的分布式事务的实现的好处，我认为最大的好处就是直观。<br>\n所有的数据处理，都可以合在一个大的函数里面，可以看到整个处理过程的全貌。<br>\n这里也给出本人对前面的2个例子的具体代码实现，在 <a href=\"https://github.com/zlywq/tmycat1\">https://github.com/zlywq/tmycat1</a> 。</p>\n<hr>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112847\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112847votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112847\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/cbfe085c0bff85abc2536dce6e5c9aa4.jpg"], "create_date": "2017/11/08", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,分布式", "url": "http://blog.jobbole.com/112847/", "url_id": "e190b7b0d11930e4d377f77ca64b6c05"}
{"title": "2017 机器学习调查报告：Python 最火，R 极具潜力", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.oschina.net/news/90142/kaggle-surveys-2017\">开源中国</a>   </div><p>数据平台 Kaggle 近日发布了 2017 机器学习及数据科学调查报告，这也是 Kaggle 首次进行全行业调查。调查共收到超过 16000 份回复，受访内容包括最受欢迎的编程语言、不同国家数据科学家的平均年龄、不同国家的平均年薪等。</p>\n<p><a href=\"https://www.kaggle.com/surveys/2017\" target=\"_blank\" data-cke-saved-href=\"https://www.kaggle.com/surveys/2017\">点此查阅完整报告</a></p>\n<p>下面主要看看工具使用方面的结果。请注意，该报告包含多个国家的数据，可能存在收集不够全面的情况，仅供参考。</p>\n<h3>年龄</h3>\n<p>从全球范围来看，本次调查对象的平均年龄在 30 岁左右。当然，各个国家的数值会有差异，中国的机器学习从业者年龄的中位数是 25 岁。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/ad9183bd0f190d34767fc4f05d0faa6b.png\" width=\"1556\" height=\"868\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/181121_jYCI_2896879.png\"></p>\n<p>全球全职工作者为 65.7% ，其中中国为 53.% ，美国占比较高，达 70.9% 。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/e5024f2e10fc3e8df7d7d33deeef7379.png\" width=\"1558\" height=\"820\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/181432_CsuR_2896879.png\"></p>\n<p>Logistic 回归是除了军事和国安领域外，最常用的数据科学研究方法。在军事和国防安全领域，神经网络被使用更多。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/f9fc66d9ada7a0b33f114ddcd01f8f8b.png\" width=\"1350\" height=\"1062\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/182121_qnca_2896879.png\"></p>\n<p>在工具语言使用方面，Python是数据科学家使用最多的语言。同时，统计学家对 R 语言的忠诚度很高。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/8e7ea5d6a7e93877a6f10aa28b338d37.png\" width=\"1296\" height=\"934\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/182941_vvle_2896879.png\"></p>\n<p>关系型数据是最常用的数据类型，学术研究者和国防安全领域则更亲睐文本和图像。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/58ec2773750bc173f435c44c249fcbc9.png\" width=\"1296\" height=\"374\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/183212_i40S_2896879.png\"></p>\n<p>Git 是他们最常用的代码共享和托管方式。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/cd6f8eea76d021ceb6c7096b512fa1e8.png\" width=\"1284\" height=\"506\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/184038_637h_2896879.png\"></p>\n<p>Dirty Data （脏数据）是从业者遇到的最大障碍。此外，理解不同算法的能力不够也是困扰数据工作者的一大障碍。缺乏有效管理和资金支持，是面临的两大外在困境。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/b1d78fe80709b4a15f15197cc8abaad7.png\" width=\"1376\" height=\"960\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/184148_ZNsp_2896879.png\"></p>\n<p>有趣的是，只使用 Python 或只使用 R 的都觉得他们做出了正确的选择。 但是，如果你去询问那些既使用 Python 也使用 R 的人，推荐使用 Python 的可能会是 R 的两倍。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/38f51f43f060bf7053b8bf43177fedc1.png\" width=\"1390\" height=\"830\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/184815_m1bP_2896879.png\"></p>\n<p>数据科学是个变化极快的领域，业内人员需要不断更新知识体系，才可以在业内保持一定地位，不被时代淘汰。Stack Overflow Q&amp;A、Conferences 和 Podcasts 是已从业者经常使用的学习平台。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/0f8b7e7a213b8a4f2c503fc25bad51b8.png\" width=\"1092\" height=\"1040\" data-cke-saved-src=\"https://static.oschina.net/uploads/space/2017/1031/185914_fTHH_2896879.png\"></p>\n<p>更多内容可<a href=\"https://www.kaggle.com/surveys/2017\" target=\"_blank\" data-cke-saved-href=\"https://www.kaggle.com/surveys/2017\">点此查阅完整报告</a>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112832\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112832votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112832\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/05/27f7c25c21a7a0bad1112d3481e9eb37.jpg"], "create_date": "2017/11/07", "fav_nums": 0, "praise_nums": "2", "comment_nums": 0, "tags": "IT技术,机器学习", "url": "http://blog.jobbole.com/112832/", "url_id": "d88e6feab727d9607ee0bd39fc599acb"}
{"title": "你有学习者综合征吗？Web 开发是重灾区", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/do-you-have-the-learners-syndrome-169c8158ec16\">Joey Clover</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：学习者综合征的主要表现：学而不用，不停学习，却没有真正实际应用知识来做东西。如果过去的一年里，学习的语言或框架超过三个，那可能已经感染学习者综合征了。Web 开发是重灾区咯。</p>\n<h3>你有学习者综合征吗?</h3>\n<p>好吧，这本不是什么值得说道的事儿，但我注意到最近出现了一种行为趋势，尤其是在技术和软件开发领域。我不知道它的确切名字，就暂且称之为「学习者综合征」吧。它描述的是一种行为特征：那些“感染者”会不停地学习新知识，却从不真正地去应用它们。</p>\n<p>这个综合征的高发区在 Web 开发领域。最近几年我注意到， Web 框架的数量有了显著的增长。下图展示了一个大致的数量。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fl8mp95dy2j21kw0l7k1h.jpg\" width=\"2048\" height=\"763\"></p>\n<p>来源： <a href=\"https://github.com/mraible/history-of-web-frameworks-timeline\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/mraible/history-of-web-frameworks-timeline</a></p>\n<p>你看，过去的 5 年内，出现了大量的框架。我还注意到，Web 开发者都希望能了解并掌握一定数量的框架，这看起来是一种荣誉，并能代表他们的成就。那是什么造成了现在这种局面哪？</p>\n<p>我本人也饱受学习者综合征的困扰，我必须站出来对抗它。学习一门新的语言或技术，对我来说通常是一个有趣的经历。我发现自己在构建简单的 Web 应用程序时，会用到以下框架：</p>\n<ul class=\"postList\">\n<li id=\"2b23\" class=\"graf graf--li graf-after--p\">Go</li>\n<li id=\"4f3a\" class=\"graf graf--li graf-after--li\">TypeScript</li>\n<li id=\"02a9\" class=\"graf graf--li graf-after--li\">NodeJS</li>\n<li id=\"a972\" class=\"graf graf--li graf-after--li\">React</li>\n<li id=\"653a\" class=\"graf graf--li graf-after--li\">Angular</li>\n<li id=\"6278\" class=\"graf graf--li graf-after--li\">Spring</li>\n<li id=\"7ec1\" class=\"graf graf--li graf-after--li\">… x100</li>\n</ul>\n<p id=\"dd69\" class=\"graf graf--p graf-after--li\">这个列表还在不断更新。我创建了许多 todo 应用程序，已经远超我愿意承认的数量。我现在甚至都认为自己很擅长做 todo 应用程序，恩？这点可能要放到我的简历上。</p>\n<blockquote id=\"c2b3\" class=\"graf graf--blockquote graf-after--p\"><p>面试官：你有实际做出一些东西？</p></blockquote>\n<blockquote class=\"graf graf--blockquote graf-after--p\"><p>我：基本上没有，但你可以从我的档案看到，我做了许多 todo mvc web 应用程序，是用 NodeJS 的一个同构 react 服务器创建的。</p></blockquote>\n<p>要成为一名“优秀”的 Web 开发者，你需要了解并掌握许多技术（包括后端），这是众多技术带来的最大问题。但我认为这一点也不公平。几年前，前端和后端的界限十分清楚；而今天，这条界限已经模糊了，甚至不存在了。前端和后端现在已经合并，称之为“全栈（full-stack）”。这听起来更像是一个狡猾的借口/说辞，一名全栈工程师需要同时处理前端和后端两个方面，工作量反而翻倍了。</p>\n<p>我自己对后端技术更感兴趣，但随着异构服务器的兴起，我发现自己也经常为前端编写代码。如果你不熟悉同构服务器，下图给你举了个例子。（译注：与异构相对，同构 JavaScript 应用指的是用 JavaScript 编写的应用，能够同时运行于客户端和服务器。这也让在客户端和服务器之间共享代码变成一种更普遍自然的选择。）</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fl8mp858a6j20m808odi4.jpg\"></p>\n<p>我觉得，当我学习了多种框架和技术时，我运用它们来做出有价值东西的能力会降低。这是因为我花在学习上的时间，超过了做东西所用的时间。如果我开始将时间投入做东西，我感觉会错过了学习新技术的时机，甚至担心被别人超过，而跟不上时代的潮流。</p>\n<p>我认为解决这一切的办法，是找到一个平衡点。你必须专注于某一项技术，并且围绕它来分配你的时间。当然，你也可以学习新技术，但每天花在上面的时间不能超过一小时。你需要保证它只能是你的兴趣爱好，而不是一个会上瘾的坏习惯。如果在工作中你只使用一种技术，此时学习者综合征似乎更明显，因为我们大部分的业余时间都花在学习新技术上，而不是用于做东西。不过当你在一个能提升学习的地方工作，那在两方面都能做到最好。</p>\n<p>我建议你现在退后一步并思考一下，过去的一年中，你学习了多少新语言或新框架？你创建了多少 todo 应用程序？如果超过 3 个，那你可能“学得太多了”。当然，你可以说这是因为你热衷于学习（新知识），但我觉得对于更多人而言，将时间专注于一门技术上能带来更大的收益。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112828\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112828votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112828\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 42</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fl8mp95dy2j21kw0l7k1h.jpg"], "create_date": "2017/11/06", "fav_nums": 0, "praise_nums": "2", "comment_nums": 0, "tags": "职场,程序员,职场", "url": "http://blog.jobbole.com/112828/", "url_id": "0a5f20caf9094a143ac6f13c79cabc1b"}
{"title": "23 个热门深度学习库的排名", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/fengzhuang19940106\">iScream</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://blog.thedataincubator.com/2017/10/ranking-popular-deep-learning-libraries-for-data-science/\">The Data Incubator</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：基于 Github 和 Stack Overflow 上的活跃度以及 Google 搜索结果，The Data Incubator 最近制作了一个 23 个热门深度学习库的排名。</p>\n<p>下表显示了标准化后的分数，其中值 1 表示高于平均值的一个标准偏差（平均值为 0）。 例如，Caffe 在 Github 中的活动是一个高于平均水准的标准差，而 deeplearning4j 接近平均水平。见末尾的方法。</p>\n<p><img src=\"https://blog.thedataincubator.com/wp-content/uploads/2017/10/DL_libraries_rank.jpg-768x981.png\" alt=\"\"></p>\n<h3>结果和讨论</h3>\n<p>该排名基于三个同等重要的部分：Github（star 和 fork），Stack Overflow（标签和问题）和 Google 搜索结果（总和以及季度增长率）。这 3 部分是通过可用的 API 获得的。想弄一个全面的深入学习工具包列表不容易，所以在最后选取了我们认为具有代表性的五个不同的列表（有关详细信息，请参阅下面的方法）。计算每种度量的标准化分数，使我们能够看到在每个类别中哪些包是脱颖而出的。<a href=\"https://github.com/thedataincubator/data-science-blogs/blob/master/output/DL_libraries_final_Rankings.csv\">完整排名</a>在这里，而<a href=\"https://github.com/thedataincubator/data-science-blogs/blob/master/output/deep_learning_data.csv\">原始数据</a>在这里。</p>\n<h3>TensorFlow 在最大活跃社区中占主导</h3>\n<p>TensorFlow 在所有计算度量上的平均值上至少有两个标准偏差。TensorFlow 和第二大流行框架 Caffe 相比，在 Github 上的 fork 数几乎是后者的三倍，在 Stack Overflow 上的问题总量是后者的六倍以上。TensorFlow 由 Google Brain 团队于 2015 年首度开放，已经超过了众多的高级库，如 Theano（4）和 Torch（8），成为我们榜单的首位。TensorFlow 虽然与在 C++ 引擎上运行的 Python API 一起分发，但表中的几个库可以将 TensorFlow 用作后端，并提供它们自己的接口。这些库包括了 Keras（2），将很快成为 <a href=\"https://github.com/caffe2/caffe2/blob/master/caffe2/python/caffe_translator.py\">TensorFlow 和 Sonnet 的核心部分</a>（6）。TensorFlow 的流行可能是其通用的深度学习框架，灵活的界面，好看的计算图形可视化和 Google 的重要开发人员和社区资源的合力下的结果。</p>\n<h3>Caffe 尚未被 Caffe2 所取代</h3>\n<p>Caffe 在我们的名单上排名第三，除了 TensorFlow 外，Caffe 其在 Github 上的活跃度比其他竞争对手都要多。Caffe 传统上被认为比 Tensorflow 更专业，并且专注于图像处理，目标识别和预先训练的卷积神经网络。Facebook 于 2017 年 4 月发布了 Caffe2（11），并且已经排在了深入学习库的上半部分。Caffe2 是一个更轻巧、模块化和可扩展的 Caffe 版本，包括循环神经网络。Caffe 和 Caffe2 是相互独立的仓库（repo），所以数据科学家可以继续使用最初的 Caffe。然而，有一些迁移工具，比如如 <a href=\"https://github.com/caffe2/caffe2/blob/master/caffe2/python/caffe_translator.py\">Caffe Translator</a>，它提供了一种使用 Caffe2 来驱动现有 Caffe 模型的方法。</p>\n<h3>Keras 是深度学习上最受欢迎的前端库</h3>\n<p>Keras（2）是排名最高的非框架库。Keras 可以用作 TensorFlow（1）、Theano（4）、MXNet（7）、CNTK（9）、deeplearning4j（14）的前端。在所有的三个衡量标准上， Keras 的表现均优于平均水平。Keras 的流行可能是由于其简单性和易用性。Keras 允许快速的原型化，但代价是牺牲了从框架直接运行而产生的一些灵活性和控制。数据科学家在数据集上做深度学习的相关实验时，Keras 受到了他们的青睐。随着 R Studio 最近发布了 <a href=\"https://keras.rstudio.com/\">Keras 的界面</a>，Keras 的发展和受欢迎程度还在不断延续。</p>\n<h3>即使没有巨头支持，Theano 仍保持名列前茅</h3>\n<p>在新的深度学习框架的海洋中，Theano（4）是我们的排名中最古老的库。Theano 开创性地使用了计算图（computational graph），并在研究界普遍做深度学习和机器学习之时仍保持流行。Theano 本质上是一个 Python 的数值计算库，但可以与像 Lasagne 这样的高级深度学习库（15）一起使用。虽然 Google 支持 TensorFlow（1）和 Keras（2），Facebook 支持 PyTorch（5）和 Caffe2（11），MXNet（7）是 Amazon Web Services 的官方深度学习框架，Microsoft 设计并维护了 CNTK（9），Theano 在没受到行业巨头的正式支持下依然流行。</p>\n<h3>Sonnet 是增长最快的库</h3>\n<p>2017 年初，Google 的 DeepMind 公开发布了 Sonnet（6）的代码，这是一个以 TensorFlow 为基础的高级面向对象库。Sonnet 的 Google 搜索结果返回页数比上个季度增长了 272％，是我们列表中所有库中最大的。尽管 Google 在 2014 年收购了英国人工智能公司DeepMind，但 DeepMind 和 Google Brain 仍然在大体上是独立团队。DeepMind 专注于通用人工智能，Sonnet 可以帮助用户为他们的具体 AI 想法和研究做顶层设计。</p>\n<h3>Python 是深度学习的接口语言</h3>\n<p>PyTorch（5）是我们表中增长速度第二的库，该框架的唯一接口是 Python。与上季度相比，PyTorch 的 Google 搜索结果增加了 236％。在我们排的 23 个开源深度学习框架和包装器中，只有三个没有 Python 接口：Dlib（10）、MatConvNet（20）和OpenNN（23）。在 23 个库中，C ++ 和 R 接口分别只有 7 个和 6 个。虽然数据科学界在使用 Python 方面有些接近同一个共识，但对深度学习库而言，还有很多的选择。</p>\n<h3>限制</h3>\n<p> </p>\n<p>当然，有些库由于已经存在了更长的时间会有更高的数据，因此排名更高。唯一考虑到这一点的指标，是 Google 搜索季度增长率。</p>\n<p>数据呈现中遇到的一些困难：</p>\n<ul>\n<li>·神经设计和 wolfram 数学是专有的，故被删除</li>\n<li>·cntk 也被称为「微软认知工具包」，但是我们只使用了 ctnk 名称</li>\n<li>·neon 变成了 nervana neon</li>\n<li>·paddle 被改为 paddlepaddle</li>\n<li>·一些库显然是其他库的衍生品，如 Caffe 和 Caffe2。如果它们有单独/独立的 Github 仓库，我们分开处理这些库。</li>\n</ul>\n<h3>方法</h3>\n<p>所有源代码和数据都在<a href=\"https://github.com/thedataincubator/data-science-blogs\">我们的 Github 页面</a>上。</p>\n<p>我们首先<a href=\"https://svds.com/wp-content/uploads/2017/02/Deep_learning_ratings_final-1024x563.png\">从五个不同的来源</a>中生成了 23 个开源深度学习库的列表，然后收集了所有这些库的指标，以获得排名。Github 的数据基于 star 数和 fork 数、Stack Overflow 的数据包含包名称的标签和问题，Google 搜索结果则基于过去五年的 Google 搜索结果总数，并计算结果在过去三个月与前三个月相比的季度增长率。</p>\n<p>一些注意事项：</p>\n<ul>\n<li>·有几个库是常用词汇（caffe、chainer、lasagne），因此用于确定 Google 搜索结果数量的搜索词，包括库的名称和术语即“deep learning”。</li>\n<li>·任何不可用的 Stack Overflow 计数都转换为零计数。</li>\n<li>·计数被标准化为均值 0 和偏差 1，然后平均得到 Github 和 Stack Overflow 分数，并结合 Serch 结果，从而得到总分。</li>\n<li>·做了一些手动检查以确认 Github 仓库位置。</li>\n</ul>\n<p>所有数据均于 2017 年 9 月 14 日下载。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112812\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112812votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112812\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/fengzhuang19940106\">iScream</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/fengzhuang19940106\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/91B5C8EB0B449C2B9F52CCED48C6B4CD/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            一个大的学生        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/fengzhuang19940106\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/fengzhuang19940106/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/fengzhuang19940106/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"QQ：295039571\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/75e50492ab28c98cdd60036d6774e606.jpeg"], "create_date": "2017/11/06", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,工具与资源,深度学习", "url": "http://blog.jobbole.com/112812/", "url_id": "2738979e62063643b8d6fb2368020952"}
{"title": "10 个鲜为人知的 Linux 命令（2）", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.tecmint.com/10-lesser-known-linux-commands-part-2/\">Tecmint</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2265-1.html\">Linux中国/Luoxcat</a>   </div><p>继续上篇文章<a href=\"http://blog.jobbole.com/112817/\">11个鲜为人知的实用Linux命令</a>，在本文中，我们将关注其他几个不为人知的Linux命令，有些在管理桌面和服务器方面被证明是非常有用的。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/0f964c36558d93781c0991697b6a60db.png\" alt=\"\"></p>\n<h3>12. &lt;空格&gt; 命令</h3>\n<p>你在终端上键入的每个命令都会记录到<strong>history</strong>，也能用<strong>history</strong>命令重新调用。</p>\n<p>如何骗过<a href=\"http://www.searchsv.com.cn/showcontent_77595.htm\" target=\"_blank\" rel=\"external nofollow\">history 命令</a>呢？呵呵，你可以轻而易举地做到。在终端，只需要在键入命令之前输入一个或多个空格，这样你的命令就不会被记录了。</p>\n<p>让我们体验一下吧，先在终端尝试五个常见的 Linux 命令并在命令之前留个空(例如** ls, pwd, uname, echo “hi”** 和 <strong>who</strong>)，然后检查这些命令是不是记录在历史中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614521477868939\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$  ls\r\navi@localhost:~$  pwd\r\navi@localhost:~$  uname\r\navi@localhost:~$  echo “hi”\r\navi@localhost:~$  who</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614521477868939-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614521477868939-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614521477868939-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614521477868939-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614521477868939-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614521477868939-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614521477868939-2\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">pwd</span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614521477868939-3\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">uname</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614521477868939-4\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-i\">hi</span>”</div><div class=\"crayon-line\" id=\"crayon-5a022fd614521477868939-5\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">who</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>现在运行 history 命令来查看上面已执行的命令是否已经被记录了.</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd61452b124065019\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ history\r\n   40  cd /dev/ \r\n   41  ls \r\n   42  dd if=/dev/cdrom1 of=/home/avi/Desktop/squeeze.iso \r\n   43  ping www.google.com \r\n   44  su</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd61452b124065019-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61452b124065019-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61452b124065019-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61452b124065019-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61452b124065019-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61452b124065019-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd61452b124065019-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">history</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61452b124065019-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61452b124065019-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">ls</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61452b124065019-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">dd </span><span class=\"crayon-st\">if</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">cdrom1 </span><span class=\"crayon-v\">of</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">avi</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">squeeze</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">iso</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61452b124065019-5\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ping </span><span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61452b124065019-6\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">su</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>你看到没有最后执行的命令没有被记录。我们也可以用另一个命令cat | bash欺骗history，结果跟上面一样。</p>\n<h3>13. stat 命令</h3>\n<p>Linux中的<strong>stat</strong>命令用来显示文件或文件系统的状态信息。当用文件名作为参数时，<strong>stat</strong>将会展示文件的全部信息。状态信息包括文件 <strong>大小、块、权限、访问时间、修改时间、状态改变时间</strong>等。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd61452f991762878\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ stat 34.odt \r\n  File: `34.odt'\r\n  Size: 28822   Blocks: 64 IO Block: 4096   regular file \r\nDevice: 801h/2049d  Inode: 5030293 Links: 1 \r\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/ avi)   Gid: ( 1000/ avi) \r\nAccess: 2013-10-14 00:17:40.000000000 +0530 \r\nModify: 2013-10-01 15:20:17.000000000 +0530 \r\nChange: 2013-10-01 15:20:17.000000000 +0530</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd61452f991762878-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61452f991762878-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61452f991762878-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61452f991762878-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61452f991762878-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61452f991762878-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61452f991762878-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61452f991762878-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd61452f991762878-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stat</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34.odt</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61452f991762878-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-cn\">34.odt</span>'</div><div class=\"crayon-line\" id=\"crayon-5a022fd61452f991762878-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28822</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Blocks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IO </span><span class=\"crayon-v\">Block</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">regular </span><span class=\"crayon-e\">file </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61452f991762878-4\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">801h</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2049d</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Inode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5030293</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Links</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61452f991762878-5\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0644</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Uid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Gid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61452f991762878-6\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2013</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40.000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0530</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61452f991762878-7\"><span class=\"crayon-v\">Modify</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2013</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17.000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0530</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61452f991762878-8\"><span class=\"crayon-v\">Change</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2013</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17.000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0530</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<h3>14. + . 和 + .</h3>\n<p>上面的组合键事实上不是一个命令，而是传递最后一个命令参数到提示符后的快捷键，以输入命令的倒序方式传递命令。按住 Alt或Esc再按一下 “.”。</p>\n<h3>15. pv 命令</h3>\n<p>在<strong>电影</strong>里尤其是<strong>好莱坞电影</strong>你可能已经看见过模拟文本了，像是在实时输入文字，你可以用<strong>pv</strong>命令仿照任何类型模拟风的文本输出，包括流水线输出。<strong>pv</strong>可能没有在你的系统上安装，你需要用<strong>apt</strong>或<strong>yum</strong>获取安装包，然后安装<strong>pv</strong>到你的机器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614533621413908\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@localhost:# echo \"Tecmint [dot] com is the world's best website for qualitative Linux article\" | pv -qL 20</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614533621413908-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614533621413908-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-p\"># echo \"Tecmint [dot] com is the world's best website for qualitative Linux article\" | pv -qL 20</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><strong>输出样式</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614536062441876\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nTecmint [dot] com is the world''s best website for qualitative Linux article</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614536062441876-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614536062441876-1\"><span class=\"crayon-i\">Tecmint</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">dot</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">com </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">world</span><span class=\"crayon-s\">''</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">website </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">qualitative </span><span class=\"crayon-e\">Linux </span><span class=\"crayon-v\">article</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3>16. mount | colum -t</h3>\n<p>上面的命令用一个很不错的格式与规范列出了所有挂载文件系统。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd61453a682673993\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ mount | column -t</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd61453a682673993-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd61453a682673993-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">column</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">t</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><strong>输出样式</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd61453d406231492\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/dev/sda1on  / type  ext3 (rw,errors=remount-ro) \r\ntmpfson  /lib/init/rw  type  tmpfs(rw,nosuid,mode=0755) \r\nproc on  /proc type  proc (rw,noexec,nosuid,nodev) \r\nsysfson  /sys  type  sysfs(rw,noexec,nosuid,nodev) \r\nudev on  /dev  type  tmpfs(rw,mode=0755) \r\ntmpfson  /dev/shm  type  tmpfs(rw,nosuid,nodev) \r\ndevpts   on  /dev/pts  type  devpts   (rw,noexec,nosuid,gid=5,mode=620) \r\nfusectl  on  /sys/fs/fuse/connections  type  fusectl  (rw) \r\nbinfmt_misc  on  /proc/sys/fs/binfmt_misc  type  binfmt_misc  (rw,noexec,nosuid,nodev) \r\nnfsd on  /proc/fs/nfsd type  nfsd (rw)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd61453d406231492-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61453d406231492-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61453d406231492-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61453d406231492-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61453d406231492-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61453d406231492-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61453d406231492-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61453d406231492-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd61453d406231492-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd61453d406231492-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd61453d406231492-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda1on</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">ext3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">errors</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">remount</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ro</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61453d406231492-2\"><span class=\"crayon-v\">tmpfson</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">rw  </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">tmpfs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nosuid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0755</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61453d406231492-3\"><span class=\"crayon-e\">proc </span><span class=\"crayon-v\">on</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">proc </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">proc</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">noexec</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nosuid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nodev</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61453d406231492-4\"><span class=\"crayon-v\">sysfson</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sys  </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">sysfs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">noexec</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nosuid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nodev</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61453d406231492-5\"><span class=\"crayon-e\">udev </span><span class=\"crayon-v\">on</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">dev  </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">tmpfs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0755</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61453d406231492-6\"><span class=\"crayon-v\">tmpfson</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">shm  </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">tmpfs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nosuid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nodev</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61453d406231492-7\"><span class=\"crayon-e\">devpts   </span><span class=\"crayon-v\">on</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">pts  </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">devpts</span><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">noexec</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nosuid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">gid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">620</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61453d406231492-8\"><span class=\"crayon-e\">fusectl  </span><span class=\"crayon-v\">on</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fuse</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">connections  </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">fusectl</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd61453d406231492-9\"><span class=\"crayon-e\">binfmt_misc  </span><span class=\"crayon-v\">on</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">binfmt_misc  </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">binfmt_misc</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">noexec</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nosuid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nodev</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd61453d406231492-10\"><span class=\"crayon-e\">nfsd </span><span class=\"crayon-v\">on</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">nfsd </span><span class=\"crayon-e\">type  </span><span class=\"crayon-e\">nfsd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p></p>\n<h3>17. Ctr+l 命令</h3>\n<p>在进行下一步之前，我先问一下，你是如何清理你的终端？呵呵，你会在提示符后键入 “<strong>clear</strong>”。好的。用上面的命令执行清理终端都将成为过去。你只需要按下<strong>Ctr+l</strong>，看看它如何立即清理你的终端。</p>\n<h3>18. curl 命令</h3>\n<p>在<strong>命令行</strong>下如何检查你的<strong>未读邮件</strong>？这个命令对于工作在没有图形界面的服务器的人佷有用。它会在运行期间再次要求输入密码，你不需要在上面一行硬编码你的密码，否则会有其它安全风险。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614541917967061\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ curl -u avishek1210@gmail.com --silent \"https://mail.google.com/mail/feed/atom\" | perl -ne 'print \\t if //; print \"$2\\n\" if /&lt;(title|name)&gt;(.*)&lt;\\/\\1&gt;/;'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614541917967061-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614541917967061-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avishek1210</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">silent</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://mail.google.com/mail/feed/atom\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">perl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ne</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'print \\t if //; print \"$2\\n\" if /&lt;(title|name)&gt;(.*)&lt;\\/\\1&gt;/;'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><strong>输出样式</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614544447499021\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nEnter host password for user 'avishek1210@gmail.com': \r\nGmail - Inbox for avishek1210@gmail.com \r\nPeople offering cars in Delhi - Oct 26 \r\n    Quikr Alerts \r\nanother dependency question \r\n    Chris Bannister \r\n    Ralf Mardorf \r\n    Reco \r\n    Brian \r\n    François Patte \r\n    Curt \r\n    Siard \r\n    berenger.morel \r\nHi Avishek - Download your Free MBA Brochure Now... \r\n    Diya \r\n★Top Best Sellers Of The Week, Take Your Pick★ \r\n    Timesdeal \r\naptitude misconfigure? \r\n    Glenn English \r\nChoosing Debian version or derivative to run Wine when resource poor \r\n    Chris Bannister \r\n    Zenaan Harkness \r\n    Curt \r\n    Tom H \r\n    Richard Owlett \r\n    Ralf Mardorf \r\n    Rob Owens</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614544447499021-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a022fd614544447499021-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-1\"><span class=\"crayon-e\">Enter </span><span class=\"crayon-e\">host </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'avishek1210@gmail.com'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-2\"><span class=\"crayon-v\">Gmail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Inbox </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avishek1210</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">gmail</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-3\"><span class=\"crayon-e\">People </span><span class=\"crayon-e\">offering </span><span class=\"crayon-e\">cars </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Delhi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Quikr </span><span class=\"crayon-e\">Alerts </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-5\"><span class=\"crayon-e\">another </span><span class=\"crayon-e\">dependency </span><span class=\"crayon-e\">question </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-6\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Chris </span><span class=\"crayon-e\">Bannister </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-7\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Ralf </span><span class=\"crayon-e\">Mardorf </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-8\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Reco </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-9\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Brian </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-10\"><span class=\"crayon-e\">    </span><span class=\"crayon-i\">Fran</span>ç<span class=\"crayon-e\">ois </span><span class=\"crayon-e\">Patte </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-11\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Curt </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-12\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Siard </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-13\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">berenger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">morel </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-14\"><span class=\"crayon-e\">Hi </span><span class=\"crayon-v\">Avishek</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Download </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">Free </span><span class=\"crayon-e\">MBA </span><span class=\"crayon-e\">Brochure </span><span class=\"crayon-v\">Now</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">Diya</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-16\">★<span class=\"crayon-e\">Top </span><span class=\"crayon-e\">Best </span><span class=\"crayon-e\">Sellers </span><span class=\"crayon-e\">Of </span><span class=\"crayon-e\">The </span><span class=\"crayon-v\">Week</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Take </span><span class=\"crayon-e\">Your </span><span class=\"crayon-i\">Pick</span>★<span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Timesdeal </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-18\"><span class=\"crayon-e\">aptitude </span><span class=\"crayon-v\">misconfigure</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Glenn </span><span class=\"crayon-e\">English </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-20\"><span class=\"crayon-e\">Choosing </span><span class=\"crayon-e\">Debian </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">derivative </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run </span><span class=\"crayon-e\">Wine </span><span class=\"crayon-e\">when </span><span class=\"crayon-e\">resource </span><span class=\"crayon-e\">poor </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-21\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Chris </span><span class=\"crayon-e\">Bannister </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-22\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Zenaan </span><span class=\"crayon-e\">Harkness </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-23\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Curt </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-24\"><span class=\"crayon-e\">    </span><span class=\"crayon-i\">Tom</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Richard </span><span class=\"crayon-e\">Owlett </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614544447499021-26\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Ralf </span><span class=\"crayon-e\">Mardorf </span></div><div class=\"crayon-line\" id=\"crayon-5a022fd614544447499021-27\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">Rob </span><span class=\"crayon-v\">Owens</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p></p>\n<h3>19.screen 命令</h3>\n<p><strong>screen</strong>命令能断开一个会话下的一个长时间运行的进程并能再次连接，如有需要，也提供了灵活的命令选项</p>\n<p>要运行一个长时间的进程，我们通常执行</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614548878321335\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ ./long-unix-script.sh</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614548878321335-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614548878321335-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">unix</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">script</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>缺乏灵活性，需要用户持续当前的会话，但是如果我们执行上面的命令是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd61454b260892018\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ screen ./long-unix-script.sh</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd61454b260892018-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd61454b260892018-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">screen</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">unix</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">script</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>它能在不同会话间断开或重连。当一个命令正在执行时按“<strong>Ctrl + A</strong>”然后再按“<strong>d</strong>”来<strong>断开</strong>。</p>\n<p>重新连接运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd61454e390739133\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ screen -r 4980.pts-0.localhost</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd61454e390739133-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd61454e390739133-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">screen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4980.pts</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.localhost</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><strong>注解</strong>：在这里，这个命令的稍后的部分是<strong>screen id</strong>，你能用‘<strong>screen -ls</strong>’命令查看。欲了解更多关于<strong>screen命令</strong>和它们的用法，请阅读我们的一些帮助文章：<a href=\"http://www.tecmint.com/screen-command-examples-to-manage-linux-terminals/\" target=\"_blank\" rel=\"external nofollow\">10 个screen命令的示例</a>。</p>\n<h3>20. file</h3>\n<p>No!写上面的命令不是笔误. ‘<strong>file</strong>’是一个能提供关于文件类型信息的命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614552113921373\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ file 34.odt\r\n34.odt: OpenDocument Text</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614552113921373-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614552113921373-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614552113921373-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34.odt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614552113921373-2\"><span class=\"crayon-cn\">34.odt</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">OpenDocument </span><span class=\"crayon-v\">Text</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3>21. id</h3>\n<p>上面的命令会打印真正的和有效的<strong>用户</strong>和<strong>组</strong>的id。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614555791488371\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~$ id</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614555791488371-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614555791488371-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><strong>输出样式</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022fd614558521070909\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuid=1000(avi) gid=1000(avi) \r\ngroups=1000(avi),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),109(netdev),111(bluetooth),117(scanner)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022fd614558521070909-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022fd614558521070909-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022fd614558521070909-1\"><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022fd614558521070909-2\"><span class=\"crayon-v\">groups</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cdrom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">floppy</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">audio</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dip</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">44</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">video</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">46</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">plugdev</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">109</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">netdev</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">111</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">117</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">scanner</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112820\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112820votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112820\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/0f964c36558d93781c0991697b6a60db.png"], "create_date": "2017/11/07", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/112820/", "url_id": "820912ea31f1c23bb52d99614a9bedbd"}
{"title": "11 个鲜为人知的 Linux 命令（1）", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.tecmint.com/11-lesser-known-useful-linux-commands/\">Tecmint</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2258-1.html\">Linux中国</a>   </div><p><strong>Linux</strong>命令行吸引了大多数<strong>Linux爱好者</strong>。一个正常的<strong>Linux</strong>用户一般掌握大约<a href=\"http://www.tecmint.com/60-commands-of-linux-a-guide-from-newbies-to-system-administrator/\" target=\"_blank\" rel=\"nofollow\">50-60个命令</a>来处理<strong>每日</strong>的任务。Linux命令和它们的转换对于<strong>Linux用户</strong>、<strong>Shell脚本程序员</strong>和<strong>管理员</strong>来说是最有价值的宝藏。有些Linux命令很少人知道，但不管你是新手还是高级用户，它们都非常方便有用。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/55035494545937e97a2b57e4e676c024.png\" alt=\"\"></p>\n<p>这篇文章的目的是介绍一些少有人知的Linux命令，它们一定会高效地帮你管理你的桌面/服务器。</p>\n<h3 id=\"content_h3_2_5\">1. sudo !!命令</h3>\n<p>没有特定输入<strong>sudo命令</strong>而运行，将给出没有权限的错误。那么，你不需要重写整个命令，仅仅输入’<strong>!!</strong>‘就可以抓取最后的命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf1b585892633\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ apt-get update\r\n\r\nE: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied) \r\nE: Unable to lock directory /var/lib/apt/lists/ \r\nE: Could not open lock file /var/lib/dpkg/lock - open (13: Permission denied) \r\nE: Unable to lock the administration directory (/var/lib/dpkg/), are you root?</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf1b585892633-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf1b585892633-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf1b585892633-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf1b585892633-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf1b585892633-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf1b585892633-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf1b585892633-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-i\">update</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf1b585892633-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf1b585892633-3\"><span class=\"crayon-v\">E</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Could </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open </span><span class=\"crayon-e\">lock </span><span class=\"crayon-v\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lists</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Permission </span><span class=\"crayon-v\">denied</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf1b585892633-4\"><span class=\"crayon-v\">E</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Unable </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock </span><span class=\"crayon-v\">directory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lists</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf1b585892633-5\"><span class=\"crayon-v\">E</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Could </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open </span><span class=\"crayon-e\">lock </span><span class=\"crayon-v\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dpkg</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Permission </span><span class=\"crayon-v\">denied</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf1b585892633-6\"><span class=\"crayon-v\">E</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Unable </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">administration </span><span class=\"crayon-e\">directory</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dpkg</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">are </span><span class=\"crayon-e\">you </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">?</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>–</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf24017025820\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo !!\r\n\r\nsudo apt-get update \r\n[sudo] password for server: \r\n…\r\n..\r\nFetched 474 kB in 16s (28.0 kB/s) \r\nReading package lists... Done \r\nserver@localhost:~$</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf24017025820-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf24017025820-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf24017025820-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf24017025820-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf24017025820-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf24017025820-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf24017025820-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf24017025820-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf24017025820-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf24017025820-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf24017025820-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf24017025820-3\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-i\">update</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf24017025820-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf24017025820-5\">…</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf24017025820-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf24017025820-7\"><span class=\"crayon-i\">Fetched</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">474</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kB </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16s</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">28.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kB</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf24017025820-8\"><span class=\"crayon-e\">Reading </span><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lists</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Done </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf24017025820-9\"><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"content_h3_2_11\">2. python命令</h3>\n<p>下面的命令生产一个通过HTTP显示文件夹结构树的简单网页，可以通过浏览器在端口<strong>8000</strong>访问，直到发出中断信号。</p>\n<p># python -m SimpleHTTPServer</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/ff0e84de0ff93ad366c0ad07c9ce02cc.png\" alt=\"\"></p>\n<h3 id=\"content_h3_3_5\">3. mtr命令</h3>\n<p>我们大多数都熟悉<strong>ping</strong>和<strong>traceroute</strong>。那对于把两个命令的功能合二为一的<strong>mtr命令</strong>呢。如果<strong>mtr</strong>没在你的机子上安装，<strong>apt</strong>或者<strong>yum</strong>需要的包。</p>\n<p>$ sudo apt-get install mtr (On Debian based Systems)</p>\n<p># yum install mtr (On Red Hat based Systems)</p>\n<p>现在运行mtr命令，开始查看mtr运行的主机和google.com直接的网络连接。</p>\n<p># mtr google.com</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/11/690ed97274747f39b29cb03a320bdf27.png\" alt=\"\"></p>\n<h3 id=\"content_h3_4_5\">4. Ctrl+x+e命令</h3>\n<p>这个命令对于管理员和开发者非常有用。为了使每天的任务自动化，管理员需要通过输入<strong>vi</strong>、<strong>vim</strong>、<strong>nano</strong>等打开编辑器。</p>\n<p>仅仅从命令行快速的敲击“Ctrl-x-e”，就可以在编辑器中开始工作了。</p>\n<h3 id=\"content_h3_4_11\">5. nl命令</h3>\n<p>“<strong>nl命令</strong>”添加文件的行数。一个叫做’<strong>one.txt</strong>‘的文件，其每行的内容是（<strong>Fedora</strong>、<strong>Debian</strong>、<strong>Arch</strong>、<strong>Slack</strong>和<strong>Suse</strong>），给每行添加行号。首先使用<a href=\"http://www.tecmint.com/13-basic-cat-command-examples-in-linux/\" target=\"_blank\" rel=\"nofollow\">cat命令</a>显示“<strong>one.txt</strong>”的文件内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf29397909722\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# cat one.txt \r\n\r\nfedora \r\ndebian \r\narch \r\nslack \r\nsuse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf29397909722-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf29397909722-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf29397909722-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf29397909722-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf29397909722-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf29397909722-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf29397909722-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf29397909722-1\"><span class=\"crayon-p\"># cat one.txt </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf29397909722-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf29397909722-3\"><span class=\"crayon-e\">fedora </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf29397909722-4\"><span class=\"crayon-e\">debian </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf29397909722-5\"><span class=\"crayon-e\">arch </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf29397909722-6\"><span class=\"crayon-e\">slack </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf29397909722-7\"><span class=\"crayon-v\">suse</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在运行“nl命令”，以添加行号的方式来显示。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf2f962944932\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# nl one.txt \r\n\r\n1 fedora \r\n2 debian \r\n3 arch \r\n4 slack \r\n5 suse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf2f962944932-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf2f962944932-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf2f962944932-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf2f962944932-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf2f962944932-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf2f962944932-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf2f962944932-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf2f962944932-1\"><span class=\"crayon-p\"># nl one.txt </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf2f962944932-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf2f962944932-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">fedora</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf2f962944932-4\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">debian</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf2f962944932-5\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">arch</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf2f962944932-6\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">slack</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf2f962944932-7\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">suse</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"content_h3_5_5\">6. shuf命令</h3>\n<p>“Shut”命令随机从一个<strong>文件</strong>或<strong>文件夹</strong>中选择<strong>行/文件/文件夹</strong>。首先使用<a href=\"http://www.tecmint.com/15-basic-ls-command-examples-in-linux/\" target=\"_blank\" rel=\"nofollow\">ls命令</a>来显示文件夹的内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf33073413517\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ls \r\nDesktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos\r\n\r\n#  ls | shuf (shuffle Input)\r\nMusic \r\nDocuments \r\nTemplates \r\nPictures \r\nPublic \r\nDesktop \r\nDownloads \r\nVideos\r\n\r\n#  ls | shuf -n1 # 随机选择一个\r\nPublic\r\n\r\n# ls | shuf -n1 \r\nVideos\r\n\r\n# ls | shuf -n1 \r\nTemplates\r\n\r\n# ls | shuf -n1 \r\nDownloads</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf33073413517-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf33073413517-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-1\"><span class=\"crayon-p\"># ls </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-2\"><span class=\"crayon-e\">Desktop  </span><span class=\"crayon-e\">Documents  </span><span class=\"crayon-e\">Downloads  </span><span class=\"crayon-e\">Music  </span><span class=\"crayon-e\">Pictures  </span><span class=\"crayon-m\">Public</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Templates  </span><span class=\"crayon-v\">Videos</span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-4\"><span class=\"crayon-p\">#  ls | shuf (shuffle Input)</span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-5\"><span class=\"crayon-e\">Music </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-6\"><span class=\"crayon-e\">Documents </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-7\"><span class=\"crayon-e\">Templates </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-8\"><span class=\"crayon-e\">Pictures </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-9\"><span class=\"crayon-m\">Public</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-10\"><span class=\"crayon-e\">Desktop </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-11\"><span class=\"crayon-e\">Downloads </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-12\"><span class=\"crayon-v\">Videos</span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-14\"><span class=\"crayon-p\">#  ls | shuf -n1 # 随机选择一个</span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-15\"><span class=\"crayon-m\">Public</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-16\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-17\"><span class=\"crayon-p\"># ls | shuf -n1 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-18\"><span class=\"crayon-v\">Videos</span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-20\"><span class=\"crayon-p\"># ls | shuf -n1 </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-21\"><span class=\"crayon-v\">Templates</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-22\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf33073413517-23\"><span class=\"crayon-p\"># ls | shuf -n1 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf33073413517-24\"><span class=\"crayon-v\">Downloads</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><strong>注意</strong>：你可以把‘ <strong>n1</strong>’替换成‘ <strong>n2</strong>’来输出两个随机选择或者使用 <strong>n3</strong>、 <strong>n4</strong>等数字输出其他任意的随机选择。</p>\n<h3 id=\"content_h3_5_22\">7. ss命令</h3>\n<p>“<strong>ss</strong>”表示socket统计。这个命令调查socket，显示类似<a href=\"http://www.tecmint.com/20-netstat-commands-for-linux-network-management/\" target=\"_blank\" rel=\"nofollow\">netstat命令</a>的信息。它可以比其他工具显示更多的<strong>TCP</strong>和状态信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf36864000383\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ss \r\n\r\nState      Recv-Q Send-Q      Local Address:Port          Peer Address:Port   \r\nESTAB      0      0           192.168.1.198:41250        *.*.*.*:http    \r\nCLOSE-WAIT 1      0               127.0.0.1:8000             127.0.0.1:41393   \r\nESTAB      0      0           192.168.1.198:36239        *.*.*.*:http    \r\nESTAB      310    0               127.0.0.1:8000             127.0.0.1:41384   \r\nESTAB      0      0           192.168.1.198:41002       *.*.*.*:http    \r\nESTAB      0      0               127.0.0.1:41384            127.0.0.1:8000</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf36864000383-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf36864000383-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf36864000383-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf36864000383-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf36864000383-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf36864000383-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf36864000383-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf36864000383-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf36864000383-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf36864000383-1\"><span class=\"crayon-p\"># ss </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf36864000383-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf36864000383-3\"><span class=\"crayon-e\">State      </span><span class=\"crayon-v\">Recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Send</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Local </span><span class=\"crayon-v\">Address</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">Port          </span><span class=\"crayon-e\">Peer </span><span class=\"crayon-v\">Address</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">Port   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf36864000383-4\"><span class=\"crayon-i\">ESTAB</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">192.168.1.198</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41250</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">http    </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf36864000383-5\"><span class=\"crayon-v\">CLOSE</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">WAIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8000</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41393</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf36864000383-6\"><span class=\"crayon-i\">ESTAB</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">192.168.1.198</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36239</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">http    </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf36864000383-7\"><span class=\"crayon-i\">ESTAB</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">310</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8000</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41384</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf36864000383-8\"><span class=\"crayon-i\">ESTAB</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">192.168.1.198</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41002</span><span class=\"crayon-h\">       </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">http    </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf36864000383-9\"><span class=\"crayon-i\">ESTAB</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41384</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8000</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p></p>\n<h3 id=\"content_h3_6_5\">8. last命令</h3>\n<p>“<strong>last</strong>”命令显示的是上次登录用户的历史信息。这个命令通过搜索文件“<strong>/var/log/wtmp</strong>”，显示<strong>logged</strong><strong>-in</strong>和<strong>logged-out</strong>及其<strong>tty‘s</strong>的用户列表。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf3a994584871\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#  last \r\nserver   pts/0        :0               Tue Oct 22 12:03   still logged in   \r\nserver   tty8         :0               Tue Oct 22 12:02   still logged in   \r\n…\r\n...\r\n(unknown tty8         :0               Tue Oct 22 12:02 - 12:02  (00:00)    \r\nserver   pts/0        :0               Tue Oct 22 10:33 - 12:02  (01:29)    \r\nserver   tty7         :0               Tue Oct 22 10:05 - 12:02  (01:56)    \r\n(unknown tty7         :0               Tue Oct 22 10:04 - 10:05  (00:00)    \r\nreboot   system boot  3.2.0-4-686-pae  Tue Oct 22 10:04 - 12:44  (02:39)    \r\n\r\nwtmp begins Fri Oct  4 14:43:17 2007</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3a994584871-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3a994584871-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3a994584871-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3a994584871-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3a994584871-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3a994584871-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3a994584871-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3a994584871-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3a994584871-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3a994584871-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3a994584871-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3a994584871-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf3a994584871-1\"><span class=\"crayon-p\">#  last </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3a994584871-2\"><span class=\"crayon-e\">server   </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">still </span><span class=\"crayon-e\">logged </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3a994584871-3\"><span class=\"crayon-e\">server   </span><span class=\"crayon-v\">tty8</span><span class=\"crayon-h\">         </span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">still </span><span class=\"crayon-e\">logged </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3a994584871-4\">…</div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3a994584871-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3a994584871-6\"><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">unknown </span><span class=\"crayon-v\">tty8</span><span class=\"crayon-h\">         </span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3a994584871-7\"><span class=\"crayon-e\">server   </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3a994584871-8\"><span class=\"crayon-e\">server   </span><span class=\"crayon-v\">tty7</span><span class=\"crayon-h\">         </span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">05</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">56</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3a994584871-9\"><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">unknown </span><span class=\"crayon-v\">tty7</span><span class=\"crayon-h\">         </span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">               </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">05</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3a994584871-10\"><span class=\"crayon-e\">reboot   </span><span class=\"crayon-e\">system </span><span class=\"crayon-i\">boot</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.2.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">686</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">pae  </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">02</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3a994584871-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3a994584871-12\"><span class=\"crayon-e\">wtmp </span><span class=\"crayon-e\">begins </span><span class=\"crayon-e\">Fri </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2007</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p></p>\n<h3 id=\"content_h3_6_14\">9. curl ifconfig.me</h3>\n<p>那么如何得到你的<strong>外部IP地址</strong>呢？使用google？那么这个命令就在你的终端输出你的外部IP地址。</p>\n<p># curl ifconfig.me</p>\n<p><strong>注意</strong>：你可能没有按照curl包，你需要 <strong>apt/yum</strong>来按照包。</p>\n<h3>10. tree命令</h3>\n<p>以树式的格式得到当前文件夹的结构。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf3e516794342\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# tree\r\n. \r\n|-- Desktop \r\n|-- Documents \r\n|   `-- 37.odt \r\n|-- Downloads \r\n|   |-- attachments.zip \r\n|   |-- ttf-indic-fonts_0.5.11_all.deb \r\n|   |-- ttf-indic-fonts_1.1_all.deb \r\n|   `-- wheezy-nv-install.sh \r\n|-- Music \r\n|-- Pictures \r\n|   |-- Screenshot from 2013-10-22 12:03:49.png \r\n|   `-- Screenshot from 2013-10-22 12:12:38.png \r\n|-- Public \r\n|-- Templates \r\n`-- Videos \r\n\r\n10 directories, 23 files</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf3e516794342-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf3e516794342-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-1\"><span class=\"crayon-p\"># tree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Documents</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">37.odt</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-6\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Downloads</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-7\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">attachments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">zip</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-8\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ttf</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">indic</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fonts_0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">5.11_all.deb</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-9\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ttf</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">indic</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fonts_1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">1_all.deb</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-10\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wheezy</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">nv</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">install</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-11\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Music</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-12\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pictures</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-13\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Screenshot </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2013</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49.png</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-14\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Screenshot </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2013</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38.png</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-15\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">Public</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-16\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Templates</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-17\"><span class=\"crayon-sy\">`</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Videos</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf3e516794342-18\"> </div><div class=\"crayon-line\" id=\"crayon-5a02974bebf3e516794342-19\"><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">directories</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">files</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p></p>\n<h3 id=\"content_h3_7_5\">11. pstree</h3>\n<p>这个命令显示当前运行的所有进程及其相关的子进程，输出的是类似‘<strong>tree</strong>’命令的树状格式。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02974bebf43392926674\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pstree \r\ninit─┬─NetworkManager───{NetworkManager} \r\n     ├─accounts-daemon───{accounts-daemon} \r\n     ├─acpi_fakekeyd \r\n     ├─acpid \r\n     ├─apache2───10*[apache2] \r\n     ├─at-spi-bus-laun───2*[{at-spi-bus-laun}] \r\n     ├─atd \r\n     ├─avahi-daemon───avahi-daemon \r\n     ├─bluetoothd \r\n     ├─colord───{colord} \r\n     ├─colord-sane───2*[{colord-sane}] \r\n     ├─console-kit-dae───64*[{console-kit-dae}] \r\n     ├─cron \r\n     ├─cupsd \r\n     ├─2*[dbus-daemon] \r\n     ├─dbus-launch \r\n     ├─dconf-service───2*[{dconf-service}] \r\n     ├─dovecot─┬─anvil \r\n     │         ├─config \r\n     │         └─log \r\n     ├─exim4 \r\n     ├─gconfd-2 \r\n     ├─gdm3─┬─gdm-simple-slav─┬─Xorg \r\n     │      │                 ├─gdm-session-wor─┬─x-session-manag─┬─evolution-a+ \r\n     │      │                 │                 │                 ├─gdu-notific+ \r\n     │      │                 │                 │                 ├─gnome-scree+ \r\n     │      │                 │                 │                 ├─gnome-setti+ \r\n     │      │                 │                 │                 ├─gnome-shell+++ \r\n     │      │                 │                 │                 ├─nm-applet──+++ \r\n     │      │                 │                 │                 ├─ssh-agent \r\n     │      │                 │                 │                 ├─tracker-min+ \r\n     │      │                 │                 │                 ├─tracker-sto+ \r\n     │      │                 │                 │                 └─3*[{x-sessi+ \r\n     │      │                 │                 └─2*[{gdm-session-wor}] \r\n     │      │                 └─{gdm-simple-slav} \r\n     │      └─{gdm3} \r\n     ├─6*[getty] \r\n     ├─gnome-keyring-d───9*[{gnome-keyring-d}] \r\n     ├─gnome-shell-cal───2*[{gnome-shell-cal}] \r\n     ├─goa-daemon───{goa-daemon} \r\n     ├─gsd-printer───{gsd-printer} \r\n     ├─gvfs-afc-volume───{gvfs-afc-volume}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02974bebf43392926674-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a02974bebf43392926674-43\">43</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-1\"><span class=\"crayon-p\"># pstree </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-2\"><span class=\"crayon-e\">init</span>─┬─<span class=\"crayon-e\">NetworkManager</span>───<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">NetworkManager</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-3\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">accounts</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">daemon</span>───<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">accounts</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">daemon</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-4\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">acpi_fakekeyd</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-5\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">acpid</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-6\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">apache2</span>───<span class=\"crayon-cn\">10</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">apache2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-7\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">at</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">spi</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">bus</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">laun</span>───<span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">at</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">spi</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bus</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">laun</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-8\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">atd</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-9\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">avahi</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">daemon</span>───<span class=\"crayon-e\">avahi</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">daemon</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-10\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">bluetoothd</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-11\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">colord</span>───<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">colord</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-12\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">colord</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sane</span>───<span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">colord</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sane</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-13\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">console</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">kit</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dae</span>───<span class=\"crayon-cn\">64</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">console</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">kit</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dae</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-14\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">cron</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-15\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">cupsd</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-16\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">dbus</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">daemon</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-17\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">dbus</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">launch</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-18\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">dconf</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">service</span>───<span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">dconf</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">service</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-19\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">dovecot</span>─┬─<span class=\"crayon-e\">anvil</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-20\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">         </span>├─<span class=\"crayon-e\">config</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-21\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">         </span>└─<span class=\"crayon-e\">log</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-22\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">exim4</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-23\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">gconfd</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-24\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">gdm3</span>─┬─<span class=\"crayon-e\">gdm</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">simple</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">slav</span>─┬─<span class=\"crayon-e\">Xorg</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-25\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">gdm</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">session</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">wor</span>─┬─<span class=\"crayon-e\">x</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">session</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">manag</span>─┬─<span class=\"crayon-e\">evolution</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">a</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-26\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">gdu</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">notific</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-27\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">scree</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-28\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">setti</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-29\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">shell</span><span class=\"crayon-o\">++</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-30\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">nm</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">applet</span>──<span class=\"crayon-o\">++</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-31\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">ssh</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">agent</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-32\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">tracker</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">min</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-33\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>├─<span class=\"crayon-e\">tracker</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sto</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-34\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>└─<span class=\"crayon-cn\">3</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-e\">x</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sessi</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-35\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>│<span class=\"crayon-h\">                 </span>└─<span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">gdm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">session</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">wor</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-36\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>│<span class=\"crayon-h\">                 </span>└─<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">gdm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">simple</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">slav</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-37\"><span class=\"crayon-h\">     </span>│<span class=\"crayon-h\">      </span>└─<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">gdm3</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-38\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-cn\">6</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">getty</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-39\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">keyring</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">d</span>───<span class=\"crayon-cn\">9</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">keyring</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-40\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">shell</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">cal</span>───<span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">shell</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cal</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-41\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">goa</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">daemon</span>───<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">goa</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">daemon</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02974bebf43392926674-42\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">gsd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">printer</span>───<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">gsd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">printer</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02974bebf43392926674-43\"><span class=\"crayon-h\">     </span>├─<span class=\"crayon-e\">gvfs</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">afc</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">volume</span>───<span class=\"crayon-sy\">{</span><span class=\"crayon-v\">gvfs</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">afc</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">volume</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0089 seconds] -->\r\n<p></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112817\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112817votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112817\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/55035494545937e97a2b57e4e676c024.png"], "create_date": "2017/11/06", "fav_nums": 0, "praise_nums": "2", "comment_nums": 0, "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/112817/", "url_id": "6ed3af0afc33aa32fc24f37a7863eda2"}
{"title": "几乎毁掉谷歌吃豆人涂鸦游戏的 bug", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/backchannel/pac-man-s-siren-call-4b589ea1d1e\">Marcin Wichary</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：2010 年 5 月 21 日吃豆人游戏 30 周年，Google 首页在上午 9 点上线了一个可交互的涂鸦游戏。几个小时内，这个游戏就让全世界都为之疯狂。不过涂鸦团队开始陆续收到一个诡异 Bug 的报告。作者在本文中分享了这个 Bug 背后的有趣故事。<b></b></p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl9kjcw93xj20eu09fwew.jpg\" width=\"534\" height=\"339\"></p>\n<p><em>2010 年 5 月 21 日的那个周五对大多数人来说，可能都只是一个普通的周五而已。但对我来说，那一天可以说是最不同寻常的周五了。</em></p>\n<p><em>那天我的推特瘫痪了。那天我跟我父亲说了最后一句话。那天我让数亿人体验了我做的东西。但是这里的故事跟所有这些都没有关系。本文讲述了我是怎样让一些人觉得他们疯了的。</em></p>\n<p><strong>2010 年我在 Google 工作</strong>，并被拉进了吃豆人涂鸦游戏的研究和编程工作中。吃豆人涂鸦游戏是 Google 为了庆祝这款经典电子游戏诞生 30 周年而推出的，而且会放在 Google 的主页上。在那天之前，我花了几个月时间从头写完了所有的代码（没有任何效仿）。周五早上，太平洋时间 9 点，我们像全世界揭开了它的面纱。</p>\n<p style=\"text-align: center;\"><object width=\"600\" height=\"420\"><param name=\"movie\" value=\"http://player.youku.com/player.php/sid/XMzE0MDY1ODMzNg/v.swf\"><param name=\"allowFullScreen\" value=\"true\"><param name=\"allowscriptaccess\" value=\"never\"><param name=\"allownetworking\" value=\"internal\"><param name=\"flashvars\" value=\"isShowRelatedVideo=false&amp;showAd=0&amp;show_pre=1&amp;show_next=1&amp;isAutoPlay=false&amp;isDebug=false&amp;UserID=&amp;winType=interior&amp;playMovie=true&amp;MMControl=false&amp;MMout=false&amp;RecordCode=1001,1002,1003,1004,1005,1006,2001,3001,3002,3003,3004,3005,3007,3008,9999\"><embed src=\"http://player.youku.com/player.php/sid/XMzE0MDY1ODMzNg/v.swf\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"never\" allownetworking=\"internal\" allowfullscreen=\"true\" width=\"600\" height=\"420\" flashvars=\"isShowRelatedVideo=false&amp;showAd=0&amp;show_pre=1&amp;show_next=1&amp;isAutoPlay=false&amp;isDebug=false&amp;UserID=&amp;winType=interior&amp;playMovie=true&amp;MMControl=false&amp;MMout=false&amp;RecordCode=1001,1002,1003,1004,1005,1006,2001,3001,3002,3003,3004,3005,3007,3008,9999\"></embed></object></p>\n<p style=\"text-align: center;\">（伯乐在线补注：<a href=\"https://www.google.com/logos/2010/pacman10-i.html\" target=\"_blank\">吃豆人 Doodle 传送门</a>，需梯子）</p>\n<p>这是首款像样的交互型涂鸦，也是第一个能真正跟 Google 搜索框争夺注意力的东西。所以，在众多设计决策中，我们需要注意的是如何在推广这款涂鸦游戏和便于人们完成搜索并继续他们的生活之间达到平衡。</p>\n<p>在一番深思熟虑之后，我们做出了以下几个决定：</p>\n<p>如果访客打开 Google 主页超过了 10 秒钟就自动开始游戏（当然啦，如果他们点击这个涂鸦，或者按下特别的“投币”按钮就能提前开始玩了）</p>\n<ul>\n<li>游戏默认是开启声音的（否则很多人可能意识不到这个游戏是有声音的，并损失了很多游戏乐趣）</li>\n<li>吃豆人涂鸦游戏会在 Google 主页上保持 48 小时，而不是通常的 24 小时</li>\n</ul>\n<p>来势汹汹？可能吧。我们主页上的可是吃豆人啊！我们对此感到非常骄傲，而且希望人们——他们还不习惯可以玩的 Google 主页——能注意到它，能玩得开心。</p>\n<p><strong>即使在发布之前，那天已经像</strong>个不寻常的周五了。我们之前从未做过像个涂鸦一样的东西。我和团队里的一些人通宵拍了照，还准备了一个吃豆人的内部比赛版本。就我个人而言，我还是吓坏了。我是用户体验团队的一名设计师。诚然，我的代码通过了所有适当的审查，但是我还是不敢相信它能——一字不差地——出现在 Google 最有价值的资产上。</p>\n<p>我们在上午 9 点打开开关。几个小时内吃豆人游戏就让全世界都为之疯狂。很快，我收到了如山洪般的反馈，以致于我根本不可能跟得上收到反馈的速度。我还突然被要求去参加新闻采访。上面提到“我的推特瘫痪了”，其实可能是我把事情自私地过度简化了（如果没有整个优秀的团队支持着我，这一切都不会发生），但是我也不认为有夸张的成分在里面。一个小时内，随着越来越多关于 Google 吃豆人的推特消息涌进来，推特开始向我们发送这样的消息：</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl9k4lw30hj20rs0hsjst.jpg\" width=\"690\" height=\"442\"></p>\n<p style=\"text-align: center;\">“推特过载了”</p>\n<p>但是在所有的兴奋之中——兴奋的感觉被缺觉加强了，我们开始收到一个奇怪问题的报告。<strong>即，即使有些人没有在玩吃豆人，也能听到它的声音。</strong></p>\n<p>我们最初忽略了这些投诉——“告诉他们关掉 Google 主页就好了”——但是这么做并没有用。在四处研究、绞尽脑汁之后，我们发现罪魁祸首比我们想象得复杂，而且更迷人。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fl9k4ind5hj21jk10zgzb.jpg\" width=\"690\" height=\"459\"></p>\n<p>2010 年是火狐最好的一年。使用火狐浏览器的一部分人安装了一个叫 CoolPreviews 的扩展，这样将鼠标悬停在链接上就可以快速预览网页。</p>\n<p>在火狐浏览器打开的同时，该扩展就会启动。并且在用户不知情的情况下，它会立即在后台打开一个隐形网页，也就是 Google 主页。</p>\n<p>你很可能已经把事情发生的经过串起来了。在那个周五，google.com 自动打开有声音的吃豆人涂鸦游戏。如果你使用了装有 CoolPreviews 的火狐浏览器，该插件就会在你启动浏览器的时候，消无声息地在后台打开 Google 主页，10 秒钟之后……会莫名其妙地出现游戏声音。</p>\n<p>想象一下，你在周五早上坐下来，打开电脑。对你来说，这个周五本没有什么异常的地方。你打开游览器；但可能并不了解 CoolPreviews，甚至是插件或者扩展的概念；不需要使用 Google，或者根本不知道 Google；可能也不知道用了什么浏览器——或者什么是浏览器。事实上，你甚至可能都没在用浏览器；有可能它最小化了，默默地缩在屏幕下方的工具栏里。可能你正在查看邮箱，或者为今天的第一轮纸牌游戏热身。</p>\n<p>你干什么都无所谓。十秒钟之后，你会从电脑的扬声器中——知道怎么调整音量吗？知道电脑有扬声器吗？——听到声音。</p>\n<p>这是一个隐形吃豆人游戏的警报声，它以最不寻常的方式渗透到你的电脑里了。</p>\n<p>重复。</p>\n<p>可能你经历过被朋友或者家庭成员用电脑问题纠缠的情况。他们不如你懂技术，再简单不过的方法都能解决这些问题。你可能会轻蔑地问“你确定连上鼠标了吗？”、“老天，试试关掉大写锁定。”</p>\n<p>现在来想象一下：如果他们其中之一在那个周五告诉你，他们的电脑莫名其妙发出警报一样的声音，你会怎么说？</p>\n<p>你会告诉他们，他们疯了。他们可能也想过自己一定是疯了。这全都怪我的代码。</p>\n<p>我不太记得我们到底是怎么弄明白的。但是一个小时内，我们编写了代码并立即发布了一个双重修复：</p>\n<p>我们添加了一个可见的声音开关，允许随意开启或者关闭游戏的声音：</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fl9k4jwdspj20gt060dfr.jpg\"></p>\n<p style=\"text-align: center;\"><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fl9k4le4hkj20gt060glj.jpg\"></p>\n<p style=\"text-align: center;\">前后对比。注意左下角的声音按钮。</p>\n<ul>\n<li>我们没有删除自动开始的设定，而是修改了代码；这样在访问者与游戏有某种互动之前是不会有声音的</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02dfb9338f5066664883\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/**\r\n * Process a new Pac-Man direction requested by player \r\n * using arrow keys or touch.\r\n * @param {number} newDir New direction.\r\n */\r\nPacManActor.prototype.processRequestedDirection = function(newDir) {\r\n  // Enable sound as long as the user hasn’t previously \r\n  // disabled it by clicking the sound icon.\r\n  if (!pacMan.userDisabledSound &amp;&amp; !google.pacManSound) {\r\n    google.pacManSound = true;\r\n    pacMan.updateSoundIcon();\r\n  }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02dfb9338f5066664883-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb9338f5066664883-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb9338f5066664883-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb9338f5066664883-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb9338f5066664883-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb9338f5066664883-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb9338f5066664883-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb9338f5066664883-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb9338f5066664883-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb9338f5066664883-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb9338f5066664883-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb9338f5066664883-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02dfb9338f5066664883-1\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb9338f5066664883-2\"><span class=\"crayon-c\"> * Process a new Pac-Man direction requested by player </span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb9338f5066664883-3\"><span class=\"crayon-c\"> * using arrow keys or touch.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb9338f5066664883-4\"><span class=\"crayon-c\"> * @param {number} newDir New direction.</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb9338f5066664883-5\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb9338f5066664883-6\"><span class=\"crayon-v\">PacManActor</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">processRequestedDirection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">newDir</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb9338f5066664883-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// Enable sound as long as the user hasn’t previously </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb9338f5066664883-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// disabled it by clicking the sound icon.</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb9338f5066664883-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">pacMan</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">userDisabledSound</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pacManSound</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb9338f5066664883-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pacManSound</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb9338f5066664883-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pacMan</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">updateSoundIcon</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb9338f5066664883-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p><img class=\"alignnone aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl9k4ko5ucj21jk10z7mm.jpg\" width=\"690\" height=\"459\"></p>\n<p>无论什么时候遇到 bug，试着回答以下四个简单的问题是很自然的：</p>\n<ul>\n<li><strong>发生了什么？</strong></li>\n<li><strong>怎么修复它？</strong></li>\n<li><strong>怎样避免它再次发生？</strong></li>\n<li><strong>责任人是谁？</strong></li>\n</ul>\n<p>这一次，前三个问题很容易：我们弄清楚、打好补丁、把这次的快速修复作为未来每一个涂鸦的最佳做法。</p>\n<p>就最后一个问题来说…“责任人是谁？”很少是个好问题，但是一起来考虑一下：</p>\n<p>这是我们的错。我们本应该预见到这个问题的，对吧？但是看看所有这些巧合的联系：一个特定的浏览器，一个特定的异常插件，音量开启，要等 10 秒问题才会发生。要想预见到这个问题需要多少想象力？</p>\n<p>显然，CoolPreviews 有一些拙劣的编程做法！我其实不确定他们为什么要通过在后台打开 Google 主页来启动——可能仅仅是随机的默认项？或者是一种检测网络连接的方法？但是再次声明， Google 主页能承受很大的流量；并且关键地是，它之前从来不会发出任何声音。所以假设在后台打开 Google 主页没有任何风险并不离谱。</p>\n<p>一开始安装 CoolPreviews 是用户的错。如果一个问题是由于插件导致的，那卸载这个插件是用户的责任。但是，你觉得一个人能意识到，导致电脑发出声音的罪魁祸首是一个随机的预览扩展吗？</p>\n<p>浏览器开发商不该允许插件做类似疯狂的事情。最近一段时间，浏览器很可能都能做到这一点。但是当时，网络要更开放一点……毕竟，这个 bug 并不会威胁到你的隐私或者数据安全。</p>\n<p>针对“责任人是谁？”这个问题，我能想到的最好答案是：网络的复杂性。网络已经出现了一段时间，涉及了很多利益相关者。网络的开放性和宽容性，以及它的某些特点就这样……自然而然地产生了。</p>\n<p>想要因为网络的复杂性而惩罚它，就像 Xerxes 因为大海吞没了他差劲的桥就鞭打大海一样。远离网络转向本国客户可能就是用一组问题来交换另一组问题。想要降低网络的复杂性……事实上，很多聪明人把它作为工作或者闲暇时的消遣。</p>\n<p>无论怎样，都需要修复 bug。</p>\n<p>修复 bug 的一种方式是建立复杂的机制，来提前识别问题并避免它们发生。当然，有时候你别无选择，这是唯一的方法。任何与用户数据、隐私、安全或者金融信息相关的事物都是禁区——需要谨慎地检查并控制它们，没有商量的余地。</p>\n<p>但是还有我们正在讨论的这类情况。我已经在 Medium 上写过其他奇怪的 bug，比如<a href=\"https://medium.com/medium-eng/the-curious-case-of-disappearing-polish-s-fa398313d4df#.l7q7gykwu\">消失的 Polish S</a>，以及 <a href=\"https://medium.com/@mwichary/system-shock-6b1dc6d6596f\">25 岁的系统字体从它的像素化坟墓中复活</a>……现在是在小部分电脑上出现吃豆人的奇怪噪音。你无法完全预见那些远不是在你的服务器上发生的 bug，那些后果不是很严重的 bug。你可以试着阻止这些 bug 发生，但是假设这些 bug 会发生，并把精力用在建设基础设施来进行 bug 的捕捉和尽快修复上会更容易。</p>\n<p>我认为，修复吃豆人 bug 的真正成就是两个紧凑循环：第一，支持团队和产品部门的交流……第二，有预见能力的“热点推送”基础设施能让我们的修复在几分钟内迅速实施，这对 Google 这种规模的公司来说是非常惊人的。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fl9k4jemh2j21jk10zndl.jpg\" width=\"690\" height=\"459\"></p>\n<p>2010 年的这个周五对我来说是非同寻常的，但是我也知道我的工作让这一天对许多其他人变得非同寻常。有些人想起了他们在 80 年代早期玩吃豆人的时光。有些人对 HTML 的可能性感到兴奋。有些人只是玩得很开心然后继续生活。</p>\n<p>我对那一天最喜欢的反应之一是——我们将我小时候喜爱的那种游戏厅精神带到了 2010 年的 48 小时当中。</p>\n<p>“我在这个咖啡店里同时听到了三个吃豆人的声音。我有点爱你， Google 。”</p>\n<p>我希望你不是遇到这个 bug 的人之一。如果你遇到了，而且我的代码把你吓坏了，抱歉。但是只要我还在写代码，总会有 bug 需要解决，无论是我的还是<a href=\"https://medium.com/designing-medium/quotation-marks-c8993b54417c\">别人的</a>。识别 bug、将它们按重要性排序，以及在发布之前（需要时间）或者发布之后（对人们产生影响）排除这些 bug ，在这三者之中找到一个平衡点将仍然是我<a href=\"https://medium.com/@mwichary/day-one-f7639c382167\">面临的更大挑战之一</a>。</p>\n<p>2010 年另外一个有趣的部分是，我还得重新介绍吃豆人原作代码的一个 bug……不过那是另一篇完全不同的文章了。</p>\n<p>同时，我也想听听你的 bug 故事。在你需要负一部分责任的 bug 中，最奇怪、最意外、最酷的是哪个？把这类事情当做最好要修复和忘掉错误或者失败很难。但是他们也告诉了我们一些事实，关于我们所创造的这个世界的事实，以及加强了其基础的、奇妙的、疯狂的复杂性。</p>\n<p>感谢 Ryan Germick 和 Kris Hom 在这个涂鸦项目上的合作。想了解 Google 吃豆人的更多秘密？<a href=\"https://medium.com/r/?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DttavBa4giPc%26hd%3D1\">请观看 Google I/O 2011 的一个访谈</a>。创造一个不可能预测的情景需要多少情形交织在一起？如果你想要阅读一篇相关的好故事，看看 Stanisław Lem 杰出的小说<a href=\"https://medium.com/r/?url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FThe_Chain_of_Chance\">《机会链》（The Chain of Chance）</a>。</p>\n<p>这篇文章里的照片拍摄于发布前的那个通宵。感谢 <a href=\"https://medium.com/@dpup\">Dan Pupius</a> 和<a href=\"https://medium.com/@majelbstoat\"> Jamie Talbot </a>对这篇文章提供的帮助。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112831\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112831votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112831\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fl9k4jemh2j21jk10zndl.jpg"], "create_date": "2017/11/07", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,Bug", "url": "http://blog.jobbole.com/112831/", "url_id": "1259b4b6f3809a3874b9d4e08fad9ec7"}
{"title": "Quora 是如何做持续部署的？工程师如是说", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://engineering.quora.com/Continuous-Deployment-at-Quora\">Martin Michelsen</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：Quora 是国外知名的问答网站，曾经在 12 小时内发布了 46 次新版本。不过这对于 Quora 工程师来说，只是普通的一天。他们执行非常快的持续部署周期，代码变动提交后就直接推送到线上。 他们是如何做到的呢？请看 Quora 工程师 Martin Michelsen 的文章。</p>\n<hr>\n<p><img src=\"https://qph.ec.quoracdn.net/main-qimg-a8cf38d0593825625742f67b9111af72.webp\" alt=\"\"></p>\n<p>在 2013 年 4 月 25 日中午 12 点到晚上 11 点 59 分之间，Quora 站点发布了 46 次新版本。这对于我们来说只是普通的一天。我们执行非常快的持续部署周期，代码变动提交后就直接推送到线上。这使得我们可以在各个层面上实现平行化开发。我们希望推送系统足够快，让开发者尽快看到他们对生产环境的改动（目前生产环境修订版上线平均要 6、7 分钟），同时也要注意可靠性和灵活性，让我们可以迅速响应问题。</p>\n<p>对开发者而言，只需要一个简单的命令把代码推送到到生产环境：<code>git push</code></p>\n<p>这背后发生的事情要复杂很多。每当一个开发者把提交推送到我们的主 git 仓库，一个 post-receive 钩子会将最新的修订版加入到发版申请列表，并记录到 MySQL 数据库。（post-receive 钩子也会把提交加到 <a href=\"https://www.quora.com/topic/Phabricator\">Phabricator</a>，我们用它做代码评审。更多关于我们代码评审的相关信息参阅这个回答 <a href=\"https://www.quora.com/Does-Quora-engineering-use-a-code-review-process\">Does Quora engineering use a code review process?</a>）一个内部监控网站展示每个等待发布的修订版的状态。</p>\n<p>一个后端服务监控发版申请列表，每当提交新的修订版，服务收集此版本代码库中所有单元测试的名字。我们有上百个测试模块和上千个独立的测试，服务会将测试分配到一些 worker 机器中并行处理。当 worker 运行完测试，它们将结果返回给测试服务，服务在发版申请的列表中标记修订版的综合结果（成功或失败，以及多少个测试失败了和失败的详情）。</p>\n<p>同时，另一个服务监控发版申请列表，等待打包新修订版。每当提交新的修订版，它将所有需要运行在我们服务器上的代码进行归档，并打包上传到 Amazon S3。</p>\n<p>当修订版打包好后，一个集成测试服务将修订版推送到一台单独的机器（并不是生产环境），用新的包开启 web 服务，并向服务发送请求。只有每个请求返回 200 状态码，集成测试才算通过，如果任何请求返回 4xx 或 5xx 错误码，测试失败。</p>\n<p>最后，第四个监控发版申请列表的服务由其他三个服务调用，当修订版的测试和打包没有问题，服务向 S3 上传一个包含版本号的小型元数据文件，来标记修订版的部署（发布）。Web 服务器和其他使用相同代码的机器会周期性检查元数据文件中的版本号，如果有变化，它们会立刻从 S3 上下载最新的包。下载并解压包大概需要一分钟，然后运行新的代码只需要几秒。每台需要代码的机器会独立完成上述操作。我们将这个系统命名为 <a href=\"https://www.quora.com/What-is-StarCraft-1998-game-culture-like-at-Quora\">Zerg</a>，因为在所有需要包的机器上进行部署过程很像虫族（zerg）的 rush 战术。</p>\n<p>下图描述了后端架构：</p>\n<p><img src=\"https://qph.ec.quoracdn.net/main-qimg-23dc53ea77e8719676d9fac84766dfe3.webp\" alt=\"\"></p>\n<p>这套系统弹性很大，很少出现失败，但正如其他复杂的系统一样，也会出现失败情况。要么测试 worker 宕机，要么测试服务失败，要么打包程序出现问题。通过这种架构，内部的失败并不会引起一致性问题（比如把未通过单元测试的代码推送到生产环境），并且大多数时候只需要重启失败的机器或服务便可以让其正常工作。</p>\n<p>对于大多数修订版，<code>git push</code> 到发布大约间隔 6 分钟，这取决于其中执行时间最长的任务。目前，单元测试是时间最长的任务；打包需要 2-3 分钟，集成测试需要 3 分钟多一点。之后 10 分钟（发布之后），机器下载运行新代码，同时后面的修订版开始测试和打包。（我们不会同一时间更新所有机器，这会导致每次我们发布时，Quora 会有几分钟处于不可用状态！）选择 10 分钟的间隔是为了可靠性 —— 如果我们需要响应突发事件，可以立刻覆盖部署代码。</p>\n<p>我认为 6 分钟的测试 + 10 分钟的部署还不够好。我们可以改进测试系统，使其并行测试来提高效率。另外，我们去除掉其他服务中无用的东西，这让我们可以将部署时间由 10 分钟缩短为 5 分钟。</p>\n<p>系统的设计主要基于其他公司部署项目时遇到的问题。我们在公司早期就决定采用持续部署方案。在公司规模、代码库、基础架构很小时便于使用这种方案，但我们仍努力多年来维护这一流程，因为持续部署在整个开发流程和开发文化中举足轻重：</p>\n<ul>\n<li>持续部署让我们尽可能迅速地将产品的变更展现在用户面前，包括从 bug 的修复到主要特性等一系列东西。</li>\n<li>持续部署让我们尽可能迅速隔离并解决出现的问题。当出现 bug，你倾向于在单个提交中 debug，还是从包含一百个提交的整体发版中 debug？</li>\n<li>持续部署让我们在改进网站时不需要投入过多精力。我们直到经历了这些之后才意识到这点 —— 持续部署让我们在几分钟之内完成发现问题、快速修复、推送代码并部署到生产环境。如果这些动作时间过长，开发者可能会想“我难道要花一个小时来坐下跟踪代码的推送吗？”。更糟糕的是，如果隔天部署，开发者会想“我难道要明天再审查一遍然后测试代码吗”</li>\n<li>持续部署减少了跟踪不同发布状态的多个版本这一工作上的投入。代码是在生产环境还是在发版列表的未推送状态，都一目了然。</li>\n<li>持续部署让我们有测试的习惯。毫无疑问，测试非常重要。伴随着变更需要立刻上线的压力，我们没有之后再写测试的余地。我们总是先写好测试。</li>\n<li>持续部署很有趣！写代码很有趣，我们的部署过程也应该同样有趣。</li>\n</ul>\n<p>通过减少每次版本上线需要的时间，并加强测试，我们每天可以上线更多的修订版，并有效减小变更伴随的阻碍。这也是 Quora 这类快速起步的公司需要的东西。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/5085cce1bd4e144b7d148079a34b20c1.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/02b09a29fdb3ab5fe03d4bd1afe95664.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112777\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112777votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112777\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/06/47765e50cfb7c4e598e72d893ab4f62f.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            毕业于郑州大学软件工程专业，身为 Java 程序猿却同样热爱着 JavaScript 。为了兴趣而写代码，做自己喜欢做的事。Keep coding ... Stay Cool ...        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/snowhere\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/snowhere/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 29</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://snowhere.me/\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/Snowhere/\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/08/73516834d333d2a79d72cfc38b225dd4.png"], "create_date": "2017/10/30", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,Quora,持续部署", "url": "http://blog.jobbole.com/112777/", "url_id": "d51c8db986f7542589dca1c87e7a28f5"}
{"title": "10 个鲜为人知的 Linux 命令（3）", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.tecmint.com/10-lesser-known-commands-for-linux-part-3/\">Tecmint</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2284-1.html\">Linux中国/geekpi</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/d7fb96578b08907ab3423932e34b9cc3.png\" alt=\"\"></p>\n<p>我们继续“10个鲜为人知Linux命令系列”的第三部分。或许你已经知道了这些命令，那你无疑是一个有经验而喜欢探索的Linux用户。</p>\n<h3>22. ^foo^bar 命令</h3>\n<p>在一个实例中运行修改后的最后一个命令。假设我需要运行一个命令‘<strong>ls -l</strong>‘来详细列出‘<strong>Desktop</strong>’目录下的内容。意外地，你打了‘<strong>lls -l</strong>‘。所以你需要重新打整个命令或者使用导航键编辑前面的命令。当你的命令很长时这个很痛苦。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02728357385309905954\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ lls -l \r\nbash: lls: command not found\r\n\r\navi@localhost:~/Desktop$ ^lls^ls \r\n\r\nls -l \r\ntotal 7489440 \r\n\r\ndrwxr-xr-x 2 avi  avi       36864 Nov 13  2012 101MSDCF \r\n-rw-r--r-- 1 avi  avi      206833 Nov  5 15:27 1.jpg \r\n-rw-r--r-- 1 avi  avi      158951 Nov  5 15:27 2.jpg \r\n-rw-r--r-- 1 avi  avi       90624 Nov  5 12:59 Untitled 1.doc</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02728357385309905954-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357385309905954-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357385309905954-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357385309905954-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357385309905954-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357385309905954-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357385309905954-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357385309905954-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357385309905954-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357385309905954-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357385309905954-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357385309905954-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02728357385309905954-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357385309905954-2\"><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lls</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">command </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">found</span></div><div class=\"crayon-line\" id=\"crayon-5a02728357385309905954-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357385309905954-4\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">^</span><span class=\"crayon-v\">lls</span><span class=\"crayon-o\">^</span><span class=\"crayon-e\">ls </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357385309905954-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357385309905954-6\"><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357385309905954-7\"><span class=\"crayon-i\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7489440</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357385309905954-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a02728357385309905954-9\"><span class=\"crayon-v\">drwxr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xr</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">36864</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2012</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">101MSDCF</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357385309905954-10\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">206833</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">27</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.jpg</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357385309905954-11\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">158951</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">27</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.jpg</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357385309905954-12\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">90624</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Untitled</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.doc</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p><strong>注意</strong>:在上面的替换中我们使用“<strong><sup>typo(被替换的)<sup>original_command(原始命令)</sup></sup></strong>”。警告！这个命令可能会非常危险！如果你有意或者无意地打错了系统命令或者任何像<strong>rm -rf</strong>那样的风险命令的话！</p>\n<h3>23. &gt; file.txt 命令</h3>\n<p>这个命令会刷新文件的内容而不需删除然后创建相同的文件。当我们需要反复输出，或者在相同的文件上记录日志时，这个命令就非常有用。</p>\n<p>我有一个有很多文字的‘<strong>test.txt</strong>’文件在我的‘<strong>Desktop</strong>‘上。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02728357390313424263\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ cat test.txt \r\n\r\nLinux \r\nGNU \r\nDebian \r\nFedora \r\nkali \r\nubuntu \r\ngit \r\nLinus \r\nTorvalds\r\n\r\n\r\navi@localhost:~/Desktop$ &gt; test.txt \r\navi@localhost:~/Desktop$ cat test.txt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357390313424263-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357390313424263-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357390313424263-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357390313424263-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357390313424263-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357390313424263-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02728357390313424263-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a02728357390313424263-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357390313424263-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-3\"><span class=\"crayon-e\">Linux </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357390313424263-4\"><span class=\"crayon-e\">GNU </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-5\"><span class=\"crayon-e\">Debian </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357390313424263-6\"><span class=\"crayon-e\">Fedora </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-7\"><span class=\"crayon-e\">kali </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357390313424263-8\"><span class=\"crayon-e\">ubuntu </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-9\"><span class=\"crayon-e\">git </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357390313424263-10\"><span class=\"crayon-e\">Linus </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-11\"><span class=\"crayon-e\">Torvalds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357390313424263-12\"> </div><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02728357390313424263-14\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span></div><div class=\"crayon-line\" id=\"crayon-5a02728357390313424263-15\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><strong>注意</strong>:再说一次，这个命令可能很危险！永远不要尝试刷新系统文件或者某篇日志文件的内容。如果你这么做了，你可能会遭遇严重的问题！</p>\n<h3>24. at 命令</h3>\n<p>‘<strong>at</strong>‘命令与<a href=\"http://www.tecmint.com/11-cron-scheduling-task-examples-in-linux/\" target=\"_blank\" rel=\"external nofollow\">cron 命令</a>相似也可用于安排一个任务或者在某个特定时刻执行命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02728357397154942114\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ echo \"ls -l &gt; /dev/pts/0\" | at 14:012</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02728357397154942114-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02728357397154942114-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ls -l &gt; /dev/pts/0\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">012</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>或</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a0272835739b825410745\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ echo \"ls -l &gt; /dev/pts/0\" | at 2:12 PM</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a0272835739b825410745-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a0272835739b825410745-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ls -l &gt; /dev/pts/0\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PM</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><strong>示例输出</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a0272835739e817749453\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-rw-r--r-- 1 avi  avi      220492 Nov  1 13:49 Screenshot-1.png \r\n-rw-r--r-- 1 root root        358 Oct 17 10:11 sources.list \r\n-rw-r--r-- 1 avi  avi  4695982080 Oct 10 20:29 squeeze.iso \r\n..\r\n..\r\n-rw-r--r-- 1 avi  avi       90624 Nov  5 12:59 Untitled 1.doc \r\n-rw-r--r-- 1 avi  avi       96206 Nov  5 12:56 Untitled 1.odt \r\n-rw-r--r-- 1 avi  avi        9405 Nov 12 23:22 Untitled.png</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a0272835739e817749453-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a0272835739e817749453-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a0272835739e817749453-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a0272835739e817749453-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a0272835739e817749453-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a0272835739e817749453-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a0272835739e817749453-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a0272835739e817749453-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a0272835739e817749453-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">220492</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Screenshot</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.png</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a0272835739e817749453-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">358</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sources</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">list</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a0272835739e817749453-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4695982080</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squeeze</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">iso</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a0272835739e817749453-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a0272835739e817749453-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a0272835739e817749453-6\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">90624</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Untitled</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.doc</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a0272835739e817749453-7\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">96206</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Untitled</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.odt</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a0272835739e817749453-8\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avi  </span><span class=\"crayon-i\">avi</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">9405</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Untitled</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">png</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p><strong>注意</strong>:echo “<strong>ls -l</strong>”的意思是，将这串命令(这里是 <strong>ls -l</strong>)输出在标准终端上。你可以用你需要或者选择的命令替代‘<strong>ls -l</strong>‘。</p>\n<p>&gt; ：重定向输出</p>\n<p><strong>/dev/pts/0</strong>: 这是输出设备和/或文件，输出到指定的地方，这里输出在终端（/dev/pts/0）。</p>\n<p>就我而言，此时我的<strong>tty</strong>在<strong>/dev/pts/0</strong>。你可以用<strong>tty</strong>命令检查你的<strong>tty</strong>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573a2315001690\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ tty \r\n\r\n/dev/pts/0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573a2315001690-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a2315001690-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a2315001690-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573a2315001690-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tty</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a2315001690-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a027283573a2315001690-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><strong>注意</strong>: ‘<strong>at</strong>‘会在系统时间匹配到特定时间时会尽快执行。</p>\n<h3>25. du -h –max-depth=1 命令</h3>\n<p>下面的命令以人类可读的形式输出当前目录的子目录的大小。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573a5594228409\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:/home/avi/Desktop# du -h --max-depth=1 \r\n\r\n38M     ./test \r\n1.1G    ./shivji \r\n42M     ./drupal \r\n6.9G    ./101MSDCF \r\n16G .</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573a5594228409-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a5594228409-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a5594228409-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a5594228409-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a5594228409-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a5594228409-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a5594228409-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573a5594228409-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">avi</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-p\"># du -h --max-depth=1 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a5594228409-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a027283573a5594228409-3\"><span class=\"crayon-cn\">38M</span><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a5594228409-4\"><span class=\"crayon-cn\">1.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">shivji</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573a5594228409-5\"><span class=\"crayon-cn\">42M</span><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">drupal</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a5594228409-6\"><span class=\"crayon-cn\">6.9G</span><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">101MSDCF</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573a5594228409-7\"><span class=\"crayon-cn\">16G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><strong>注意</strong>:上面的命令在<a href=\"http://www.tecmint.com/check-linux-disk-usage-of-files-and-directories/\" target=\"_blank\" rel=\"external nofollow\">检查系统使用率</a>是非常有用。</p>\n<h3>26. expr 命令</h3>\n<p>‘<strong>expr</strong>‘不是那么鲜为人知的命令。这个命令在终端中计算简单的算数时非常有用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573a9265170277\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:/home/avi/Desktop# expr 2 + 3 \r\n5\r\n\r\navi@localhost:/home/avi/Desktop# expr 6 – 3 \r\n3\r\n\r\navi@localhost:/home/avi/Desktop# expr 12 / 3 \r\n4\r\n\r\navi@localhost:/home/avi/Desktop# expr 2 \\* 9 \r\n18</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573a9265170277-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a9265170277-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a9265170277-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a9265170277-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a9265170277-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a9265170277-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a9265170277-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a9265170277-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a9265170277-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573a9265170277-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573a9265170277-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573a9265170277-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">avi</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-p\"># expr 2 + 3 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a9265170277-2\"><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5a027283573a9265170277-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a9265170277-4\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">avi</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-p\"># expr 6 – 3 </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573a9265170277-5\"><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a9265170277-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a027283573a9265170277-7\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">avi</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-p\"># expr 12 / 3 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a9265170277-8\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-5a027283573a9265170277-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573a9265170277-10\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">avi</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-p\"># expr 2 \\* 9 </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573a9265170277-11\"><span class=\"crayon-cn\">18</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h3>27. look 命令</h3>\n<p>在终端上从英文字典上查单词以防混淆。比如说，我记不清了是该拼成carrier还是carieer。</p>\n<p>avi@localhost:/home/avi/Documents# look car</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573ae338972767\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCara \r\nCara's \r\n…\r\n... \r\ncarps \r\ncarpus \r\ncarpus's \r\ncarrel \r\ncarrel's \r\ncarrels \r\ncarriage \r\ncarriage's \r\ncarriages \r\ncarriageway \r\ncarriageway's \r\ncarried \r\ncarrier \r\ncarrier's \r\ncarriers \r\ncarries \r\n…\r\n... \r\ncaryatids</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573ae338972767-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573ae338972767-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-1\"><span class=\"crayon-e\">Cara </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-2\"><span class=\"crayon-i\">Cara</span><span class=\"crayon-s\">'s </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-3\"><span class=\"crayon-s\">…</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-4\"><span class=\"crayon-s\">... </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-5\"><span class=\"crayon-s\">carps </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-6\"><span class=\"crayon-s\">carpus </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-7\"><span class=\"crayon-s\">carpus'</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-8\"><span class=\"crayon-e\">carrel </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-9\"><span class=\"crayon-i\">carrel</span><span class=\"crayon-s\">'s </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-10\"><span class=\"crayon-s\">carrels </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-11\"><span class=\"crayon-s\">carriage </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-12\"><span class=\"crayon-s\">carriage'</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-13\"><span class=\"crayon-e\">carriages </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-14\"><span class=\"crayon-e\">carriageway </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-15\"><span class=\"crayon-i\">carriageway</span><span class=\"crayon-s\">'s </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-16\"><span class=\"crayon-s\">carried </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-17\"><span class=\"crayon-s\">carrier </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-18\"><span class=\"crayon-s\">carrier'</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-19\"><span class=\"crayon-e\">carriers </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-20\"><span class=\"crayon-i\">carries</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-21\">…</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573ae338972767-22\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573ae338972767-23\"><span class=\"crayon-v\">caryatids</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>上面的命令会显示字典上所有以’car’开头的单词。我得到了我想找的。</p>\n<h3>28. yes 命令</h3>\n<p>另外一个命令在通常基础上并不会经常使用，但是在脚本语言和系统管理时非常有用。</p>\n<p>这个命令会持续地输出给定的字符串，直到由你的中断命令打断。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573b2518452490\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ yes \"Tecmint is one of the best site dedicated to Linux, how to\" \r\n\r\nTecmint is one of the best site dedicated to Linux, how to \r\nTecmint is one of the best site dedicated to Linux, how to \r\nTecmint is one of the best site dedicated to Linux, how to \r\nTecmint is one of the best site dedicated to Linux, how to \r\n…\r\n…\r\n...\r\nTecmint is one of the best site dedicated to Linux, how to \r\nTecmint is one of the best site dedicated to Linux, how to \r\nTecmint is one of the best site dedicated to Linux, how to</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573b2518452490-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b2518452490-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b2518452490-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b2518452490-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b2518452490-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b2518452490-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b2518452490-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b2518452490-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b2518452490-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b2518452490-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b2518452490-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b2518452490-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573b2518452490-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">yes</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Tecmint is one of the best site dedicated to Linux, how to\"</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b2518452490-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a027283573b2518452490-3\"><span class=\"crayon-e\">Tecmint </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">one </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">site </span><span class=\"crayon-e\">dedicated </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b2518452490-4\"><span class=\"crayon-e\">Tecmint </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">one </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">site </span><span class=\"crayon-e\">dedicated </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573b2518452490-5\"><span class=\"crayon-e\">Tecmint </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">one </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">site </span><span class=\"crayon-e\">dedicated </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b2518452490-6\"><span class=\"crayon-e\">Tecmint </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">one </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">site </span><span class=\"crayon-e\">dedicated </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573b2518452490-7\">…</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b2518452490-8\">…</div><div class=\"crayon-line\" id=\"crayon-5a027283573b2518452490-9\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b2518452490-10\"><span class=\"crayon-e\">Tecmint </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">one </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">site </span><span class=\"crayon-e\">dedicated </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573b2518452490-11\"><span class=\"crayon-e\">Tecmint </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">one </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">site </span><span class=\"crayon-e\">dedicated </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b2518452490-12\"><span class=\"crayon-e\">Tecmint </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">one </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">best </span><span class=\"crayon-e\">site </span><span class=\"crayon-e\">dedicated </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">how </span><span class=\"crayon-st\">to</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p></p>\n<h3>29. factor 命令</h3>\n<p>factor实际是一个源于数学的命令。这个命令会输出所有给定数字的因数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573b6734319318\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ factor 22 \r\n22: 2 11\r\n\r\navi@localhost:~/Desktop$ factor 21 \r\n21: 3 7\r\n\r\navi@localhost:~/Desktop$ factor 11 \r\n11: 11</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573b6734319318-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b6734319318-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b6734319318-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b6734319318-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b6734319318-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b6734319318-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b6734319318-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b6734319318-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573b6734319318-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">factor</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b6734319318-2\"><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line\" id=\"crayon-5a027283573b6734319318-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b6734319318-4\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">factor</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573b6734319318-5\"><span class=\"crayon-cn\">21</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b6734319318-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a027283573b6734319318-7\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">factor</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b6734319318-8\"><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3>30. ping -i 60 -a IP_address</h3>\n<p>我们都用ping命令检测服务器是否连通。我通常ping google，来检测我是否连接到了因特网。</p>\n<p>当你等待或者持续盯着你的终端等待命令的回应或者等待服务器的连接时，有时是很气人的。</p>\n<p>一旦服务器连通就有一个声音如何（译注：下面命令是等60秒PING一次）？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573b9697428678\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Desktop$ ping -i 60 -a www.google.com \r\n\r\nPING www.google.com (74.125.200.103) 56(84) bytes of data. \r\n64 bytes from www.google.com (74.125.200.103): icmp_req=1 ttl=44 time=105 ms \r\n64 bytes from 74.125.200.103: icmp_req=2 ttl=44 time=281 ms</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573b9697428678-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b9697428678-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b9697428678-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a027283573b9697428678-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a027283573b9697428678-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573b9697428678-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ping</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b9697428678-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a027283573b9697428678-3\"><span class=\"crayon-e\">PING </span><span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">74.125.200.103</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">84</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytes </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a027283573b9697428678-4\"><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytes </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">74.125.200.103</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">icmp_req</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ttl</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">105</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ms</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a027283573b9697428678-5\"><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytes </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">74.125.200.103</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">icmp_req</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ttl</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">281</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ms</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>注意，当你发现命令不会返回声音时。请确保你的系统不是静音的，声音已经在‘<strong>sound preferences(声音选项)</strong>‘ 中启用并确保勾选了‘<strong>Enable window and window sound</strong>‘。</p>\n<h3>31. tac 命令</h3>\n<p>这个命令很有趣，他会以倒序输出文本文件的内容。也就是从最后一行到第一行。</p>\n<p>在home目录下，我的Documents目录下有一个35.txt文件。用<a href=\"http://www.tecmint.com/13-basic-cat-command-examples-in-linux/\" target=\"_blank\" rel=\"external nofollow\">cat 命令</a>检查内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573bd549505031\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Documents$ cat 35.txt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573bd549505031-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573bd549505031-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Documents</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">35.txt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><strong>示例输出</strong></p>\n<blockquote>\n<ol>\n<li>Linux is built with certain powerful tools, which are unavailable in windows.</li>\n<li>One of such important tool is Shell Scripting. Windows however comes with such a tool but as usual it is much weak as compared to it’s Linux Counterpart.</li>\n<li>Shell scripting/programming makes it possible to execute command(s), piped to get desired output in order to automate day-to-day usages.</li>\n</ol>\n</blockquote>\n<p>现在用tac命令反转文件内容（译注：当然，我们知道cat反转过来就是tac）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a027283573c0570402469\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\navi@localhost:~/Documents$ tac 35.txt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a027283573c0570402469-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a027283573c0570402469-1\"><span class=\"crayon-v\">avi</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Documents</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tac</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">35.txt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><strong>示例输出</strong></p>\n<blockquote>\n<ol>\n<li>Shell scripting/programming makes it possible to execute command(s), piped to get desired output in order to automate day-to-day usages.</li>\n<li>One of such important tool is Shell Scripting. Windows however comes with such a tool but as usual it is much weak as compared to it’s Linux Counterpart.</li>\n<li>Linux is built with certain powerful tools, which are unavailable in windows.</li>\n</ol>\n</blockquote>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112836\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112836votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112836\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/d7fb96578b08907ab3423932e34b9cc3.png"], "create_date": "2017/11/08", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,Linux", "url": "http://blog.jobbole.com/112836/", "url_id": "4eddc042e594aff52039afba849ca5d4"}
{"title": "图解机器学习", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/taogang/blog/1544709\">naughty</a>   </div><p>警告：多图杀猫！</p>\n<p>每当提到机器学习，大家总是被其中的各种各样的算法和方法搞晕，觉得无从下手。确实，机器学习的各种套路确实不少，但是如果掌握了正确的路径和方法，其实还是有迹可循的，这里我推荐SAS的Li Hui的这篇<a href=\"http://blogs.sas.com/content/subconsciousmusings/2017/04/12/machine-learning-algorithm-use/\" rel=\"nofollow\">博客</a>，讲述了如何选择机器学习的各种方法。</p>\n<p>另外，<a href=\"http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html\" rel=\"nofollow\">Scikit-learn</a> 也提供了一幅清晰的路线图给大家选择：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611ly1fl012sbprvj21kw0zgn9e.jpg\" width=\"2048\" height=\"1276\"></p>\n<p>其实机器学习的基本算法都很简单，下面我们就利用二维数据和交互图形来看看机器学习中的一些基本算法以及它们的原理。（另外向<a href=\"http://worrydream.com/\" rel=\"nofollow\">Bret Victor</a>致敬，他的 <a href=\"http://v.youku.com/v_show/id_XMzUyOTIyNzg0.html?from=s1.8-1-1.2&amp;spm=a2h0k.8191407.0.0\" rel=\"nofollow\">Inventing on principle</a> 深深的影响了我）</p>\n<p>所有的代码即演示可以在<a href=\"https://codepen.io/gangtao/\" rel=\"nofollow\">我的Codepen</a>的这个<a href=\"https://codepen.io/collection/DPWwaj/\" rel=\"nofollow\">Collection</a>中找到。</p>\n<p>首先，机器学习最大的分支的<a href=\"https://www.zhihu.com/question/24448657\" rel=\"nofollow\">监督学习和无监督学习</a>，简单说数据已经打好标签的是监督学习，而数据没有标签的是无监督学习。从大的分类上看，<strong>降维</strong>和<strong>聚类</strong>被划在无监督学习，<strong>回归</strong>和<strong>分类</strong>属于监督学习。</p>\n<p> </p>\n<h2>无监督学习</h2>\n<p>如果你的数据都没有标签，你可以选择花钱请人来标注你的数据，或者使用无监督学习的方法。</p>\n<p>首先你可以考虑是否要对数据进行降维。</p>\n<p> </p>\n<h3>降维</h3>\n<p>降维顾名思义就是把高维度的数据变成为低维度。常见的降维方法有PCA, LDA, SVD等。</p>\n<p> </p>\n<h4>主成分分析 PCA</h4>\n<p>降维里最经典的方法是主成分分析PCA，也就是找到数据的主要组成成分，抛弃掉不重要的成分。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/63918611ly1fl012tpanxg20jk0eaanz.gif\" width=\"704\" height=\"514\"></p>\n<p>这里我们先用鼠标随机生成8个数据点，然后绘制出表示主成分的白色直线。这根线就是二维数据降维后的主成分，蓝色的直线是数据点在新的主成分维度上的投影线，也就是垂线。主成分分析的数学意义可以看成是找到这根白色直线，使得投影的蓝色线段的长度的和为最小值。</p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/eEKogr/\" rel=\"nofollow\">ML Explained PCA</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>更多PCA的相关例子，可以参考：</p>\n<ul>\n<li>D3 <a href=\"http://bl.ocks.org/hardbyte/40cd6622cffbe98055d3\" rel=\"nofollow\">http://bl.ocks.org/hardbyte/40cd6622cffbe98055d3</a></li>\n<li><a href=\"http://setosa.io/ev/principal-component-analysis/\" rel=\"nofollow\">http://setosa.io/ev/principal-component-analysis/</a></li>\n</ul>\n<p> </p>\n<h3>聚类</h3>\n<p>因为在非监督学习的环境下，数据没有标签，那么能对数据所做的最好的分析除了降维，就是把具有相同特质的数据归并在一起，也就是聚类。</p>\n<p> </p>\n<h4>层级聚类 Hierachical Cluster</h4>\n<p>该<a href=\"http://www.statisticshowto.com/hierarchical-clustering/%C2%A0\" rel=\"nofollow\">聚类</a>方法用于构建一个拥有层次结构的聚类，</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611ly1fl012uje76g20hy0bewxb.gif\" width=\"646\" height=\"410\"></p>\n<p>如上图所示，层级聚类的算法非常的简单：</p>\n<ol>\n<li>初始时刻，所有点都自己是一个聚类</li>\n<li>找到距离最近的两个聚类（刚开始也就是两个点），形成一个聚类</li>\n<li>两个聚类的距离指的是聚类中最近的两个点之间的距离</li>\n<li>重复第二步，直到所有的点都被聚集到聚类中。</li>\n</ol>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/yoEWOG/\" rel=\"nofollow\">ML Explained Hierarchical Clustering</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p> </p>\n<h4>KMeans</h4>\n<p>KMeans中文翻译K均值算法，是最常见的聚类算法。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/63918611ly1fl012wkwslg20w80lo7wi.gif\" width=\"1160\" height=\"780\"></p>\n<ol>\n<li>随机在图中取K（这里K=3）个中心种子点。</li>\n<li>然后对图中的所有点求到这K个中心种子点的距离，假如点P离中心点S最近，那么P属于S点的聚类。</li>\n<li>接下来，我们要移动中心点到属于他的“聚类”的中心。</li>\n<li>然后重复第2）和第3）步，直到，中心点没有移动，那么算法收敛，找到所有的聚类。</li>\n</ol>\n<p>KMeans算法有几个问题：</p>\n<ol>\n<li>如何决定K值，在上图的例子中，我知道要分三个聚类，所以选择K等于3，然而在实际的应用中，往往并不知道应该分成几个类</li>\n<li>由于中心点的初始位置是随机的，有可能并不能正确分类，大家可以在我的Codepen中尝试不同的数据</li>\n<li>如下图，如果数据的分布在空间上有特殊性，KMeans算法并不能有效的分类。中间的点被分别归到了橙色和蓝色，其实都应该是蓝色。<img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611ly1fl012y9ebpg20v00koqv5.gif\" width=\"1116\" height=\"744\"></li>\n</ol>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/vJaYya/\" rel=\"nofollow\">ML Explained KMeans</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p> </p>\n<h4>DBSCAN</h4>\n<p>DBSCAN（Density-Based Spatial Clustering of Applications with Noise）中文是基于密度的聚类算法。</p>\n<p>DBSCAN算法基于一个事实：<strong>一个聚类可以由其中的任何核心对象唯一确定</strong>。</p>\n<p>算法的具体聚类过程如下：扫描整个数据集，找到任意一个核心点，对该核心点进行扩充。扩充的方法是寻找从该核心点出发的所有密度相连的数据点（注意是密度相连）。遍历该核心点的邻域内的所有核心点（因为边界点是无法扩充的），寻找与这些数据点密度相连的点，直到没有可以扩充的数据点为止。最后聚类成的簇的边界节点都是非核心数据点。之后就是重新扫描数据集（不包括之前寻找到的簇中的任何数据点），寻找没有被聚类的核心点，再重复上面的步骤，对该核心点进行扩充直到数据集中没有新的核心点为止。数据集中没有包含在任何簇中的数据点就构成异常点。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/large/63918611ly1fl01316wiig20v40lknpe.gif\" width=\"1120\" height=\"776\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/ayRzLq/\" rel=\"nofollow\">ML Explained DBSCAN</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>如上图所示，DBSCAN可以有效的解决KMeans不能正确分类的数据集。并且不需要知道K值。</p>\n<p>当然，DBCSAN还是要决定两个参数，如何决定这两个参数是分类效果的关键因素：</p>\n<ol>\n<li>一个参数是半径（Eps），表示以给定点P为中心的圆形邻域的范围；</li>\n<li>另一个参数是以点P为中心的邻域内最少点的数量（MinPts）。如果满足：以点P为中心、半径为Eps的邻域内的点的个数不少于MinPts，则称点P为核心点。</li>\n</ol>\n<p> </p>\n<h2>监督学习</h2>\n<p>监督学习中的数据要求具有标签。也就是说针对已有的结果去预测新出现的数据。如果要预测的内容是数值类型，我们称作回归，如果要预测的内容是类别或者是离散的，我们称作分类。</p>\n<p>其实回归和分类本质上是类似的，所以很多的算法既可以用作分类，也可以用作回归。</p>\n<p> </p>\n<h3>回归</h3>\n<p> </p>\n<h4>线性回归</h4>\n<p>线性回归是最经典的回归算法。</p>\n<p>在统计学中，<strong>线性回归</strong>（Linear regression）是利用称为<strong>线性回归</strong>方程的最小二乘函数对一个或多个自变量和因变量之间关系进行建模的一种<strong>回归</strong>分析。 这种函数是一个或多个称为<strong>回归</strong>系数的模型参数的<strong>线性</strong>组合。 只有一个自变量的情况称为简单<strong>回归</strong>，大于一个自变量情况的叫做多元<strong>回归</strong>。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/63918611ly1fl0132u6scg20yc0kkb29.gif\" width=\"1236\" height=\"740\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/ayRPjq/\" rel=\"nofollow\">ML Explained Linear Regression</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>如上图所示，线性回归就是要找到一条直线，使得所有的点预测的失误最小。也就是图中的蓝色直线段的和最小。这个图很像我们第一个例子中的PCA。仔细观察，分辨它们的区别。</p>\n<p>如果对于算法的的准确性要求比较高，推荐的回归算法包括：<strong>随机森林</strong>，<strong>神经网络</strong>或者<strong>Gradient Boosting Tree</strong>。</p>\n<p>如果要求速度优先，建议考虑<strong>决策树</strong>和<strong>线性回归</strong>。</p>\n<p> </p>\n<h3>分类</h3>\n<p> </p>\n<h4>支持向量机 SVM</h4>\n<p>如果对于分类的准确性要求比较高，可使用的算法包括<strong>Kernel SVM</strong>，<strong>随机森林</strong>，<strong>神经网络</strong>以及<strong>Gradient Boosting Tree</strong>。</p>\n<p>给定一组训练实例，每个训练实例被标记为属于两个类别中的一个或另一个，SVM训练算法创建一个将新的实例分配给两个类别之一的模型，使其成为非概率二元线性分类器。SVM模型是将实例表示为空间中的点，这样映射就使得单独类别的实例被尽可能宽的明显的间隔分开。然后，将新的实例映射到同一空间，并基于它们落在间隔的哪一侧来预测所属类别。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611ly1fl0135pt9ng20y80l81kz.gif\" width=\"1232\" height=\"764\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/KvYLqL/\" rel=\"nofollow\">ML Explained SVM</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>如上图所示，SVM算法就是在空间中找到一条直线，能够最好的分割两组数据。使得这两组数据到直线的距离的绝对值的和尽可能的大。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/large/63918611ly1fl013eoeing215o0l44qw.gif\" width=\"1500\" height=\"760\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/Evrjyw/\" rel=\"nofollow\">ML Explained SVM Kernels</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>上图示意了不同的核方法的不同分类效果。</p>\n<p> </p>\n<h4>决策树</h4>\n<p>如果要求分类结果是可以解释的，可以考虑<strong>决策树</strong>或者<strong>逻辑回归</strong>。</p>\n<p>决策树（decision tree）是一个树结构（<strong>可以是二叉树或非二叉树</strong>）。</p>\n<p>其每个非叶节点表示一个特征属性上的测试，每个分支代表这个特征属性在某个值域上的输出，而每个叶节点存放一个类别。</p>\n<p>使用决策树进行决策的过程就是从根节点开始，测试待分类项中相应的特征属性，并按照其值选择输出分支，直到到达叶子节点，将叶子节点存放的类别作为决策结果。</p>\n<p>决策树可以用于回归或者分类，下图是一个分类的例子。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/large/63918611ly1fl013hekoeg20pc0o0e82.gif\" width=\"912\" height=\"864\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/wqNWEr/\" rel=\"nofollow\">ML Explained Decision Tree</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>如上图所示，决策树把空间分割成不同的区域。</p>\n<p> </p>\n<h4>逻辑回归</h4>\n<p>逻辑回归虽然名字是回归，但是却是个分类算法。因为它和SVM类似是一个二分类，数学模型是预测1或者0的概率。所以我说回归和分类其实本质上是一致的。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/large/63918611ly1fl013kfzkeg20og0ns7wi.gif\" width=\"880\" height=\"856\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/BdEgBe/\" rel=\"nofollow\">ML Explained Logistic Regression</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>这里要注意逻辑回归和线性SVM分类的区别，可以阅读：</p>\n<ul>\n<li><a href=\"https://www.zhihu.com/question/26768865\" rel=\"nofollow\">https://www.zhihu.com/question/26768865</a></li>\n<li><a href=\"http://blog.jobbole.com/98635/\" rel=\"nofollow\">http://blog.jobbole.com/98635/</a></li>\n</ul>\n<p> </p>\n<h4>朴素贝叶斯</h4>\n<p>当数据量相当大的时候，朴素贝叶斯方法是一个很好的选择。</p>\n<p>15年我在公司给小伙伴们<a href=\"https://speakerdeck.com/gangtao/bayesian-classification\" rel=\"nofollow\">分享</a>过bayers方法，可惜speaker deck被墙了，如果有兴趣可以自行想办法。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/large/63918611ly1fl013kfzkeg20og0ns7wi.gif\" width=\"880\" height=\"856\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/OjdNdy/\" rel=\"nofollow\">ML Explained Naive Bayes</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>如上图所示，大家可以思考一下左下的绿点对整体分类结果的影响。</p>\n<p> </p>\n<h4>KNN</h4>\n<p>KNN分类可能是所有机器学习算法里最简单的一个了。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/63918611ly1fl013oprlpg20x00l8hdw.gif\" width=\"1188\" height=\"764\"></p>\n<p>See the Pen <a href=\"https://codepen.io/gangtao/pen/ayPVQz/\" rel=\"nofollow\">ML Explained KNN</a> by gangtao (<a href=\"https://codepen.io/gangtao\" rel=\"nofollow\">@gangtao</a>) on <a href=\"https://codepen.io\" rel=\"nofollow\">CodePen</a>.</p>\n<p>如上图所示，K=3，鼠标移动到任何一个点，就找到距离该点最近的K个点，然后，这K个点投票，多数表决获胜。就是这么简单。</p>\n<p> </p>\n<h2>总结</h2>\n<p>本文利用二维交互图帮助大家理解机器学习的基本算法，希望能增加大家对机器学习的各种方法有所了解。所有的代码可以在参考中找到。欢迎大家来和我交流。</p>\n<p><strong>参考：</strong></p>\n<ul>\n<li>代码和演示动画\n<ul>\n<li>我的<a href=\"https://codepen.io/collection/DPWwaj/\" rel=\"nofollow\">Codepen Collection</a> 包含了所有的演示代码</li>\n<li>我的<a href=\"https://github.com/gangtao/mlexplain/tree/master/movie\" rel=\"nofollow\">github</a>包含了所有的演示动画</li>\n</ul>\n</li>\n<li>基于JavaScript的机器学习的类库和演示\n<ul>\n<li><a href=\"https://github.com/mljs/ml\" rel=\"nofollow\">Machine learning tools in JavaScript</a> 基于JavaScript的机器学习库，本文中的一些演示用到了该库。</li>\n<li>另一个<a href=\"https://github.com/junku901/machine_learning\" rel=\"nofollow\">基于JavaScript的机器学习库</a>，没有前一个功能多，也没有前一个活跃，但是有很好的<a href=\"http://joonku.com/project/machine_learning\" rel=\"nofollow\">演示</a></li>\n<li>不错的<a href=\"http://machinelearningjs.com/\" rel=\"nofollow\">演示</a>，有三种回归和一个聚类</li>\n</ul>\n</li>\n<li>如果你像想要自己构建机器学的算法，可以用到的一些数学基础类库\n<ul>\n<li><a href=\"http://numericjs.com/\" rel=\"nofollow\">Numeric Javascript</a><strong> </strong>是基于JavaScript的数值计算和分析的类库，提供线性代数，复数计算等功能。</li>\n<li><a href=\"http://mathjs.org/index.html\" rel=\"nofollow\">Mathjs</a> 另一个基于JavaScript的数学计算库，这个和前一个可以看作是和Python的<a href=\"http://www.numpy.org/\" rel=\"nofollow\">numpy</a>／<a href=\"https://www.scipy.org/\" rel=\"nofollow\">scipy</a>／<a href=\"http://www.sympy.org/en/index.html\" rel=\"nofollow\">sympy</a> 对应JavaScript的库。</li>\n<li><a href=\"http://victorjs.org/\" rel=\"nofollow\">Victorjs</a> 2D向量库</li>\n</ul>\n</li>\n<li>推荐一些机器学习的路线图\n<ul>\n<li><a href=\"https://ml-cheatsheet.readthedocs.io/en/latest/\" rel=\"nofollow\">https://ml-cheatsheet.readthedocs.io/en/latest/</a></li>\n<li>10大机器学习算法 <a href=\"https://www.gitbook.com/book/wizardforcel/dm-algo-top10\" rel=\"nofollow\">https://www.gitbook.com/book/wizardforcel/dm-algo-top10</a></li>\n<li><a href=\"http://blogs.sas.com/content/subconsciousmusings/2017/04/12/machine-learning-algorithm-use/\" rel=\"nofollow\">http://blogs.sas.com/content/subconsciousmusings/2017/04/12/machine-learning-algorithm-use/</a></li>\n<li><a href=\"http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html\" rel=\"nofollow\">http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html</a></li>\n</ul>\n</li>\n<li>工具\n<ul>\n<li>把mov文件在线转换为动图 <a href=\"https://convertio.co/zh/mov-gif/\" rel=\"nofollow\">https://convertio.co/zh/mov-gif/</a> 或者 <a href=\"https://cloudconvert.com/mov-to-gif\" rel=\"nofollow\">https://cloudconvert.com/mov-to-gif</a></li>\n<li>gif 编辑工具 <a href=\"https://ezgif.com\" rel=\"nofollow\">https://ezgif.com</a></li>\n</ul>\n</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112779\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112779votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112779\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 11 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://wx2.sinaimg.cn/large/63918611ly1fl012sbprvj21kw0zgn9e.jpg"], "create_date": "2017/10/30", "fav_nums": 0, "praise_nums": "2", "comment_nums": 0, "tags": "IT技术,机器学习", "url": "http://blog.jobbole.com/112779/", "url_id": "d061a4099d15cdd307cd0e968946c4e8"}
{"title": "我如何在 17 天里得到 70 份面试", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/dimple11\">dimple11</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://blog.brandonwang.ca/2017/06/how-to-get-70-job-interviews-in-17-days.html\">Brandon Wang</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：搜索目标雇主，自动海投简历，看看这位工程师是如何拿 offer 的。工程师嘛，该自动化的，就自动化吧。</p>\n<hr>\n<p>当我还只是小男孩的时候，我就梦想着能够成为美国国家航空航天局（NASA）的守卫。NASA 有着敢于推动世界进程的力量，无论我在其中的工作多么微乎其微，但只要是 NASA 的一份子，就已经很棒啦。但这个要为 NASA 而效力的崇高理想却半路夭折了，我最近已经不得不开始了找工作了。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl0lj88x2nj20m80goq62.jpg\" width=\"522\" height=\"392\"></p>\n<p>人们通常认为求职方式应该分为两类：<strong>利用关系网和求职网站</strong>。尽管这些方式会管用，将你自己看做一个生意人也不失为一种非常有用的隐含性想法，即通过出售你的产品（你的时间）获得你的薪酬（你的收入）。你可能会提出，西方国家大部分人的工资是2万美元到50万美元不等，如果你是一个生意人，那么考虑像做生意一样出售你的产品（时间），也可能挺中用的。通常，生意中价格点的不同会影响到销售和推广技巧的不同。比如说，一个月挣 10 美元，采用直销（通过电话/邮件/等等方式直接地向别人销售）往往在经济上是不可行的。但是，若我们的产品每年能卖 2 万美元，那么我们仍然可以采用直销，这里直销就类似于传统的求职方式。但是，不是说好像所有那种价格点的产品都仅仅依靠直销来销售，从这里开始事情会变得非常有趣。</p>\n<p>营销至少由两个关键点组成：<strong>品牌和渠道</strong>。品牌指讲故事，渠道指如何将故事推广出去。大型公司往往专注于品牌的建立，而另一方面，新兴公司则重点关注渠道的拓宽。原因在于：大型公司往往有巨额预算和好几百万的收入，而新兴公司在创立之初时，是不可能像大型公司一样那样大手花钱的，它不能仅仅为了博得关注就斥资好几百万打电视广告战。所以将产品宣传推广出去，并让消费者购买，要比打造完美的广告说辞重要得多。如果你是一个生意人，那么你可能更像新兴公司而非大型公司（除非你是沃伦巴菲特），也就是说，如果我们要推销自己，我们可能应该像一个新兴公司一样营销，以下就是我在 17 天里得到 70 份面试的过程。</p>\n<h3>我的客户是谁？</h3>\n<p>在我开始求职之前，我问自己我的客户是谁，他们位于在一个特定的地方吗？有没有一个特定的岗位能够引起我的兴趣？我的薪酬范围有多大？通常你的标准越宽泛，你就能寻觅到越多的工作，因而在你的营销漏斗中可以放入更多的前期导引信息。</p>\n<p>至于我，就是一个曾经两度创业的人，坦白来说，我不知道我的产品（我的时间）能值多少。实际上如果你给别人打工，那么你的薪酬范围通常是非常清楚的。但是另一方面，如果自己创业，运营公司的水准可以极高，但是做什么都不太擅长的创业者也有很多。我决定让市场来为我和我的时间定价。而角色定位呢，我是学工程出身的，但是对营销和产品颇有兴趣，已经创立了两个公司，所以我寻找的岗位类型是技术产品管理和推进工作，它可以发挥我学工程这一背景优势。除此之外，我另外仅感兴趣的两个变数为：成长和影响。</p>\n<p>无论对于公司还是你要交际对象的阶层，根据客户特征对其进行定位是很重要的。比如说，如果你正在谋求高级岗位，那么虽然有正在招聘这种职位的招聘官，但直接找企业高管谈话可能会为你争取到更高的待遇。就我本人而言，我的客户有两种不同的类型：</p>\n<ul>\n<li>全世界范围内处于后种子期的新兴公司的创始人，他们的公司很有意思，并且发展迅速。</li>\n<li>后期硅谷公司的招聘官，他们对未来的远大发展有着清晰的规划。</li>\n</ul>\n<p>比如：谷歌可能通过获得移动广告收入得以发展</p>\n<p>比如：爱彼迎（Airbnb）可能在提供住宿以外通过实现收入来源多样化得以加速发展</p>\n<h3>我的客户在哪儿？</h3>\n<p>这是个简单的问题。</p>\n<p>这个问题很明显的答案有：</p>\n<ul>\n<li>LinkedIn</li>\n<li>co</li>\n<li>Indeed</li>\n<li>com</li>\n<li>在办公室里</li>\n<li>在加速器中</li>\n<li>Hacker News</li>\n<li>在搜索引擎上</li>\n<li>等等。</li>\n</ul>\n<h3>我如何接触那些客户？</h3>\n<p>可以说这是所有问题当中最有意思的，也是我们可以引入创意的地方。在传统时代，我们可以利用传统邮件、电视广告、广告牌和电话销售。在新时代，我们有了搜索引擎营销、点击付费广告、社交媒体等等。但问题是所有这些渠道都要花钱，而且有可能花费过高。比如说，如果我想每天进行 5 次面试，持续 20 天，那么我只需要进行 100 次面试。如果我的求职信息有 5% 的转化率，那么我想要的 100 次面试机会需要来源于 2000 个潜在客户。</p>\n<p>如果我们不想有创意，我们仅需为任意一条注意到的营销渠道付费即可。也就是说，我仅需列出一系列客户的住处，并由此获益，我们可以有创意地加以利用。比如说，我知道谷歌的招聘官在加利福尼亚山景城办公，为确保他们会注意到我的简历，我可能需要给 50 个不同的招聘官发 50 份纸质版简历，我能用像 <a href=\"https://lob.com/\"><u>https://lob.com/</u></a> 这样的服务机制来规模化投递简历。</p>\n<p>尤其重要的一点是，做生意要考虑相当大的数据和规模。尽管我们可能不想或不需要联系好几百个公司，但是你“怎样”联络公司不用花费过长时间是十分重要的，这样即可扩展一个合理的范围进行尝试。在很多情况下，当所有的尝试都失败后，你可以用一个 Upwork 或土耳其机器人之类的服务让另一个人代表你去规模性地申请工作。</p>\n<p>在这种特殊的情况下，我最终依赖于 Indeed 和 Angel.co。</p>\n<h3>我的求职标签什么？</h3>\n<p>我的品牌是什么？我代表的是什么？为什么人人都应该雇用我？我能够提供什么价值？我的客户关心的是什么？为了打造你的求职标签，你需要问你自己太多太多的问题。</p>\n<p>就我而言，我的求职标签就是：我已经创立了两家公司，拥有强劲的技术背景，在诸如微软/亚马逊/英伟达的地方上班，正在寻求和顶尖的人才共事。</p>\n<p>有很多关于品牌甚至个人品牌推广的著作，所以我不会依样复述。若想要进一步了解品牌营销方面的建议，可以搜谷歌、查书、浏览网络和借助常识。</p>\n<h3>执行和衡量</h3>\n<p>综合好（针对前面问题的所有答案）并且重复。在这个阶段，要将我们的求职标签和我们接触客户的方式（品牌和渠道）融合起来。就我而言，我利用 Angel.co 发了条短消息，可以让我的潜在客户点击查看我的简介和履历。不要因为没被查看而感到沮丧失意，这一点非常重要，因为搞营销的总是误解信息、我们可能写了一些不能引起受众共鸣的东西、我们交流的对象可能是错误的、可能有技术难题存在。重要的是衡量你得到的回复率大小，确定你正在接触的客户是对的，你正在反复确认的的事是重要的，因而才可以得到更好的考核机会。</p>\n<p>坦白来说，这儿的门槛并没有那么高，因为你只需要做成一单销售得到一份工作即可。就我而言，我的面试太多了，以至于都不能得到充分利用。</p>\n<p>在我收到录用的时候，我的漏斗看上去如下：</p>\n<ul>\n<li>1300 份申请</li>\n<li>~70 次面试机会（~5.4%的转化率）</li>\n<li>约 6 个 offer</li>\n</ul>\n<p>值得注意的是这些转化率可能比最终稳态转化率要低，因为我最终会接收一个 offer，这从本质上终止了以上过程。</p>\n<p>以下是我采用算法在Angel.co上应用的脚本（在<a href=\"https://angel.co/jobs\"><u>https://angel.co/jobs</u></a>上使用）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a02dfb8d40a1611847879\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction apply() {\r\n  if ($(\".add-note-button &gt; a.g-button.blue:visible\").length == 0) {\r\n    $(\".browse_startups_table_row:visible\").first().click();\r\n  }\r\n  $(\".add-note-button &gt; a.g-button.blue:visible\").first().click();\r\n  $(\".interested-note:visible\").first().val(\"I copied this script to automate job applications from a guy named Brandon (brandonwang.ca) and you should probably hire me.\");\r\n  $(\"a.g-button.blue.interested-with-note-button:visible\").first().click();\r\n  $(\".js-done\").click();\r\n  $(\"html, body\").animate({ scrollTop: $(document).height()-$(window).height() });\r\n  setTimeout(apply, 4000);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a02dfb8d40a1611847879-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb8d40a1611847879-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb8d40a1611847879-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb8d40a1611847879-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb8d40a1611847879-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb8d40a1611847879-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb8d40a1611847879-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb8d40a1611847879-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb8d40a1611847879-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a02dfb8d40a1611847879-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a02dfb8d40a1611847879-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a02dfb8d40a1611847879-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb8d40a1611847879-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\".add-note-button &gt; a.g-button.blue:visible\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb8d40a1611847879-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\".browse_startups_table_row:visible\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">first</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb8d40a1611847879-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb8d40a1611847879-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\".add-note-button &gt; a.g-button.blue:visible\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">first</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb8d40a1611847879-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\".interested-note:visible\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">first</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">val</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"I copied this script to automate job applications from a guy named Brandon (brandonwang.ca) and you should probably hire me.\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb8d40a1611847879-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"a.g-button.blue.interested-with-note-button:visible\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">first</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb8d40a1611847879-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\".js-done\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb8d40a1611847879-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"html, body\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">animate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scrollTop</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">height</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a02dfb8d40a1611847879-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">setTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">apply</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a02dfb8d40a1611847879-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>I’d like to note how imperfect (bad) this code is and how that doesn’t really matter.</p>\n<p>我想指出，虽然这代码很不健全（差劲），但是这些问题其实没什么大不了的。</p>\n<h3>后果</h3>\n<p>从这一过程中，我提炼出了很多不相关的事实：</p>\n<ul>\n<li>收到很多 offer，会在求职过程中大大减轻心理压力。</li>\n<li>公司创始人和招聘官青睐的招聘方式有很大不同，至少从我所解到的看，公司创始人往往倾向于首先优化原材料，其次优化经验。而招聘官则倾向于优先考虑凭证。为这每一组公司创建两种不同的求职讯息/简历，可能挺有必要的。</li>\n<li>做生意好像需要协商，而搞工程不同，搞工程只需要合理的补助。我在搞工程的时候从来都没有为薪酬而协商过，但是通过比较发现，我刚从学校毕业后开始寻找纯工程方面的工作，得到的工作起薪要更高得多，好像社会对工程师的需求量要远大于生意人。</li>\n<li>基于价值进行定价（根据你为生意提供的价值而得到的补助）是很棒的，因为它减少了生意中的很多不利因素。虽然通常情况下定价是由业务定价模型来完成的，但是这种基于价值的定价也能应用于特定的岗位。</li>\n<li>供求关系很大程度上要与你的时间相适应。谈及竞争，无论是隐含的还是明确的，它都能使我所见过的一些 offer 的价值成倍增加。</li>\n<li>一旦我口头上接受了一个 offer，而且表明自己不再在应聘市场上继续求职后，就会有一堆可观的 offer 突然冒出来。这有可能取决于你的“客户们”是谁，但是我觉得这其实说明公司创始人（我的潜在客户）不愿意输掉竞争力。但另一方面招聘者好像对于失去竞争力不太在意。这里就要应用一些道德准则了，我的信条是，当你说你要做某件事时，你就应该去做它。</li>\n<li>新兴公司的薪资报酬是可以和大型公司势均力敌的。</li>\n<li>确实有好公司在做一些疯狂的事，如果你没有干一份令你感到兴奋的工作，那么别找借口，去找你一份能让你大清早就跳下床去干的工作。</li>\n</ul>\n<p>总而言之，我希望将你自己看做一个生意人而不是一个雇员的这种观点会对你有益，而且找工作的过程也不用那么辛苦。</p>\n<p>我希望你能找到一份工作，能让你振奋精神、心致盎然，并从中获得快乐。</p>\n<p>求职愉快！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112793\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112793votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112793\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 8 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">dimple11</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/28db3e36f17643a752be4b798d5ceabc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/dimple11\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/dimple11/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 13</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl0lj88x2nj20m80goq62.jpg"], "create_date": "2017/10/30", "fav_nums": 0, "praise_nums": "4", "comment_nums": 0, "tags": "开发,职场,程序员,职场", "url": "http://blog.jobbole.com/112793/", "url_id": "79cdd8b9227ddad737ea518c2d8cf9c6"}
{"title": "如何遏制 PostgreSQL WAL 的疯狂增长", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://blog.chinaunix.net/uid-20726500-id-5766987.html\">skykiker</a>   </div><h1><a id=\"user-content-前言\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E5%89%8D%E8%A8%80\"></a>前言</h1>\n<p>PostgreSQL在写入频繁的场景中，可能会产生大量的WAL日志，而且WAL日志量远远超过实际更新的数据量。 我们可以把这种现象起个名字,叫做“WAL写放大”，造成WAL写放大的主要原因有2点。</p>\n<ol>\n<li>在checkpoint之后第一次修改页面，需要在WAL中输出整个page，即全页写(full page writes)。全页写的目的是防止在意外宕机时出现的数据块部分写导致数据库无法恢复。</li>\n<li>更新记录时如果新记录位置(ctid)发生变更，索引记录也要相应变更，这个变更也要记入WAL。更严重的是索引记录的变更又有可能导致索引页的全页写，进一步加剧了WAL写放大。</li>\n</ol>\n<p>过量的WAL输出会对系统资源造成很大的消耗，因此需要进行适当的优化。</p>\n<ol>\n<li>磁盘IO<br>\nWAL写入是顺序写,通常情况下硬盘对付WAL的顺序写入是绰绰有余的。所以一般可以忽略。</li>\n<li>网络IO<br>\n对局域网内的复制估计还不算问题，远程复制就难说了。</li>\n<li>磁盘空间<br>\n如果做WAL归档，需要的磁盘空间也是巨大的。</li>\n</ol>\n<h2><a id=\"user-content-wal记录的构成\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#wal%E8%AE%B0%E5%BD%95%E7%9A%84%E6%9E%84%E6%88%90\"></a>WAL记录的构成</h2>\n<p>每条WAL记录的构成大致如下：</p>\n<p>src/include/access/xlogrecord.h:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f118754984188\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n * The overall layout of an XLOG record is:\r\n *\t\tFixed-size header (XLogRecord struct)\r\n *\t\tXLogRecordBlockHeader struct\r\n *\t\tXLogRecordBlockHeader struct\r\n *\t\t...\r\n *\t\tXLogRecordDataHeader[Short|Long] struct\r\n *\t\tblock data\r\n *\t\tblock data\r\n *\t\t...\r\n *\t\tmain data</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f118754984188-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f118754984188-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f118754984188-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f118754984188-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f118754984188-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f118754984188-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f118754984188-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f118754984188-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f118754984188-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f118754984188-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f118754984188-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">The </span><span class=\"crayon-e\">overall </span><span class=\"crayon-e\">layout </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">an </span><span class=\"crayon-e\">XLOG </span><span class=\"crayon-e\">record </span><span class=\"crayon-st\">is</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f118754984188-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">Fixed</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">size </span><span class=\"crayon-e\">header</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">XLogRecord </span><span class=\"crayon-t\">struct</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f118754984188-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">XLogRecordBlockHeader </span><span class=\"crayon-t\">struct</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f118754984188-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">XLogRecordBlockHeader </span><span class=\"crayon-t\">struct</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f118754984188-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f118754984188-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">XLogRecordDataHeader</span><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">Short</span><span class=\"crayon-o\">|</span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f118754984188-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">block </span><span class=\"crayon-e \">data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f118754984188-8\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">block </span><span class=\"crayon-e \">data</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f118754984188-9\"><span class=\"crayon-e \"> *</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f118754984188-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">main </span><span class=\"crayon-v\">data</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>主要占空间是上面的”block data”，再往上的XLogRecordBlockHeader是”block data”的元数据。 一条WAL记录可能不涉及数据块，也可能涉及多个数据块，因此WAL记录中可能没有”block data”也可能有多个”block data”。</p>\n<p>“block data”的内容可能是下面几种情况之一</p>\n<ul>\n<li>full page image<br>\n如果是checkpoint之后第一次修改页面，则输出整个page的内容(即full page image，简称FPI)。但是page中没有数据的hole部分会被排除，如果设置了wal_compression = on还会对这page上的数据进行压缩。</li>\n<li>buffer data<br>\n不需要输出FPI时，就只输出page中指定的数据。</li>\n<li>full page image + buffer data<br>\n逻辑复制时，即使输出了FPI，也要输出指定的数据。</li>\n</ul>\n<p>究竟”block data”中存的是什么内容，通过前面的XLogRecordBlockHeader中的fork_flags进行描述。这里的XLogRecordBlockHeader其实也只是个概括的说法，实际上后面还跟了一些其它的Header。完整的结构如下:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f122526916341\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nXLogRecordBlockHeader \r\nXLogRecordBlockImageHeader (可选，包含FPI时存在）\r\nXLogRecordBlockCompressHeader (可选，对FPI压缩时存在)\r\nRelFileNode  (可选，和之前的\"block data\"的file node不一样时才存在)\r\nBlockNumber</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f122526916341-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f122526916341-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f122526916341-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f122526916341-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f122526916341-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f122526916341-1\"><span class=\"crayon-e\">XLogRecordBlockHeader </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f122526916341-2\"><span class=\"crayon-e\">XLogRecordBlockImageHeader</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>可选，包含<span class=\"crayon-i\">FPI</span>时存在）</div><div class=\"crayon-line\" id=\"crayon-5a029de37f122526916341-3\"><span class=\"crayon-e\">XLogRecordBlockCompressHeader</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>可选，对<span class=\"crayon-i\">FPI</span>压缩时存在<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f122526916341-4\"><span class=\"crayon-e\">RelFileNode</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span>可选，和之前的<span class=\"crayon-s\">\"block data\"</span>的<span class=\"crayon-e\">file </span><span class=\"crayon-i\">node</span>不一样时才存在<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f122526916341-5\"><span class=\"crayon-v\">BlockNumber</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>下面以insert作为例子说明。</p>\n<p>src/backend/access/heap/heapam.c:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f127598972483\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nOid\r\nheap_insert(Relation relation, HeapTuple tup, CommandId cid,\r\n\t\t\tint options, BulkInsertState bistate)\r\n{\r\n\t\t...\r\n\t\txl_heap_insert xlrec;\r\n\t\txl_heap_header xlhdr;\r\n\t\t...\r\n\r\n\t\txlrec.offnum = ItemPointerGetOffsetNumber(&amp;heaptup-&gt;t_self);\r\n\t\t...\r\n\r\n\t\tXLogBeginInsert();\r\n\t\tXLogRegisterData((char *) &amp;xlrec, SizeOfHeapInsert); //1)记录tuple的位置到WAL记录里的\"main data\"。\r\n\r\n\t\txlhdr.t_infomask2 = heaptup-&gt;t_data-&gt;t_infomask2;\r\n\t\txlhdr.t_infomask = heaptup-&gt;t_data-&gt;t_infomask;\r\n\t\txlhdr.t_hoff = heaptup-&gt;t_data-&gt;t_hoff;\r\n\r\n\t\t/*\r\n\t\t * note we mark xlhdr as belonging to buffer; if XLogInsert decides to\r\n\t\t * write the whole page to the xlog, we don't need to store\r\n\t\t * xl_heap_header in the xlog.\r\n\t\t */\r\n\t\tXLogRegisterBuffer(0, buffer, REGBUF_STANDARD | bufflags);\r\n\t\tXLogRegisterBufData(0, (char *) &amp;xlhdr, SizeOfHeapHeader);//2)记录tuple的head到WAL记录里的\"block data\"。\r\n\t\t/* PG73FORMAT: write bitmap [+ padding] [+ oid] + data */\r\n\t\tXLogRegisterBufData(0,\r\n\t\t\t\t\t\t\t(char *) heaptup-&gt;t_data + SizeofHeapTupleHeader,\r\n\t\t\t\t\t\t\theaptup-&gt;t_len - SizeofHeapTupleHeader);//3)记录tuple的内容到WAL记录里的\"block data\"。\r\n\t\t...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f127598972483-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f127598972483-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-1\"><span class=\"crayon-e\">Oid</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-2\"><span class=\"crayon-e\">heap_insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Relation </span><span class=\"crayon-v\">relation</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HeapTuple </span><span class=\"crayon-v\">tup</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CommandId </span><span class=\"crayon-v\">cid</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-3\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">options</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BulkInsertState </span><span class=\"crayon-v\">bistate</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-6\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">xl_heap_insert </span><span class=\"crayon-v\">xlrec</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-7\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">xl_heap_header </span><span class=\"crayon-v\">xlhdr</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-8\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">xlrec</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">offnum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ItemPointerGetOffsetNumber</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">heaptup</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-11\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-12\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">XLogBeginInsert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">XLogRegisterData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">xlrec</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SizeOfHeapInsert</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//1)记录tuple的位置到WAL记录里的\"main data\"。</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-16\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">xlhdr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">t_infomask2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heaptup</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_data</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_infomask2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-17\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">xlhdr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">t_infomask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heaptup</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_data</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_infomask</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-18\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">xlhdr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">t_hoff</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heaptup</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_data</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_hoff</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-20\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">/*</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-21\"><span class=\"crayon-c\">\t\t * note we mark xlhdr as belonging to buffer; if XLogInsert decides to</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-22\"><span class=\"crayon-c\">\t\t * write the whole page to the xlog, we don't need to store</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-23\"><span class=\"crayon-c\">\t\t * xl_heap_header in the xlog.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-24\"><span class=\"crayon-c\">\t\t */</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-25\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">XLogRegisterBuffer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buffer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">REGBUF_STANDARD</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bufflags</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-26\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">XLogRegisterBufData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">xlhdr</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SizeOfHeapHeader</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//2)记录tuple的head到WAL记录里的\"block data\"。</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-27\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">/* PG73FORMAT: write bitmap [+ padding] [+ oid] + data */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-28\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">XLogRegisterBufData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-29\"><span class=\"crayon-h\">\t\t\t\t\t\t\t</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">heaptup</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SizeofHeapTupleHeader</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-30\"><span class=\"crayon-h\">\t\t\t\t\t\t\t</span><span class=\"crayon-v\">heaptup</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">t_len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SizeofHeapTupleHeader</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//3)记录tuple的内容到WAL记录里的\"block data\"。</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f127598972483-31\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f127598972483-32\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p></p>\n<h3><a id=\"user-content-wal的解析\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#wal%E7%9A%84%E8%A7%A3%E6%9E%90\"></a>WAL的解析</h3>\n<p>PostgreSQL的安装目录下有个叫做pg_xlogdump的命令可以解析WAL文件，下面看一个例子。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f12d079405603\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ pg_xlogdump /pgsql/data/pg_xlog/0000000100000555000000D5 -b\r\n...\r\nrmgr: Heap        len (rec/tot):     14/   171, tx:  301170263, lsn: 555/D5005080, prev 555/D50030A0, desc: UPDATE off 30 xmax 301170263 ; new off 20 xmax 0\r\n\tblkref #0: rel 1663/13269/54349226 fork main blk 1640350\r\n\tblkref #1: rel 1663/13269/54349226 fork main blk 1174199\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f12d079405603-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f12d079405603-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f12d079405603-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f12d079405603-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f12d079405603-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f12d079405603-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f12d079405603-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_xlogdump</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pgsql</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0000000100000555000000D5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f12d079405603-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f12d079405603-3\"><span class=\"crayon-v\">rmgr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heap        </span><span class=\"crayon-e\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rec</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tot</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">171</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">301170263</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lsn</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">555</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">D5005080</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">prev</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">555</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">D50030A0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">desc</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-i\">off</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xmax</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">301170263</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">off</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xmax</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f12d079405603-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">blkref</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#0: rel 1663/13269/54349226 fork main blk 1640350</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f12d079405603-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">blkref</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#1: rel 1663/13269/54349226 fork main blk 1174199</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f12d079405603-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>这条WAL记录的解释如下:</p>\n<ul>\n<li>rmgr: Heap<br>\nPostgreSQL内部将WAL日志归类到20多种不同的资源管理器。这条WAL记录所属资源管理器为Heap,即堆表。除了Heap还有Btree,Transaction等。</li>\n<li>len (rec/tot): 14/ 171<br>\nWAL记录的总长度是171字节，其中main data部分是14字节(只计数main data可能并不合理，本文的后面会有说明)。</li>\n<li>tx: 301170263<br>\n事务号</li>\n<li>lsn: 555/D5005080<br>\n本WAL记录的LSN</li>\n<li>prev 555/D50030A0<br>\n上条WAL记录的LSN</li>\n<li>desc: UPDATE off 30 xmax 301170263 ; new off 20 xmax 0<br>\n这是一条UPDATE类型的记录(每个资源管理器最多包含16种不同的WAL记录类型，)，旧tuple在page中的位置为30(即ctid的后半部分)，新tuple在page中的位置为20。</li>\n<li>blkref #0: rel 1663/13269/54349226 fork main blk 1640350<br>\n引用的第一个page(新tuple所在page)所属的堆表文件为1663/13269/54349226,块号为1640350(即ctid的前半部分)。通过oid2name可以查到是哪个堆表。<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f131373584304\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n -bash-4.1$ oid2name -f 54349226\r\n  From database \"postgres\":\r\n    Filenode        Table Name\r\n  ----------------------------\r\n    54349226  pgbench_accounts</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f131373584304-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f131373584304-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f131373584304-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f131373584304-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f131373584304-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f131373584304-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">oid2name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">54349226</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f131373584304-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">From </span><span class=\"crayon-i\">database</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"postgres\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f131373584304-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Filenode        </span><span class=\"crayon-e\">Table </span><span class=\"crayon-v\">Name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f131373584304-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f131373584304-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">54349226</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">pgbench_accounts</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</li>\n<li>blkref #1: rel 1663/13269/54349226 fork main blk 1174199<br>\n引用的第二个page(旧tuple所在page)所属的堆表文件及块号</li>\n</ul>\n<p>UPDATE语句除了产生UPDATE类型的WAL记录，实际上还会在前面产生一条LOCK记录，可选的还可能在后面产生若干索引更新的WAL记录。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f135070588219\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ pg_xlogdump /pgsql/data/pg_xlog/0000000100000555000000D5 -b\r\n...\r\nrmgr: Heap        len (rec/tot):      8/  8135, tx:  301170263, lsn: 555/D50030A0, prev 555/D5001350, desc: LOCK off 30: xid 301170263: flags 0 LOCK_ONLY EXCL_LOCK \r\n\tblkref #0: rel 1663/13269/54349226 fork main blk 1174199 (FPW); hole: offset: 268, length: 116\r\n\r\nrmgr: Heap        len (rec/tot):     14/   171, tx:  301170263, lsn: 555/D5005080, prev 555/D50030A0, desc: UPDATE off 30 xmax 301170263 ; new off 20 xmax 0\r\n\tblkref #0: rel 1663/13269/54349226 fork main blk 1640350\r\n\tblkref #1: rel 1663/13269/54349226 fork main blk 1174199\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f135070588219-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f135070588219-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f135070588219-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f135070588219-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f135070588219-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f135070588219-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f135070588219-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f135070588219-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f135070588219-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f135070588219-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_xlogdump</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pgsql</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0000000100000555000000D5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f135070588219-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f135070588219-3\"><span class=\"crayon-v\">rmgr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heap        </span><span class=\"crayon-e\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rec</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tot</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8135</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">301170263</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lsn</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">555</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">D50030A0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">prev</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">555</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">D5001350</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">desc</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LOCK </span><span class=\"crayon-i\">off</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">301170263</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LOCK_ONLY </span><span class=\"crayon-e\">EXCL_LOCK </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f135070588219-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">blkref</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#0: rel 1663/13269/54349226 fork main blk 1174199 (FPW); hole: offset: 268, length: 116</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f135070588219-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f135070588219-6\"><span class=\"crayon-v\">rmgr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heap        </span><span class=\"crayon-e\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rec</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tot</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">171</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">301170263</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lsn</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">555</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">D5005080</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">prev</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">555</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">D50030A0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">desc</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-i\">off</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xmax</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">301170263</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">off</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xmax</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f135070588219-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">blkref</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#0: rel 1663/13269/54349226 fork main blk 1640350</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f135070588219-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">blkref</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#1: rel 1663/13269/54349226 fork main blk 1174199</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f135070588219-9\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>上面的LOCK记录的例子中，第一个引用page里有PFW标识，表示包含FPI，这也是这条WAL记录长度很大的原因。 后面的hole: offset: 268, length: 116表示page中包含hole,以及这个hole的偏移位置和长度。 可以算出FPI的大小为8196-116=8080, WAL记录中除FPI以外的数据长度8135-8080=55。</p>\n<h3><a id=\"user-content-wal的统计\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#wal%E7%9A%84%E7%BB%9F%E8%AE%A1\"></a>WAL的统计</h3>\n<p>PostgreSQL 9.5以后的pg_xlogdump都带有统计功能，可以查看不同类型的WAL记录的数量，大小以及FPI的比例。例子如下:</p>\n<h4><a id=\"user-content-postgresconf配置\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#postgresconf%E9%85%8D%E7%BD%AE\"></a>postgres.conf配置</h4>\n<p>下面是一个未经特别优化的配置</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f13b842998040\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshared_buffers = 32GB\r\ncheckpoint_completion_target = 0.9\r\ncheckpoint_timeout = 5min\r\nmin_wal_size = 1GB\r\nmax_wal_size = 4GB\r\nfull_page_writes = on\r\nwal_log_hints = on\r\nwal_level = replica\r\nwal_keep_segments = 1000</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13b842998040-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13b842998040-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13b842998040-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13b842998040-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13b842998040-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13b842998040-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13b842998040-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13b842998040-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13b842998040-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f13b842998040-1\"><span class=\"crayon-v\">shared_buffers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32GB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13b842998040-2\"><span class=\"crayon-v\">checkpoint_completion_target</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.9</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13b842998040-3\"><span class=\"crayon-v\">checkpoint_timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5min</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13b842998040-4\"><span class=\"crayon-v\">min_wal_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1GB</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13b842998040-5\"><span class=\"crayon-v\">max_wal_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4GB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13b842998040-6\"><span class=\"crayon-v\">full_page_writes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">on</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13b842998040-7\"><span class=\"crayon-v\">wal_log_hints</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">on</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13b842998040-8\"><span class=\"crayon-v\">wal_level</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">replica</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13b842998040-9\"><span class=\"crayon-v\">wal_keep_segments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h4><a id=\"user-content-测试\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E6%B5%8B%E8%AF%95\"></a>测试</h4>\n<p>先手动执行checkpoint，再利用pgbench做一个10秒钟的压测</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f13f290167325\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ psql -c \"checkpoint;select pg_switch_xlog(),pg_current_xlog_location()\"\r\n pg_switch_xlog | pg_current_xlog_location \r\n----------------+--------------------------\r\n 556/48000270   | 556/49000000\r\n(1 row)\r\n\r\n-bash-4.1$ pgbench -n -c 64 -j 64 -T 10\r\ntransaction type: &lt;builtin: TPC-B (sort of)&gt;\r\nscaling factor: 1000\r\nquery mode: simple\r\nnumber of clients: 64\r\nnumber of threads: 64\r\nduration: 10 s\r\nnumber of transactions actually processed: 123535\r\nlatency average = 5.201 ms\r\ntps = 12304.460572 (including connections establishing)\r\ntps = 12317.916235 (excluding connections establishing)\r\n\r\n-bash-4.1$ psql -c \"select pg_current_xlog_location()\"\r\n pg_current_xlog_location \r\n--------------------------\r\n 556/B8B40CA0\r\n(1 row)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f13f290167325-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f13f290167325-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"checkpoint;select pg_switch_xlog(),pg_current_xlog_location()\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_switch_xlog</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">48000270</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">49000000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-7\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-8\"><span class=\"crayon-e\">transaction </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">builtin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TPC</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sort </span><span class=\"crayon-v\">of</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-9\"><span class=\"crayon-e\">scaling </span><span class=\"crayon-v\">factor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-10\"><span class=\"crayon-e\">query </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">simple</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-11\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">clients</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-12\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">threads</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-13\"><span class=\"crayon-v\">duration</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-14\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">actually </span><span class=\"crayon-v\">processed</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">123535</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-15\"><span class=\"crayon-e\">latency </span><span class=\"crayon-v\">average</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.201</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ms</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-16\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12304.460572</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">including </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-17\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12317.916235</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">excluding </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-18\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-19\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"select pg_current_xlog_location()\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-20\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-21\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f13f290167325-22\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">B8B40CA0</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f13f290167325-23\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0042 seconds] -->\r\n<p></p>\n<h4><a id=\"user-content-日志统计\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E6%97%A5%E5%BF%97%E7%BB%9F%E8%AE%A1\"></a>日志统计</h4>\n<p>统计压测期间产生的WAL</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f143648703064\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ pg_xlogdump --stats=record -s 556/49000000 -e 556/B8B40CA0\r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                            650 (  0.06)                15600 (  0.05)              5262532 (  0.29)              5278132 (  0.29)\r\nTransaction/COMMIT                        123535 ( 11.54)              3953120 ( 11.46)                    0 (  0.00)              3953120 (  0.22)\r\nCLOG/ZEROPAGE                                  4 (  0.00)                  112 (  0.00)                    0 (  0.00)                  112 (  0.00)\r\nStandby/RUNNING_XACTS                          2 (  0.00)                  232 (  0.00)                    0 (  0.00)                  232 (  0.00)\r\nHeap/INSERT                               122781 ( 11.47)              3315087 (  9.61)              1150064 (  0.06)              4465151 (  0.25)\r\nHeap/UPDATE                               220143 ( 20.57)              8365434 ( 24.24)              1110312 (  0.06)              9475746 (  0.52)\r\nHeap/HOT_UPDATE                           147169 ( 13.75)              5592422 ( 16.21)               275568 (  0.02)              5867990 (  0.32)\r\nHeap/LOCK                                 228031 ( 21.31)              7296992 ( 21.15)            975914004 ( 54.70)            983210996 ( 54.06)\r\nHeap/INSERT+INIT                             754 (  0.07)                20358 (  0.06)                    0 (  0.00)                20358 (  0.00)\r\nHeap/UPDATE+INIT                            3293 (  0.31)               125134 (  0.36)                    0 (  0.00)               125134 (  0.01)\r\nBtree/INSERT_LEAF                         223003 ( 20.84)              5798078 ( 16.80)            800409940 ( 44.86)            806208018 ( 44.33)\r\nBtree/INSERT_UPPER                           433 (  0.04)                11258 (  0.03)                32576 (  0.00)                43834 (  0.00)\r\nBtree/SPLIT_L                                218 (  0.02)                 6976 (  0.02)                26040 (  0.00)                33016 (  0.00)\r\nBtree/SPLIT_R                                216 (  0.02)                 6912 (  0.02)                27220 (  0.00)                34132 (  0.00)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                    1070232                      34507715 [1.90%]            1784208256 [98.10%]           1818715971 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f143648703064-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f143648703064-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_xlogdump</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">49000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">B8B40CA0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">650</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">15600</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5262532</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.29</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5278132</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.29</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                        </span><span class=\"crayon-cn\">123535</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.54</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3953120</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.46</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3953120</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.22</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-6\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">112</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">112</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-7\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">232</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">232</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-8\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">122781</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.47</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3315087</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9.61</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1150064</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">4465151</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.25</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-9\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">220143</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.57</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">8365434</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24.24</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1110312</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9475746</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.52</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">147169</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.75</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5592422</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.21</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">275568</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5867990</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.32</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">228031</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7296992</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">975914004</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">54.70</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">983210996</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">54.06</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">754</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">20358</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">20358</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">3293</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">125134</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.36</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">125134</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-14\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                         </span><span class=\"crayon-cn\">223003</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.84</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5798078</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.80</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">800409940</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">44.86</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">806208018</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">44.33</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-15\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">433</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">11258</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">32576</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">43834</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-16\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">218</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">6976</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">26040</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">33016</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-17\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">216</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">6912</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">27220</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">34132</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f143648703064-18\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f143648703064-19\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-cn\">1070232</span><span class=\"crayon-h\">                      </span><span class=\"crayon-cn\">34507715</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.90</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">1784208256</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">98.10</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">1818715971</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0127 seconds] -->\r\n<p>这个统计结果显示FPI的比例占到了98.10%。但是这个数据并不准确，因为上面的Record size只包含了WAL记录中”main data”的大小，Combined size则是”main data”与FPI的合计，漏掉了FPI以外的”block data”。 这是一个Bug，社区正在进行修复，参考<a href=\"https://www.postgresql.org/message-id/20170603165939.1436.58887@wrigleys.postgresql.org\">BUG #14687</a></p>\n<p>作为临时对策，可以在pg_xlogdump.c中新增了一行代码，重新计算Record size使之等于WAL总记录长度减去FPI的大小。为便于区分，修改后编译的二进制文件改名为pg_xlogdump_ex。</p>\n<p>src/bin/pg_xlogdump/pg_xlogdump.c：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f148511099177\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfpi_len = 0;\r\nfor (block_id = 0; block_id &lt;= record-&gt;max_block_id; block_id++)\r\n{\r\n\tif (XLogRecHasBlockImage(record, block_id))\r\n\t\tfpi_len += record-&gt;blocks[block_id].bimg_len;\r\n}\r\nrec_len = XLogRecGetTotalLen(record) - fpi_len;/* 新增这一行，重新计算rec_len */</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f148511099177-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f148511099177-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f148511099177-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f148511099177-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f148511099177-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f148511099177-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f148511099177-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f148511099177-1\"><span class=\"crayon-v\">fpi_len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f148511099177-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">block_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">record</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">max_block_id</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block_id</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f148511099177-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f148511099177-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">XLogRecHasBlockImage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f148511099177-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">fpi_len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">record</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">blocks</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">block_id</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bimg_len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f148511099177-6\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f148511099177-7\"><span class=\"crayon-v\">rec_len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">XLogRecGetTotalLen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fpi_len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">/* 新增这一行，重新计算rec_len */</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>修改后，重新统计WAL的结果如下:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f14e044431728\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ ./pg_xlogdump_ex --stats=record -s 556/49000000 -e 556/B8B40CA0\r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                            650 (  0.06)                31850 (  0.04)              5262532 (  0.29)              5294382 (  0.28)\r\nTransaction/COMMIT                        123535 ( 11.54)              4200190 (  5.14)                    0 (  0.00)              4200190 (  0.23)\r\nCLOG/ZEROPAGE                                  4 (  0.00)                  120 (  0.00)                    0 (  0.00)                  120 (  0.00)\r\nStandby/RUNNING_XACTS                          2 (  0.00)                  236 (  0.00)                    0 (  0.00)                  236 (  0.00)\r\nHeap/INSERT                               122781 ( 11.47)              9694899 ( 11.86)              1150064 (  0.06)             10844963 (  0.58)\r\nHeap/UPDATE                               220143 ( 20.57)             29172042 ( 35.67)              1110312 (  0.06)             30282354 (  1.62)\r\nHeap/HOT_UPDATE                           147169 ( 13.75)             10591360 ( 12.95)               275568 (  0.02)             10866928 (  0.58)\r\nHeap/LOCK                                 228031 ( 21.31)             12917849 ( 15.80)            975914004 ( 54.70)            988831853 ( 52.99)\r\nHeap/INSERT+INIT                             754 (  0.07)                59566 (  0.07)                    0 (  0.00)                59566 (  0.00)\r\nHeap/UPDATE+INIT                            3293 (  0.31)               455778 (  0.56)                    0 (  0.00)               455778 (  0.02)\r\nBtree/INSERT_LEAF                         223003 ( 20.84)             13080672 ( 16.00)            800409940 ( 44.86)            813490612 ( 43.60)\r\nBtree/INSERT_UPPER                           433 (  0.04)                31088 (  0.04)                32576 (  0.00)                63664 (  0.00)\r\nBtree/SPLIT_L                                218 (  0.02)               775610 (  0.95)                26040 (  0.00)               801650 (  0.04)\r\nBtree/SPLIT_R                                216 (  0.02)               765118 (  0.94)                27220 (  0.00)               792338 (  0.04)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                    1070232                      81776378 [4.38%]            1784208256 [95.62%]           1865984634 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f14e044431728-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f14e044431728-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlogdump_ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">49000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">B8B40CA0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">650</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">31850</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5262532</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.29</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5294382</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.28</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                        </span><span class=\"crayon-cn\">123535</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.54</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">4200190</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.14</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">4200190</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.23</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-6\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">120</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">120</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-7\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">236</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">236</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-8\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">122781</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.47</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9694899</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.86</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1150064</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">10844963</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.58</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-9\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">220143</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.57</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">29172042</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">35.67</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1110312</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">30282354</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.62</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">147169</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.75</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">10591360</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.95</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">275568</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">10866928</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.58</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">228031</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">12917849</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.80</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">975914004</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">54.70</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">988831853</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52.99</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">754</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">59566</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">59566</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">3293</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">455778</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.56</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">455778</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-14\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                         </span><span class=\"crayon-cn\">223003</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.84</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">13080672</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">800409940</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">44.86</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">813490612</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">43.60</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-15\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">433</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">31088</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">32576</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">63664</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-16\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">218</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">775610</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.95</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">26040</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">801650</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-17\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">216</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">765118</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.94</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">27220</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">792338</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f14e044431728-18\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f14e044431728-19\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-cn\">1070232</span><span class=\"crayon-h\">                      </span><span class=\"crayon-cn\">81776378</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4.38</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">1784208256</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">95.62</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">1865984634</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0126 seconds] -->\r\n<p>这上面可以看出，有95.62%的WAL空间都被FPI占据了（也就是说WAL至少被放大了20倍)，这个比例是相当高的。</p>\n<p>如果不修改pg_xlogdump的代码,也可以通过计算WAL距离的方式，算出准确的FPI比例。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f153609259079\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npostgres=# select pg_xlog_location_diff('556/B8B40CA0','556/49000000');\r\n pg_xlog_location_diff \r\n-----------------------\r\n            1874070688\r\n(1 row)\r\n\r\npostgres=# select 1784208256.0 / 1874070688;\r\n        ?column?        \r\n------------------------\r\n 0.95204960379808256197\r\n(1 row)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f153609259079-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f153609259079-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f153609259079-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f153609259079-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f153609259079-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f153609259079-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f153609259079-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f153609259079-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f153609259079-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f153609259079-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f153609259079-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f153609259079-1\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># select pg_xlog_location_diff('556/B8B40CA0','556/49000000');</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f153609259079-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_xlog_location_diff</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f153609259079-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f153609259079-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">1874070688</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f153609259079-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f153609259079-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f153609259079-7\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># select 1784208256.0 / 1874070688;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f153609259079-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">column</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f153609259079-9\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f153609259079-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.95204960379808256197</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f153609259079-11\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3><a id=\"user-content-wal的优化\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#wal%E7%9A%84%E4%BC%98%E5%8C%96\"></a>WAL的优化</h3>\n<p>在应用的写负载不变的情况下，减少WAL生成量主要有下面几种办法。</p>\n<ol>\n<li>延长checkpoint时间间隔<br>\nFPI产生于checkpoint之后第一次变脏的page，在下次checkpoint到来之前，已经输出过PFI的page是不需要再次输出FPI的。因此checkpoint时间间隔越长，FPI产生的频度会越低。增大checkpoint_timeout和max_wal_size可以延长checkpoint时间间隔。</li>\n<li>增加HOT_UPDATE比例<br>\n普通的UPDATE经常需要更新2个数据块，并且可能还要更新索引page，这些又都有可能产生FPI。而HOT_UPDATE只修改1个数据块，需要写的WAL量也会相应减少。</li>\n<li>压缩<br>\nPostgreSQL9.5新增加了一个wal_compression参数，设为on可以对FPI进行压缩，削减WAL的大小。另外还可以在外部通过SSL/SSH的压缩功能减少主备间的通信流量，以及自定义归档脚本对归档的WAL进行压缩。</li>\n<li>关闭全页写<br>\n这是一个立竿见影但也很危险的办法，如果底层的文件系统或储存支持原子写可以考虑。因为很多部署环境都不具备安全的关闭全页写的条件，下文不对该方法做展开。</li>\n</ol>\n<h4><a id=\"user-content-延长checkpoint时间\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E5%BB%B6%E9%95%BFcheckpoint%E6%97%B6%E9%97%B4\"></a>延长checkpoint时间</h4>\n<p>首先优化checkpoint相关参数</p>\n<p>postgres.conf:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f15a003031645\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshared_buffers = 32GB\r\ncheckpoint_completion_target = 0.1\r\ncheckpoint_timeout = 60min\r\nmin_wal_size = 4GB\r\nmax_wal_size = 64GB\r\nfull_page_writes = on\r\nwal_log_hints = on\r\nwal_level = replica\r\nwal_keep_segments = 1000</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f15a003031645-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f15a003031645-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f15a003031645-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f15a003031645-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f15a003031645-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f15a003031645-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f15a003031645-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f15a003031645-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f15a003031645-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f15a003031645-1\"><span class=\"crayon-v\">shared_buffers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32GB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f15a003031645-2\"><span class=\"crayon-v\">checkpoint_completion_target</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f15a003031645-3\"><span class=\"crayon-v\">checkpoint_timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60min</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f15a003031645-4\"><span class=\"crayon-v\">min_wal_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4GB</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f15a003031645-5\"><span class=\"crayon-v\">max_wal_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64GB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f15a003031645-6\"><span class=\"crayon-v\">full_page_writes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">on</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f15a003031645-7\"><span class=\"crayon-v\">wal_log_hints</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">on</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f15a003031645-8\"><span class=\"crayon-v\">wal_level</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">replica</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f15a003031645-9\"><span class=\"crayon-v\">wal_keep_segments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>然后，手工发起一次checkpoint</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f160837361223\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ psql -c \"checkpoint\"\r\nCHECKPOINT</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f160837361223-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f160837361223-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f160837361223-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"checkpoint\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f160837361223-2\"><span class=\"crayon-v\">CHECKPOINT</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>再压测10w个事务，并连续测试10次</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f163956294751\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ psql -c \"select pg_current_xlog_location()\"  ; pgbench -n -c 100 -j 100 -t 1000 ;psql -c \"select pg_current_xlog_location()\"\r\n pg_current_xlog_location \r\n--------------------------\r\n 558/47542B08\r\n(1 row)\r\n\r\ntransaction type: &lt;builtin: TPC-B (sort of)&gt;\r\nscaling factor: 1000\r\nquery mode: simple\r\nnumber of clients: 100\r\nnumber of threads: 100\r\nnumber of transactions per client: 1000\r\nnumber of transactions actually processed: 100000/100000\r\nlatency average = 7.771 ms\r\ntps = 12868.123227 (including connections establishing)\r\ntps = 12896.084970 (excluding connections establishing)\r\n pg_current_xlog_location \r\n--------------------------\r\n 558/A13DF908\r\n(1 row)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f163956294751-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f163956294751-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"select pg_current_xlog_location()\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"select pg_current_xlog_location()\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">558</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">47542B08</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-7\"><span class=\"crayon-e\">transaction </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">builtin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TPC</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sort </span><span class=\"crayon-v\">of</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-8\"><span class=\"crayon-e\">scaling </span><span class=\"crayon-v\">factor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-9\"><span class=\"crayon-e\">query </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">simple</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-10\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">clients</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-11\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">threads</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-12\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">per </span><span class=\"crayon-v\">client</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-13\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">actually </span><span class=\"crayon-v\">processed</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">100000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-14\"><span class=\"crayon-e\">latency </span><span class=\"crayon-v\">average</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.771</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ms</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-15\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12868.123227</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">including </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-16\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12896.084970</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">excluding </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-18\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f163956294751-19\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">558</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">A13DF908</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f163956294751-20\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p>测试结果如下</p>\n<p>第1次执行</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f167145623822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ ./pg_xlogdump_ex --stats=record -s 558/47542B08 -e 558/A13DF908 \r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                           1933 (  0.23)                94717 (  0.15)             15612140 (  1.09)             15706857 (  1.05)\r\nTransaction/COMMIT                        100000 ( 11.89)              3400000 (  5.26)                    0 (  0.00)              3400000 (  0.23)\r\nCLOG/ZEROPAGE                                  3 (  0.00)                   90 (  0.00)                    0 (  0.00)                   90 (  0.00)\r\nStandby/RUNNING_XACTS                          1 (  0.00)                  453 (  0.00)                    0 (  0.00)                  453 (  0.00)\r\nHeap/INSERT                                99357 ( 11.82)              7849103 ( 12.14)                25680 (  0.00)              7874783 (  0.52)\r\nHeap/UPDATE                               163254 ( 19.42)             22354169 ( 34.58)               351364 (  0.02)             22705533 (  1.51)\r\nHeap/HOT_UPDATE                           134045 ( 15.94)              9646593 ( 14.92)               384948 (  0.03)             10031541 (  0.67)\r\nHeap/LOCK                                 172576 ( 20.52)              9800924 ( 15.16)            778259316 ( 54.15)            788060240 ( 52.47)\r\nHeap/INSERT+INIT                             643 (  0.08)                50797 (  0.08)                    0 (  0.00)                50797 (  0.00)\r\nHeap/UPDATE+INIT                            2701 (  0.32)               371044 (  0.57)                    0 (  0.00)               371044 (  0.02)\r\nBtree/INSERT_LEAF                         165561 ( 19.69)              9643359 ( 14.92)            642548940 ( 44.70)            652192299 ( 43.42)\r\nBtree/INSERT_UPPER                           394 (  0.05)                28236 (  0.04)                56324 (  0.00)                84560 (  0.01)\r\nBtree/SPLIT_L                                228 (  0.03)               811172 (  1.25)                57280 (  0.00)               868452 (  0.06)\r\nBtree/SPLIT_R                                168 (  0.02)               595137 (  0.92)                64740 (  0.00)               659877 (  0.04)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                     840864                      64645794 [4.30%]            1437360732 [95.70%]           1502006526 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f167145623822-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f167145623822-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlogdump_ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">558</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">47542B08</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">558</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">A13DF908 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">1933</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.23</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">94717</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">15612140</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">15706857</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.05</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                        </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.89</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3400000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.26</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3400000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.23</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-6\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-7\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">453</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">453</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-8\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">99357</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.82</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7849103</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.14</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">25680</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7874783</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.52</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-9\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">163254</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19.42</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">22354169</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34.58</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">351364</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">22705533</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.51</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">134045</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.94</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9646593</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.92</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">384948</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">10031541</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.67</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">172576</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.52</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9800924</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">778259316</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">54.15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">788060240</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52.47</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">643</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">50797</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">50797</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">2701</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">371044</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.57</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">371044</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-14\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                         </span><span class=\"crayon-cn\">165561</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19.69</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9643359</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.92</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">642548940</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">44.70</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">652192299</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">43.42</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-15\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">394</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">28236</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">56324</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">84560</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-16\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">228</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">811172</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">57280</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">868452</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-17\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">168</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">595137</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.92</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">64740</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">659877</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f167145623822-18\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f167145623822-19\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                     </span><span class=\"crayon-cn\">840864</span><span class=\"crayon-h\">                      </span><span class=\"crayon-cn\">64645794</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4.30</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">1437360732</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">95.70</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">1502006526</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0129 seconds] -->\r\n<p>第5次执行</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f16c660417694\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ ./pg_xlogdump_ex --stats=record -s 559/6312AD98 -e 559/94AC4148\r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                           1425 (  0.17)                69825 (  0.11)             11508300 (  1.51)             11578125 (  1.40)\r\nTransaction/COMMIT                        100000 ( 12.13)              3400000 (  5.37)                    0 (  0.00)              3400000 (  0.41)\r\nCLOG/ZEROPAGE                                  3 (  0.00)                   90 (  0.00)                    0 (  0.00)                   90 (  0.00)\r\nStandby/RUNNING_XACTS                          1 (  0.00)                  453 (  0.00)                    0 (  0.00)                  453 (  0.00)\r\nHeap/INSERT                                99296 ( 12.05)              7844384 ( 12.38)                    0 (  0.00)              7844384 (  0.95)\r\nHeap/UPDATE                               155408 ( 18.85)             21689908 ( 34.24)                    0 (  0.00)             21689908 (  2.62)\r\nHeap/HOT_UPDATE                           142042 ( 17.23)             10222825 ( 16.14)                    0 (  0.00)             10222825 (  1.23)\r\nHeap/LOCK                                 164776 ( 19.99)              9274729 ( 14.64)            608647740 ( 79.60)            617922469 ( 74.63)\r\nHeap/INSERT+INIT                             704 (  0.09)                55616 (  0.09)                    0 (  0.00)                55616 (  0.01)\r\nHeap/UPDATE+INIT                            2550 (  0.31)               355951 (  0.56)                    0 (  0.00)               355951 (  0.04)\r\nBtree/INSERT_LEAF                         157807 ( 19.14)              9886864 ( 15.61)            144491940 ( 18.90)            154378804 ( 18.64)\r\nBtree/INSERT_UPPER                           151 (  0.02)                10872 (  0.02)                    0 (  0.00)                10872 (  0.00)\r\nBtree/SPLIT_L                                128 (  0.02)               455424 (  0.72)                    0 (  0.00)               455424 (  0.06)\r\nBtree/SPLIT_R                                 23 (  0.00)                81466 (  0.13)                    0 (  0.00)                81466 (  0.01)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                     824314                      63348407 [7.65%]             764647980 [92.35%]            827996387 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f16c660417694-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f16c660417694-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlogdump_ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">559</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6312AD98</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">559</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">94AC4148</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">1425</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.17</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">69825</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">11508300</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.51</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">11578125</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.40</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                        </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.13</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3400000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.37</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3400000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.41</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-6\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-7\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">453</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">453</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-8\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">99296</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.05</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7844384</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.38</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7844384</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.95</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-9\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">155408</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18.85</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">21689908</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34.24</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">21689908</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.62</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">142042</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17.23</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">10222825</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.14</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">10222825</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.23</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">164776</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19.99</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9274729</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.64</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">608647740</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">79.60</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">617922469</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">74.63</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">704</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">55616</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">55616</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">2550</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">355951</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.56</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">355951</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-14\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                         </span><span class=\"crayon-cn\">157807</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19.14</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9886864</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.61</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">144491940</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18.90</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">154378804</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18.64</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-15\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">151</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">10872</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">10872</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-16\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">128</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">455424</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.72</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">455424</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-17\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">81466</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.13</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">81466</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f16c660417694-18\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f16c660417694-19\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                     </span><span class=\"crayon-cn\">824314</span><span class=\"crayon-h\">                      </span><span class=\"crayon-cn\">63348407</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7.65</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">764647980</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">92.35</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">827996387</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0128 seconds] -->\r\n<p>第10次执行</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f173397168545\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ ./pg_xlogdump_ex --stats=record -s 55A/3347F298 -e 55A/5420F700\r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                           1151 (  0.13)                56399 (  0.09)              9295592 (  1.93)              9351991 (  1.71)\r\nTransaction/COMMIT                        100000 ( 11.61)              3400000 (  5.15)                    0 (  0.00)              3400000 (  0.62)\r\nCLOG/ZEROPAGE                                  3 (  0.00)                   90 (  0.00)                    0 (  0.00)                   90 (  0.00)\r\nStandby/RUNNING_XACTS                          1 (  0.00)                   62 (  0.00)                    0 (  0.00)                   62 (  0.00)\r\nHeap/INSERT                                99322 ( 11.53)              7846438 ( 11.88)                    0 (  0.00)              7846438 (  1.43)\r\nHeap/UPDATE                               173901 ( 20.19)             23253149 ( 35.21)                    0 (  0.00)             23253149 (  4.25)\r\nHeap/HOT_UPDATE                           123452 ( 14.33)              8884888 ( 13.45)                    0 (  0.00)              8884888 (  1.62)\r\nHeap/LOCK                                 183501 ( 21.30)             10187069 ( 15.43)            449049828 ( 93.22)            459236897 ( 83.84)\r\nHeap/INSERT+INIT                             678 (  0.08)                53562 (  0.08)                    0 (  0.00)                53562 (  0.01)\r\nHeap/UPDATE+INIT                            2647 (  0.31)               365259 (  0.55)                    0 (  0.00)               365259 (  0.07)\r\nBtree/INSERT_LEAF                         176343 ( 20.47)             11251588 ( 17.04)             23338600 (  4.85)             34590188 (  6.32)\r\nBtree/INSERT_UPPER                           205 (  0.02)                14760 (  0.02)                    0 (  0.00)                14760 (  0.00)\r\nBtree/SPLIT_L                                172 (  0.02)               611976 (  0.93)                    0 (  0.00)               611976 (  0.11)\r\nBtree/SPLIT_R                                 33 (  0.00)               116886 (  0.18)                    0 (  0.00)               116886 (  0.02)\r\nBtree/VACUUM                                   1 (  0.00)                   50 (  0.00)                    0 (  0.00)                   50 (  0.00)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                     861410                      66042176 [12.06%]            481684020 [87.94%]            547726196 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f173397168545-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f173397168545-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlogdump_ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55A</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3347F298</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55A</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5420F700</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">1151</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.13</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">56399</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9295592</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.93</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9351991</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.71</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                        </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.61</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3400000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3400000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.62</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-6\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-7\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">62</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">62</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-8\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">99322</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.53</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7846438</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.88</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7846438</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.43</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-9\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">173901</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.19</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">23253149</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">35.21</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">23253149</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.25</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">123452</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.33</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">8884888</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.45</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">8884888</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.62</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">183501</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.30</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">10187069</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.43</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">449049828</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">93.22</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">459236897</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">83.84</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">678</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">53562</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">53562</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">2647</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">365259</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.55</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">365259</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-14\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                         </span><span class=\"crayon-cn\">176343</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.47</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">11251588</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">23338600</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.85</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34590188</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6.32</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-15\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">205</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">14760</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">14760</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-16\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">172</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">611976</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.93</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">611976</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-17\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">116886</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.18</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">116886</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-18\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">VACUUM</span><span class=\"crayon-h\">                                   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">50</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">50</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f173397168545-19\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f173397168545-20\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                     </span><span class=\"crayon-cn\">861410</span><span class=\"crayon-h\">                      </span><span class=\"crayon-cn\">66042176</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12.06</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">481684020</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">87.94</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">547726196</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0135 seconds] -->\r\n<p>汇总如下:</p>\n<table>\n<tbody>\n<tr>\n<th>No</th>\n<th>tps</th>\n<th>非FPI大小</th>\n<th>WAL总量(字节)</th>\n<th>FPI比例(%)</th>\n<th>每事务产生的WAL(字节)</th>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td>1</td>\n<td>12896</td>\n<td>64645794</td>\n<td>1502006526</td>\n<td>95.70</td>\n<td>15020</td>\n</tr>\n<tr>\n<td>5</td>\n<td>12896</td>\n<td>63348407</td>\n<td>827996387</td>\n<td>92.35</td>\n<td>8279</td>\n</tr>\n<tr>\n<td>10</td>\n<td>12896</td>\n<td>66042176</td>\n<td>547726196</td>\n<td>87.94</td>\n<td>5477</td>\n</tr>\n</tbody>\n</table>\n<p>不难看出非FPI大小是相对固定的，FPI的大小越来越小，这也证实了延长checkpoint间隔对削减WAL大小的作用。</p>\n<h4><a id=\"user-content-增加hot_update比例\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E5%A2%9E%E5%8A%A0hot_update%E6%AF%94%E4%BE%8B\"></a>增加HOT_UPDATE比例</h4>\n<p>HOT_UPDATE比例过低的一个很常见的原因是更新频繁的表的fillfactor设置不恰当。fillfactor的默认值为100%，可以先将其调整为90%。</p>\n<p>对于宽表，要进一步减小fillfactor使得至少可以保留一个tuple的空闲空间。可以查询pg_class系统表估算平均tuple大小，并算出合理的fillfactor值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f179372972338\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npostgres=# select 1 - relpages/reltuples max_fillfactor from pg_class where relname='big_tb';\r\n    max_fillfactor    \r\n----------------------\r\n 0.69799901185770750988\r\n(1 row)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f179372972338-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f179372972338-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f179372972338-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f179372972338-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f179372972338-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f179372972338-1\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># select 1 - relpages/reltuples max_fillfactor from pg_class where relname='big_tb';</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f179372972338-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">max_fillfactor</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f179372972338-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f179372972338-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.69799901185770750988</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f179372972338-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>再上面估算出的69%的基础上，可以把fillfactor再稍微设小一点，比如设成65% 。</p>\n<p>在前面优化过的参数的基础上，先保持fillfactor=100不变，执行100w事务的压测</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f17f641775870\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ psql -c \"checkpoint;select pg_current_xlog_location()\"  ; pgbench -n -c 100 -j 100 -t 10000 ;psql -c \"select pg_current_xlog_location()\"\r\n pg_current_xlog_location \r\n--------------------------\r\n 55A/66715CC0\r\n(1 row)\r\n\r\ntransaction type: &lt;builtin: TPC-B (sort of)&gt;\r\nscaling factor: 1000\r\nquery mode: simple\r\nnumber of clients: 100\r\nnumber of threads: 100\r\nnumber of transactions per client: 10000\r\nnumber of transactions actually processed: 1000000/1000000\r\nlatency average = 7.943 ms\r\ntps = 12589.895315 (including connections establishing)\r\ntps = 12592.623734 (excluding connections establishing)\r\n pg_current_xlog_location \r\n--------------------------\r\n 55C/7C747F20\r\n(1 row)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f17f641775870-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f17f641775870-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"checkpoint;select pg_current_xlog_location()\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"select pg_current_xlog_location()\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55A</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">66715CC0</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-7\"><span class=\"crayon-e\">transaction </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">builtin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TPC</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sort </span><span class=\"crayon-v\">of</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-8\"><span class=\"crayon-e\">scaling </span><span class=\"crayon-v\">factor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-9\"><span class=\"crayon-e\">query </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">simple</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-10\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">clients</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-11\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">threads</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-12\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">per </span><span class=\"crayon-v\">client</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-13\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">actually </span><span class=\"crayon-v\">processed</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1000000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-14\"><span class=\"crayon-e\">latency </span><span class=\"crayon-v\">average</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.943</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ms</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-15\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12589.895315</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">including </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-16\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12592.623734</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">excluding </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-18\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f17f641775870-19\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55C</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7C747F20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f17f641775870-20\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>生成的WAL统计如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f185034317530\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ ./pg_xlogdump_ex --stats=record -s 55A/66715CC0 -e 55C/7C747F20\r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                          30699 (  0.36)              1504251 (  0.23)            248063160 (  3.00)            249567411 (  2.80)\r\nTransaction/COMMIT                       1000000 ( 11.80)             34000000 (  5.15)                    0 (  0.00)             34000000 (  0.38)\r\nTransaction/COMMIT                             3 (  0.00)                  502 (  0.00)                    0 (  0.00)                  502 (  0.00)\r\nCLOG/ZEROPAGE                                 31 (  0.00)                  930 (  0.00)                    0 (  0.00)                  930 (  0.00)\r\nStandby/RUNNING_XACTS                          6 (  0.00)                 2226 (  0.00)                    0 (  0.00)                 2226 (  0.00)\r\nStandby/INVALIDATIONS                          3 (  0.00)                  414 (  0.00)                    0 (  0.00)                  414 (  0.00)\r\nHeap/INSERT                               993655 ( 11.72)             78496345 ( 11.90)               135164 (  0.00)             78631509 (  0.88)\r\nHeap/UPDATE                              1658858 ( 19.57)            225826642 ( 34.23)               455368 (  0.01)            226282010 (  2.54)\r\nHeap/HOT_UPDATE                          1314890 ( 15.51)             94634083 ( 14.35)               344324 (  0.00)             94978407 (  1.07)\r\nHeap/LOCK                                1757258 ( 20.73)             98577892 ( 14.94)           5953842520 ( 72.12)           6052420412 ( 67.89)\r\nHeap/INPLACE                                   9 (  0.00)                 1730 (  0.00)                 6572 (  0.00)                 8302 (  0.00)\r\nHeap/INSERT+INIT                            6345 (  0.07)               501255 (  0.08)                    0 (  0.00)               501255 (  0.01)\r\nHeap/UPDATE+INIT                           26265 (  0.31)              3635102 (  0.55)                    0 (  0.00)              3635102 (  0.04)\r\nBtree/INSERT_LEAF                        1680195 ( 19.82)            104535607 ( 15.85)           2052212660 ( 24.86)           2156748267 ( 24.19)\r\nBtree/INSERT_UPPER                          4928 (  0.06)               354552 (  0.05)               129128 (  0.00)               483680 (  0.01)\r\nBtree/SPLIT_L                               4854 (  0.06)             17269109 (  2.62)                22080 (  0.00)             17291189 (  0.19)\r\nBtree/SPLIT_R                                 95 (  0.00)               336650 (  0.05)                    0 (  0.00)               336650 (  0.00)\r\nBtree/VACUUM                                   3 (  0.00)                  155 (  0.00)                 2220 (  0.00)                 2375 (  0.00)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                    8478097                     659677445 [7.40%]            8255213196 [92.60%]           8914890641 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f185034317530-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f185034317530-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlogdump_ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55A</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">66715CC0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55C</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7C747F20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">30699</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.36</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1504251</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.23</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">248063160</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">249567411</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.80</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                       </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.80</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.38</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-6\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">502</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">502</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-7\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">930</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">930</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-8\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">2226</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">2226</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-9\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INVALIDATIONS</span><span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">414</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">414</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">993655</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.72</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">78496345</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.90</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">135164</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">78631509</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.88</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                              </span><span class=\"crayon-cn\">1658858</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19.57</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">225826642</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34.23</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">455368</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">226282010</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.54</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">1314890</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.51</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">94634083</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.35</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">344324</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">94978407</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.07</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">1757258</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.73</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">98577892</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.94</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">5953842520</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">72.12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">6052420412</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">67.89</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-14\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INPLACE</span><span class=\"crayon-h\">                                   </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1730</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">6572</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">8302</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-15\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">6345</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">501255</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">501255</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-16\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">26265</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3635102</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.55</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3635102</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-17\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                        </span><span class=\"crayon-cn\">1680195</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19.82</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">104535607</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.85</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">2052212660</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24.86</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">2156748267</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24.19</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-18\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">4928</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">354552</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">129128</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">483680</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-19\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">4854</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">17269109</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.62</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">22080</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">17291189</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.19</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-20\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">95</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">336650</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">336650</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-21\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">VACUUM</span><span class=\"crayon-h\">                                   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">155</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">2220</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">2375</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f185034317530-22\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f185034317530-23\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-cn\">8478097</span><span class=\"crayon-h\">                     </span><span class=\"crayon-cn\">659677445</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7.40</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">8255213196</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">92.60</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">8914890641</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0155 seconds] -->\r\n<p>设置fillfactor=90</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f18b526462851\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npostgres=# alter table pgbench_accounts set (fillfactor=90);\r\nALTER TABLE\r\npostgres=# vacuum full pgbench_accounts;\r\nVACUUM\r\npostgres=# alter table pgbench_tellers set (fillfactor=90);\r\nALTER TABLE\r\npostgres=# vacuum full pgbench_tellers;\r\nVACUUM\r\npostgres=# alter table pgbench_branches set (fillfactor=90);\r\nALTER TABLE\r\npostgres=# vacuum full pgbench_branches;\r\nVACUUM</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f18b526462851-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f18b526462851-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f18b526462851-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f18b526462851-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f18b526462851-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f18b526462851-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f18b526462851-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f18b526462851-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f18b526462851-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f18b526462851-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f18b526462851-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f18b526462851-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f18b526462851-1\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># alter table pgbench_accounts set (fillfactor=90);</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f18b526462851-2\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f18b526462851-3\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># vacuum full pgbench_accounts;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f18b526462851-4\"><span class=\"crayon-e\">VACUUM</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f18b526462851-5\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># alter table pgbench_tellers set (fillfactor=90);</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f18b526462851-6\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f18b526462851-7\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># vacuum full pgbench_tellers;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f18b526462851-8\"><span class=\"crayon-e\">VACUUM</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f18b526462851-9\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># alter table pgbench_branches set (fillfactor=90);</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f18b526462851-10\"><span class=\"crayon-e\">ALTER </span><span class=\"crayon-e\">TABLE</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f18b526462851-11\"><span class=\"crayon-v\">postgres</span><span class=\"crayon-o\">=</span><span class=\"crayon-p\"># vacuum full pgbench_branches;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f18b526462851-12\"><span class=\"crayon-v\">VACUUM</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>再次测试</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f190307345834\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ psql -c \"checkpoint;select pg_current_xlog_location()\"  ; pgbench -n -c 100 -j 100 -t 10000 ;psql -c \"select pg_current_xlog_location()\"\r\n pg_current_xlog_location \r\n--------------------------\r\n 561/78BD2460\r\n(1 row)\r\n\r\ntransaction type: &lt;builtin: TPC-B (sort of)&gt;\r\nscaling factor: 1000\r\nquery mode: simple\r\nnumber of clients: 100\r\nnumber of threads: 100\r\nnumber of transactions per client: 10000\r\nnumber of transactions actually processed: 1000000/1000000\r\nlatency average = 7.570 ms\r\ntps = 13210.665959 (including connections establishing)\r\ntps = 13212.956814 (excluding connections establishing)\r\n pg_current_xlog_location \r\n--------------------------\r\n 562/F91436D8\r\n(1 row)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f190307345834-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f190307345834-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"checkpoint;select pg_current_xlog_location()\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"select pg_current_xlog_location()\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">561</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">78BD2460</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-7\"><span class=\"crayon-e\">transaction </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">builtin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TPC</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sort </span><span class=\"crayon-v\">of</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-8\"><span class=\"crayon-e\">scaling </span><span class=\"crayon-v\">factor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-9\"><span class=\"crayon-e\">query </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">simple</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-10\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">clients</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-11\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">threads</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-12\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">per </span><span class=\"crayon-v\">client</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-13\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">actually </span><span class=\"crayon-v\">processed</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1000000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-14\"><span class=\"crayon-e\">latency </span><span class=\"crayon-v\">average</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.570</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ms</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-15\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13210.665959</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">including </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-16\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13212.956814</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">excluding </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-18\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f190307345834-19\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">562</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">F91436D8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f190307345834-20\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>生成的WAL统计如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f194843576714\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ ./pg_xlogdump_ex --stats=record -s 561/78BD2460 -e 562/F91436D8\r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                          13529 (  0.22)               662921 (  0.16)             99703804 (  1.66)            100366725 (  1.57)\r\nTransaction/COMMIT                       1000000 ( 16.09)             34000000 (  8.07)                    0 (  0.00)             34000000 (  0.53)\r\nTransaction/COMMIT                             4 (  0.00)                 1035 (  0.00)                    0 (  0.00)                 1035 (  0.00)\r\nCLOG/ZEROPAGE                                 30 (  0.00)                  900 (  0.00)                    0 (  0.00)                  900 (  0.00)\r\nStandby/RUNNING_XACTS                          5 (  0.00)                 1913 (  0.00)                    0 (  0.00)                 1913 (  0.00)\r\nStandby/INVALIDATIONS                          2 (  0.00)                  276 (  0.00)                    0 (  0.00)                  276 (  0.00)\r\nHeap/INSERT                               993629 ( 15.98)             78494191 ( 18.63)               362908 (  0.01)             78857099 (  1.23)\r\nHeap/DELETE                                    1 (  0.00)                   59 (  0.00)                 7972 (  0.00)                 8031 (  0.00)\r\nHeap/UPDATE                               553073 (  8.90)             47100570 ( 11.18)                48188 (  0.00)             47148758 (  0.74)\r\nHeap/HOT_UPDATE                          2438157 ( 39.22)            170238869 ( 40.40)           5809935900 ( 96.97)           5980174769 ( 93.25)\r\nHeap/LOCK                                 635714 ( 10.23)             34328566 (  8.15)                16200 (  0.00)             34344766 (  0.54)\r\nHeap/INPLACE                                  10 (  0.00)                 1615 (  0.00)                22692 (  0.00)                24307 (  0.00)\r\nHeap/INSERT+INIT                            6372 (  0.10)               503388 (  0.12)                    0 (  0.00)               503388 (  0.01)\r\nHeap/UPDATE+INIT                            8804 (  0.14)               741136 (  0.18)                    0 (  0.00)               741136 (  0.01)\r\nBtree/INSERT_LEAF                         556456 (  8.95)             35492624 (  8.42)             81089180 (  1.35)            116581804 (  1.82)\r\nBtree/INSERT_UPPER                          5422 (  0.09)               389735 (  0.09)               328108 (  0.01)               717843 (  0.01)\r\nBtree/SPLIT_L                               5036 (  0.08)             17918305 (  4.25)               154980 (  0.00)             18073285 (  0.28)\r\nBtree/SPLIT_R                                414 (  0.01)              1466691 (  0.35)                22140 (  0.00)              1488831 (  0.02)\r\nBtree/VACUUM                                   2 (  0.00)                  100 (  0.00)                    0 (  0.00)                  100 (  0.00)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                    6216660                     421342894 [6.57%]            5991692072 [93.43%]           6413034966 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f194843576714-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f194843576714-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlogdump_ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">561</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">78BD2460</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">562</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">F91436D8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">13529</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.22</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">662921</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">99703804</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.66</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">100366725</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.57</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                       </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.07</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.53</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-6\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1035</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1035</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-7\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">900</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">900</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-8\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1913</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1913</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-9\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INVALIDATIONS</span><span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">276</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">276</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">993629</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.98</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">78494191</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18.63</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">362908</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">78857099</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.23</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">DELETE</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">7972</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">8031</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">553073</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.90</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">47100570</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.18</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">48188</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">47148758</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.74</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">2438157</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">39.22</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">170238869</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40.40</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">5809935900</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96.97</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">5980174769</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">93.25</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-14\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">635714</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.23</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34328566</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">16200</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34344766</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.54</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-15\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INPLACE</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1615</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">22692</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">24307</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-16\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">6372</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">503388</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">503388</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-17\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">8804</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.14</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">741136</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.18</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">741136</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-18\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                         </span><span class=\"crayon-cn\">556456</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.95</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">35492624</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.42</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">81089180</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.35</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">116581804</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.82</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-19\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">5422</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">389735</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">328108</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">717843</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-20\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">5036</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">17918305</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">154980</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">18073285</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.28</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-21\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">414</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1466691</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.35</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">22140</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1488831</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-22\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">VACUUM</span><span class=\"crayon-h\">                                   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f194843576714-23\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f194843576714-24\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-cn\">6216660</span><span class=\"crayon-h\">                     </span><span class=\"crayon-cn\">421342894</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6.57</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">5991692072</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">93.43</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">6413034966</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0159 seconds] -->\r\n<p>设置fillfactor=90后，生成的WAL量从8914890641减少到6413034966。</p>\n<h4><a id=\"user-content-设置wal压缩\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E8%AE%BE%E7%BD%AEwal%E5%8E%8B%E7%BC%A9\"></a>设置WAL压缩</h4>\n<p>修改postgres.conf，开启WAL压缩</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f19a710146152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwal_compression = on</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f19a710146152-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f19a710146152-1\"><span class=\"crayon-v\">wal_compression</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">on</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>再次测试</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f1a0122991267\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ psql -c \"checkpoint;select pg_current_xlog_location()\"  ; pgbench -n -c 100 -j 100 -t 10000 ;psql -c \"select pg_current_xlog_location()\"\r\n pg_current_xlog_location \r\n--------------------------\r\n 562/F91B5978\r\n(1 row)\r\n\r\ntransaction type: &lt;builtin: TPC-B (sort of)&gt;\r\nscaling factor: 1000\r\nquery mode: simple\r\nnumber of clients: 100\r\nnumber of threads: 100\r\nnumber of transactions per client: 10000\r\nnumber of transactions actually processed: 1000000/1000000\r\nlatency average = 8.295 ms\r\ntps = 12056.091399 (including connections establishing)\r\ntps = 12059.453725 (excluding connections establishing)\r\n pg_current_xlog_location \r\n--------------------------\r\n 563/39880390\r\n(1 row)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a0122991267-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a0122991267-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"checkpoint;select pg_current_xlog_location()\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">psql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"select pg_current_xlog_location()\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">562</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">F91B5978</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-7\"><span class=\"crayon-e\">transaction </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">builtin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TPC</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sort </span><span class=\"crayon-v\">of</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-8\"><span class=\"crayon-e\">scaling </span><span class=\"crayon-v\">factor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-9\"><span class=\"crayon-e\">query </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">simple</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-10\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">clients</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-11\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">threads</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-12\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">per </span><span class=\"crayon-v\">client</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-13\"><span class=\"crayon-e\">number </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">transactions </span><span class=\"crayon-e\">actually </span><span class=\"crayon-v\">processed</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1000000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-14\"><span class=\"crayon-e\">latency </span><span class=\"crayon-v\">average</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.295</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ms</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-15\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12056.091399</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">including </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-16\"><span class=\"crayon-v\">tps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12059.453725</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">excluding </span><span class=\"crayon-e\">connections </span><span class=\"crayon-v\">establishing</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pg_current_xlog_location</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-18\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a0122991267-19\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">563</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">39880390</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a0122991267-20\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p>生成的WAL统计如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a029de37f1a4088528399\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-bash-4.1$ ./pg_xlogdump_ex --stats=record -s 562/F91B5978 -e 563/39880390\r\nType                                           N      (%)          Record size      (%)             FPI size      (%)        Combined size      (%)\r\n----                                           -      ---          -----------      ---             --------      ---        -------------      ---\r\nXLOG/FPI_FOR_HINT                           7557 (  0.12)               385375 (  0.09)              5976157 (  0.94)              6361532 (  0.60)\r\nTransaction/COMMIT                       1000000 ( 15.55)             34000000 (  7.97)                    0 (  0.00)             34000000 (  3.20)\r\nTransaction/COMMIT                             2 (  0.00)                  356 (  0.00)                    0 (  0.00)                  356 (  0.00)\r\nCLOG/ZEROPAGE                                 31 (  0.00)                  930 (  0.00)                    0 (  0.00)                  930 (  0.00)\r\nStandby/RUNNING_XACTS                          5 (  0.00)                 1937 (  0.00)                    0 (  0.00)                 1937 (  0.00)\r\nStandby/INVALIDATIONS                          4 (  0.00)                  504 (  0.00)                    0 (  0.00)                  504 (  0.00)\r\nHeap/INSERT                               993632 ( 15.45)             78494714 ( 18.40)               205874 (  0.03)             78700588 (  7.40)\r\nHeap/UPDATE                               663845 ( 10.32)             56645461 ( 13.28)                39548 (  0.01)             56685009 (  5.33)\r\nHeap/HOT_UPDATE                          2326238 ( 36.17)            163847160 ( 38.41)            604564022 ( 94.97)            768411182 ( 72.27)\r\nHeap/LOCK                                 747342 ( 11.62)             40358851 (  9.46)              1713055 (  0.27)             42071906 (  3.96)\r\nHeap/INPLACE                                   9 (  0.00)                 1425 (  0.00)                 5160 (  0.00)                 6585 (  0.00)\r\nHeap/INSERT+INIT                            6368 (  0.10)               503072 (  0.12)                    0 (  0.00)               503072 (  0.05)\r\nHeap/UPDATE+INIT                            9927 (  0.15)               839135 (  0.20)                    0 (  0.00)               839135 (  0.08)\r\nBtree/INSERT_LEAF                         671387 ( 10.44)             42884429 ( 10.05)             19691394 (  3.09)             62575823 (  5.89)\r\nBtree/INSERT_UPPER                          2385 (  0.04)               170946 (  0.04)               210384 (  0.03)               381330 (  0.04)\r\nBtree/SPLIT_L                               1438 (  0.02)              5107876 (  1.20)              2613608 (  0.41)              7721484 (  0.73)\r\nBtree/SPLIT_R                                947 (  0.01)              3360714 (  0.79)              1563260 (  0.25)              4923974 (  0.46)\r\nBtree/VACUUM                                   3 (  0.00)                  150 (  0.00)                    0 (  0.00)                  150 (  0.00)\r\n                                        --------                      --------                      --------                      --------\r\nTotal                                    6431120                     426603035 [40.12%]            636582462 [59.88%]           1063185497 [100%]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a029de37f1a4088528399-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a029de37f1a4088528399-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-1\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.1</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pg_xlogdump_ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">stats</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">562</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">F91B5978</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">563</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">39880390</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-2\"><span class=\"crayon-i\">Type</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">Record </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">FPI </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Combined </span><span class=\"crayon-e\">size</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                                           </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-4\"><span class=\"crayon-v\">XLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">FPI_FOR</span><span class=\"crayon-sy\">_</span>HINT<span class=\"crayon-h\">                           </span><span class=\"crayon-cn\">7557</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">385375</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5976157</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.94</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">6361532</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.60</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-5\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                       </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.55</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.97</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">34000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.20</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-6\"><span class=\"crayon-v\">Transaction</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">COMMIT</span><span class=\"crayon-h\">                             </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">356</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">356</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-7\"><span class=\"crayon-v\">CLOG</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">ZEROPAGE</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">930</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">930</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-8\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">RUNNING</span><span class=\"crayon-sy\">_</span>XACTS<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1937</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1937</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-9\"><span class=\"crayon-v\">Standby</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INVALIDATIONS</span><span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">504</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">504</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-10\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INSERT</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">993632</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.45</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">78494714</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18.40</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">205874</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">78700588</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.40</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-11\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">UPDATE</span><span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">663845</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">56645461</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.28</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">39548</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">56685009</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.33</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-12\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HOT</span><span class=\"crayon-sy\">_</span>UPDATE<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">2326238</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">36.17</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">163847160</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">38.41</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">604564022</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">94.97</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">768411182</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">72.27</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-13\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">LOCK</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">747342</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.62</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">40358851</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9.46</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1713055</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.27</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">42071906</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.96</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-14\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">INPLACE</span><span class=\"crayon-h\">                                   </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1425</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">5160</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">6585</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-15\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">6368</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">503072</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">503072</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-16\"><span class=\"crayon-v\">Heap</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">UPDATE</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">INIT</span><span class=\"crayon-h\">                            </span><span class=\"crayon-cn\">9927</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">839135</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">839135</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-17\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>LEAF<span class=\"crayon-h\">                         </span><span class=\"crayon-cn\">671387</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.44</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">42884429</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.05</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">19691394</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.09</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">62575823</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.89</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-18\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">INSERT</span><span class=\"crayon-sy\">_</span>UPPER<span class=\"crayon-h\">                          </span><span class=\"crayon-cn\">2385</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">170946</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">210384</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">381330</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-19\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>L<span class=\"crayon-h\">                               </span><span class=\"crayon-cn\">1438</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">5107876</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">2613608</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.41</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7721484</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.73</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-20\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">SPLIT</span><span class=\"crayon-sy\">_</span>R<span class=\"crayon-h\">                                </span><span class=\"crayon-cn\">947</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3360714</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.79</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">1563260</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">4923974</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.46</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-21\"><span class=\"crayon-v\">Btree</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">VACUUM</span><span class=\"crayon-h\">                                   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">150</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">150</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a029de37f1a4088528399-22\"><span class=\"crayon-h\">                                        </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\">                      </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a029de37f1a4088528399-23\"><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-cn\">6431120</span><span class=\"crayon-h\">                     </span><span class=\"crayon-cn\">426603035</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">40.12</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">636582462</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">59.88</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">1063185497</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0154 seconds] -->\r\n<p>设置`wal_compression = on后，生成的WAL量从6413034966减少到1063185497。</p>\n<h4><a id=\"user-content-优化结果汇总\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E4%BC%98%E5%8C%96%E7%BB%93%E6%9E%9C%E6%B1%87%E6%80%BB\"></a>优化结果汇总</h4>\n<table>\n<tbody>\n<tr>\n<th>wal_compression</th>\n<th>fillfactor</th>\n<th>tps</th>\n<th>非FPI大小</th>\n<th>WAL总量(字节)</th>\n<th>FPI比例(%)</th>\n<th>HOT_UPDATE比例(%)</th>\n<th>每事务产生的WAL(字节)</th>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td>off</td>\n<td>100</td>\n<td>12592</td>\n<td>659677445</td>\n<td>8255213196</td>\n<td>92.60</td>\n<td>44</td>\n<td>8255</td>\n</tr>\n<tr>\n<td>off</td>\n<td>90</td>\n<td>13212</td>\n<td>421342894</td>\n<td>6413034966</td>\n<td>93.43</td>\n<td>81</td>\n<td>6413</td>\n</tr>\n<tr>\n<td>on</td>\n<td>90</td>\n<td>12059</td>\n<td>426603035</td>\n<td>1063185497</td>\n<td>59.88</td>\n<td>78</td>\n<td>1063</td>\n</tr>\n</tbody>\n</table>\n<p>仅仅调整wal_compression和fillfactor就削减了87%的WAL，这还没有算上延长checkpoint间隔带来的收益。</p>\n<h3><a id=\"user-content-总结\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E6%80%BB%E7%BB%93\"></a>总结</h3>\n<p>PostgreSQL在未经优化的情况下，20倍甚至更高的WAL写放大是很常见的，适当的优化之后应该可以减少到3倍以下。引入SSL/SSH压缩或归档压缩等外部手段还可以进一步减少WAL的生成量。</p>\n<h4><a id=\"user-content-如何判断是否需要优化wal\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E9%9C%80%E8%A6%81%E4%BC%98%E5%8C%96wal\"></a>如何判断是否需要优化WAL？</h4>\n<p>关于如何判断是否需要优化WAL，可以通过分析WAL，然后检查下面的条件，做一个粗略的判断：</p>\n<ul>\n<li>FPI比例高于70%</li>\n<li>HOT_UPDATE比例低于70%</li>\n</ul>\n<p>以上仅仅是粗略的经验值，仅供参考。并且这个FPI比例可能不适用于低写负载的系统，低写负载的系统FPI比例一定非常高，但是，低写负载系统由于写操作少，因此FPI比例即使高一点也没太大影响。</p>\n<h4><a id=\"user-content-优化wal的副作用\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E4%BC%98%E5%8C%96wal%E7%9A%84%E5%89%AF%E4%BD%9C%E7%94%A8\"></a>优化WAL的副作用</h4>\n<p>前面用到了3种优化手段，如果设置不当，也会产生副作用，具体如下：</p>\n<ol>\n<li>延长checkpoint时间间隔<br>\n导致crash恢复时间变长。crash恢复时需要回放的WAL日志量一般小于max_wal_size的一半，WAL回放速度(wal_compression=on时)一般是50MB/s~150MB/s之间。可以根据可容忍的最大crash恢复时间（有备机时，切备机可能比等待crash恢复更快），估算出允许的max_wal_size的最大值。</li>\n<li>调整fillfactor<br>\n过小的设置会浪费存储空间，这个不难理解。另外，对于频繁更新的表，即使把fillfactor设成100%，每个page里还是要有一部分空间被dead tuple占据，不会比设置一个合适的稍小的fillfactor更节省空间。</li>\n<li>设置wal_compression=on<br>\n需要额外占用CPU资源进行压缩，但根据实测的结果影响不大。</li>\n</ol>\n<h4><a id=\"user-content-其他\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E5%85%B6%E4%BB%96\"></a>其他</h4>\n<p>去年Uber放出了一篇把PostgreSQL说得一无是处的文章<a href=\"http://www.tuicool.com/articles/Zn2yeuu\">为什么Uber宣布从PostgreSQL切换到MySQL?</a>给PostgreSQL带来了很大负面影响。Uber文章中提到了PG的几个问题，每一个都被描述成无法逾越的“巨坑”。但实际上这些问题中，除了“写放大”，其它几个问题要么是无关痛痒要么是随着PG的版本升级早就不存在了。至于“写放大”，也是有解的。Uber的文章里没有提到他们在优化WAL写入量上做过什么有益的尝试，并且他们使用的PostgreSQL 9.2也是不支持wal_compression的，因此推断他们PG数据库很可能一直运行在20倍以上WAL写放大的完全未优化状态下。</p>\n<h3><a id=\"user-content-参考\" href=\"https://github.com/ChenHuajun/chenhuajun.github.io/blob/master/_posts/2017-06-10-%E5%A6%82%E4%BD%95%E9%81%8F%E5%88%B6PostgreSQL%20WAL%E7%9A%84%E7%96%AF%E7%8B%82%E5%A2%9E%E9%95%BF.md#%E5%8F%82%E8%80%83\"></a>参考</h3>\n<ul>\n<li><a href=\"http://www.pgcon.org/2016/schedule/events/947.en.html\">WAL Reduction</a></li>\n<li><a href=\"http://blog.jobbole.com/111058/\">也许 MySQL 适合 Uber，但它不一定适合你</a></li>\n<li><a href=\"https://yq.aliyun.com/articles/58421\">为PostgreSQL讨说法 – 浅析《UBER ENGINEERING SWITCHED FROM POSTGRES TO MYSQL》</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112842\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112842votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112842\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/03/PostgreSQL-logo.gif"], "create_date": "2017/11/07", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,数据库", "url": "http://blog.jobbole.com/112842/", "url_id": "3fa6fc57ca823b65c7d39acd187d6438"}
{"title": "解雇了天才员工，这是我们做过最正确的决定", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.org/we-fired-our-top-talent-best-decision-we-ever-made-4c0a99728fde\">Jonathan Solórzano-Hamilton</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><div>\n<blockquote><p>“你们不会理解我创造的一切。我 TMD 就是爱因斯坦，你们都是玩泥巴的小屁孩。”</p></blockquote>\n</div>\n<p>我们的天才 Jekyll 医生愤怒地变身为 Hyde。（<span style=\"color: #999999;\">译注：《Jekyll and Hyde》是英国作家 Stevenson 的作品经典小说，善良的医生 Jekyll，他将自己当作实验对象，结果却导致人格分裂，变成夜晚会转为邪恶的 Hyde。</span>）</p>\n<p>他是在产品设计小组、开发人员、管理人员和试用用户面前说出的这句话。有个我们的项目赞助商询问产品何时可以修复严重缺陷。</p>\n<p>天才都是反复无常的野兽。运气好时，和你共事的是个疯狂的天才，其他时候只是纯粹的疯子。大多时候，你很难区分。</p>\n<p>这个故事关于我们一名天才团队成员的陨落，他对我们的产品架构有深入理解，有预测未来需求的不可思议的能力，有大量专业领域知识积累。</p>\n<p>他是贡献最多的成员。他曾驾驭我们的旗舰项目。我们叫他 Rick 好了。</p>\n<p>（<span style=\"color: #999999;\">译注：该名字取自一部美国著名的成人动画科幻情景喜剧《Rick and Morty》</span>）</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fl3u3goor7j20m80citac.jpg\" width=\"690\" height=\"388\"></p>\n<p style=\"text-align: center;\">（你不会想让这个家伙在你的团队里的。图© Warner Bros）</p>\n<p>Rick 是团队里公认的天才。他是首席开发工程师及项目架构师。</p>\n<p>任何时候任何人有关于代码的问题或任务需要帮忙，他们都会找 Rick。Rick 在办公室装了一块白板专门处理这种事情。白板上总留有无法擦去的凌乱痕迹，记录着过去的讨论。</p>\n<p>无论什么时候出现特别有挑战性的问题，Rick 会处理它。Rick 电脑上安装了与生产环境服务器参数相同的服务器。他可以用这个服务器独立运行整个应用程序栈，同时在应用各个层面排查问题。</p>\n<p>Rick 不依赖任何人。他喜欢孤军奋战在他的私人工作间。</p>\n<p>Rick 从不需要别人造好的轮子。他什么都自己造，从无到有，因为自己造的轮子比其他凡人做的平庸之物要好太多。</p>\n<p>很快，Rick 不再参加会议。因为太多代码需要编写，他没有时间参加会议。</p>\n<p>Rick 关上工作间的门，白板也闲置了。他没有时间指导别人，因为他自己有很多事情需要解决。</p>\n<p>Rick 身后开始积压工作。他造的轮子也开始出现 bug。这些压榨了他投入在新产品开发上的精力。</p>\n<p>当然，这些 bug 出现是由于使用者操作不当，Rick 的工作没有任何问题。</p>\n<p>在我们的项目仪表盘上，标志由绿色变成了黄色，黄色又变成了红色，红色的灯疯狂闪烁。任务一个又一个陷入不可用状态。所有人都在等待 Rick 处理。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fl3u3hdz9kj20m80buwkj.jpg\"></p>\n<p style=\"text-align: center;\">（不必担心，Rick 会把这些全都解决掉。<a href=\"https://lcarsgfx.wordpress.com/tag/lcars/\" target=\"_blank\">图源</a>）</p>\n<p>项目经理从赞助商那里获得了六个月的延期。六个月到了，生产准备预计还要七个月。等到一年过去了，生产准备两年了。</p>\n<p>Rick 比之前更加高效地产出代码。他每周工作 7 天，每天工作 12 个小时。</p>\n<p>每个人都知道只有 Rick 能拯救团队。大家屏住呼吸等待 Rick 创造特效良药，将项目起死回生。</p>\n<p>每天，Rick 的孤立感和好战心都在增加。面具逐渐脱离，Jekyll 变成了 Hyde，</p>\n<p>在项目最初商定的发布日期 2 年后，我参加了与项目团队的第一次会议。我注意到该项目有一段时间了，因为它在公司里声名狼藉，不过之前并没有参与进来。</p>\n<p>我被指派进来，看看我们能不能拯救该项目。</p>\n<p>我的第一场会议主题，便是前文提到的“爱因斯坦”。</p>\n<p>嗯······</p>\n<p>我看了源码。Rick 说得对，除了他自己，没人理解他创造的东西。这些全都是他自己思维的工作产物。其中一些很巧妙，大部分还是复制粘贴的。它们都很独特，并不是所有东西都有文档。</p>\n<p>我给了我们的 CIO（首席信息官）一份报告。只有 Rick 能够维护这个产品。另外，Rick 每工作一天都会让项目交付延期一周。他对项目的破坏速度比创造速度要快。</p>\n<p>我们和 Rick 坐下来讨论他在项目中的角色。我们评估了关注点。我们回避了他和爱因斯坦的比较。我们解释了新的战略。团队需要合作，从零开始构建一个新产品。</p>\n<p>我们的努力必须限制在一定范围内，并且仅仅完成产品基础功能。整个团队贡献代码并可以提供技术支持。不再会有瓶颈。</p>\n<p>Rick 对此作何反应？</p>\n<p>Rick 还是一如既往风格，瞬间爆炸。</p>\n<p>Rick 并不想理会这场闹剧。认为如果我们不能欣赏他的天赋，那就是我们的问题，而不是他的问题。Rick 预计不出一个月，我们会狼狈而归乞求他拯救我们。</p>\n<p>Rick 向我们咆哮说我们庙太小，容不下他这尊佛。</p>\n<p>很遗憾，这之后，Rick 拒绝了领导关于未来几个月的安排。他拒绝休息，也不同意工作移交他人。他屡次拒绝引入免费开源的框架来替代他自己的难以维护的定制工具。</p>\n<p>他回退了其他开发者测试修复 bug 的代码变更。他宣称自己没有责任支持其他同事的工作。他不断公开藐视同事。</p>\n<p>我们解雇了 Rick。</p>\n<p>整整一周时间才尘埃落定。失去大将的军队需要一定时间来稳定军心。</p>\n<p>然后我看到他们在白板前挤作一团。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fl3u3i0xvzj20m80dwgp5.jpg\" width=\"690\" height=\"431\"></p>\n<p style=\"text-align: center;\">（合作？Rick 从不懂这个词。<a href=\"https://pixabay.com/en/meeting-construction-business-2284501/\" target=\"_blank\">图源</a>）</p>\n<p>他们开始合作，一起设计更简单的替代产品。</p>\n<p>新产品没有华而不实东西，也没有根据五年后的产品路线来预计需求。</p>\n<p>Rick 的产品动态工作流支持超过一万五千种排列。事实上，我们 99% 的用例只遵循其中三分之一的路径。团队对工作流硬编码。这移除了超过 30% Rick 的工作。</p>\n<p>每个任务并不能使用定制的硬编码组件。他们把能购买到的组件替换掉定制的组件。</p>\n<p>这移除了 Rick 上百小时的贡献。当然这也移除了上千小时的技术债务（technical debt）。</p>\n<p>我们和项目赞助商协商达成一致，砍掉一些边缘功能。</p>\n<p>这些边缘功能只服务于 5% 的试用用户组，但给在产品中占有四分之一的复杂度。</p>\n<p>我们向试用用户组重新发布产品。产品包含 Rick 写的可稳定运行的 10% 的源代码，另外用几千行新代码替换掉了十五万行难以理解的代码。</p>\n<p>整个团队六个月完成了五年的工作量。接下来几个月时间我们把试用版扩展为完整的客户版本。</p>\n<p>我们不仅替换掉 Rick 造的轮子，而且超越他并全面推出了产品，所有这一切只用了不到一年时间。产品的大小和复杂度只有 Rick 所做的五分之一。</p>\n<p>尽管产品组装时间很短，使用的客户翻了十倍，但产品的效率仍提升上百倍，而且几乎没有 bug。</p>\n<p>团队回到 Rick 其他产品中，他们剔除了 Rick 的旧代码。</p>\n<p>团队协作三个月就重新发布了 Rick 三年时间开发的产品。</p>\n<p>团队中不再有 Rick 这种人。我们也不再看到这种从无到有造轮子疯狂的天才。但我们的生产力居高不下。</p>\n<p>Rick 是非常有天赋的开发者。他能够解决复杂的商业逻辑问题，可以创造复杂精妙的结构来支持他的高级设计。但 Rick 不能解决的问题，是如何使团队高效工作。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fl3u3ikp6ij20rs0dwtbe.jpg\" width=\"690\" height=\"345\"></p>\n<p style=\"text-align: center;\">（建筑工程队长是很酷，但摩天大楼是团队盖起来的。图© Warner Bros）</p>\n<p>Rick 的存在，在某些方面是有破坏性的。</p>\n<p>首先，他创造了个人崇拜的依赖。所有问题都变成 Rick 的问题，他变成一个神话。开发者习惯放弃尝试，只等着 Rick 解决。</p>\n<p>其次，他写的代码不易维护。他从不写文档或测试代码，他的聪明才智也无法阻止失败。他对自己可靠性的信仰让他忽略了常识。</p>\n<p>然后，他个人有破坏性。团队成员不想和他交流想法，因为他总是批判他们。Rick 只尊重它自己，以他自己的方式工作，让其他人感觉渺小。</p>\n<p>最后，他缺少个人责任感。所有失败都不是他的错。他坚信这一点，这也阻止了他从错误中学习和进步。</p>\n<p>我并不认为 Rick 从开始就这个样子。我看到的是，他最糟糕的样子。他经历了数年愈演愈烈的加班，面对了同事和客户逐渐增加的苛刻要求。</p>\n<p>很遗憾，Rick 走远了。他的经理也有责任。事实上，原来的管理团队承担了责任，他们首先离开了。</p>\n<p>不幸的是 Rick 走的太远了，以至于他不能回到正轨。即使再多的辅导、反馈、休假或指派其他项目都无法改变他的不良行为习惯。</p>\n<p>在这一点上，整个团队知道他不好的地方。但个人崇拜的依赖如此强烈，每个人相信 Rick 是唯一的救命稻草。</p>\n<p>其实一直都有其他选择的。</p>\n<p>团队力量和每个单独成员的天赋无关，而是有关于他们的合作、斗志和相互尊重。</p>\n<p>组建团队要注重发挥每个人的价值，让每个人都发挥自己的最好水平。</p>\n<p>团结一心，他们就可以应对 Rick 都无法触及的更大的挑战。</p>\n<p>注：一些细节（比如人名）已经处理。我的同事中没有叫 Rick 的。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/5085cce1bd4e144b7d148079a34b20c1.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/02b09a29fdb3ab5fe03d4bd1afe95664.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112801\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112801votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112801\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 5 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/06/47765e50cfb7c4e598e72d893ab4f62f.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            毕业于郑州大学软件工程专业，身为 Java 程序猿却同样热爱着 JavaScript 。为了兴趣而写代码，做自己喜欢做的事。Keep coding ... Stay Cool ...        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/snowhere\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/snowhere/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 29</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://snowhere.me/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/u/1797178590/home\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/Snowhere/\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3gy1fl3u3goor7j20m80citac.jpg"], "create_date": "2017/11/03", "fav_nums": 0, "praise_nums": "4", "comment_nums": 0, "tags": "职场,团队,程序员,职场", "url": "http://blog.jobbole.com/112801/", "url_id": "7ab88d8fed16ea8ff8e37b454df03b54"}
{"title": "如何让网站不下线而从 Redis 2 迁移到 Redis 3", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://engineering.skybettingandgaming.com/2017/09/25/redis-2-to-redis-3/\">Craig Stewart</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8968-1.html\">Linux中国/geekpi</a>   </div><p>我们在 Sky Betting＆Gaming 中使用 <a href=\"https://redis.io/\">Redis</a> 作为共享内存缓存，用于那些需要跨 API 服务器或者 Web 服务器鉴别令牌之类的操作。在 Core Tribe 内，它用来帮助处理日益庞大的登录数量，特别是在繁忙的时候，我们在一分钟内登录数量会超过 20,000 人。这在很大程度上适用于数据存放在大量服务器的情况下（在 SSO 令牌用于 70 台 Apache HTTPD 服务器的情况下）。我们最近着手升级 Redis 服务器，此升级旨在使用 Redis 3.2 提供的原生集群功能。这篇博客希望解释为什么我们要使用集群、我们遇到的问题以及我们的解决方案。</p>\n<h3 id=\"toc_1\">在开始阶段（或至少在升级之前）</h3>\n<p>我们的传统缓存中每个缓存都包括一对 Redis 服务器，使用 keepalive 确保始终有一个主节点监听浮动 IP floating IP地址。当出现问题时，这些服务器对需要很大的精力来进行管理，而故障模式有时是非常各种各样的。有时，只允许读取它所持有的数据，而不允许写入的从属节点却会得到浮动 IP 地址，这种问题是相对容易诊断的，但会让无论哪个程序试图使用该缓存时都很麻烦。</p>\n<h3 id=\"toc_2\">新的应用程序</h3>\n<p>因此，这种情况下，我们需要构建一个新的应用程序，一个使用共享内存缓存shared in-memory cache的应用程序，但是我们不希望对该缓存进行迂回的故障切换过程。因此，我们的要求是共享的内存缓存，没有单点故障，可以使用尽可能少的人为干预来应对多种不同的故障模式，并且在事件恢复之后也能够在很少的人为干预下恢复，一个额外的要求是提高缓存的安全性，以减少数据泄露的范围（稍后再说）。当时 Redis Sentinel 看起来很有希望，并且有许多程序支持代理 Redis 连接，比如 <a href=\"https://github.com/twitter/twemproxy\">twemproxy</a>。这会导致还要安装其它很多组件，它应该有效，并且人际交互最少，但它复杂而需要运行大量的服务器和服务，并且相互通信。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/90754ddd08473e05e755ad65f7249460.jpg\"></p>\n<p>将会有大量的应用服务器与 twemproxy 进行通信，这会将它们的调用路由到合适的 Redis 主节点，twemproxy 将从 sentinal 集群获取主节点的信息，它将控制哪台 Redis 实例是主，哪台是从。这个设置是复杂的，而且仍有单点故障，它依赖于 twemproxy 来处理分片，来连接到正确的 Redis 实例。它具有对应用程序透明的优点，所以我们可以在理论上做到将现有的应用程序转移到这个 Redis 配置，而不用改变应用程序。但是我们要从头开始构建一个应用程序，所以迁移应用程序不是一个必需条件。</p>\n<p>幸运的是，这个时候，Redis 3.2 出来了，而且内置了原生集群，消除了对单一 sentinel 集群需要。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/6dd57f0b87ff2ebcffddc4c7c5d7f450.jpg\"></p>\n<p>它有一个更简单的设置，但 twemproxy 不支持 Redis 集群分片，它能为你分片数据，但是如果尝试在与分片不一致的集群中这样做会导致问题。有参考的指南可以使其匹配，但是集群可以自动改变形式，并改变分片的设置方式。它仍然有单点故障。正是在这一点上，我将永远感谢我的一位同事发现了一个 Node.js 的 Redis 的集群发现驱动程序，让我们完全放弃了 twemproxy。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/3839953e6c3ea86ff837d079b1796564.jpg\"></p>\n<p>因此，我们能够自动分片数据，故障转移和故障恢复基本上是自动的。应用程序知道哪些节点存在，并且在写入数据时，如果写入错误的节点，集群将自动重定向该写入。这是被选的配置，这让我们共享的内存缓存相当健壮，可以没有干预地应付基本的故障模式。在测试期间，我们的确发现了一些缺陷。复制是在一个接一个节点的基础上进行的，因此如果我们丢失了一个主节点，那么它的从节点会成为一个单点故障，直到死去的节点恢复服务，也只有主节点对集群健康投票，所以如果我们一下失去太多主节点，那么集群无法自我恢复。但这比我们过去的好。</p>\n<h3 id=\"toc_3\">向前进</h3>\n<p>随着使用集群 Redis 配置的新程序，我们对于老式 Redis 实例的状态变得越来越不适应，但是新程序与现有程序的规模并不相同（超过 30GB 的内存专用于我们最大的老式 Redis 实例数据库）。因此，随着 Redis 集群在底层得到了证实，我们决定迁移老式的 Redis 实例到新的 Redis 集群中。</p>\n<p>由于我们有一个原生支持 Redis 集群的 Node.js Redis 驱动程序，因此我们开始将 Node.js 程序迁移到 Redis 集群。但是，如何将数十亿字节的数据从一个地方移动到另一个地方，而不会造成重大问题？特别是考虑到这些数据是认证令牌，所以如果它们错了，我们的终端用户将会被登出。一个选择是要求网站完全下线，将所有内容都指向新的 Redis 群集，并将数据迁移到其中，以希望获得最佳效果。另一个选择是切换到新集群，并强制所有用户再次登录。由于显而易见的原因，这些都不是非常合适的。我们决定采取的替代方法是将数据同时写入老式 Redis 实例和正在替换它的集群，同时随着时间的推移，我们将逐渐更多地向该集群读取。由于数据的有效期有限（令牌在几个小时后到期），这种方法可以导致零停机，并且不会有数据丢失的风险。所以我们这么做了。迁移是成功的。</p>\n<p>剩下的就是服务于我们的 PHP 代码（其中还有一个项目是有用的，其它的最终是没必要的）的 Redis 的实例了，我们在这过程中遇到了一个困难，实际上是两个。首先，也是最紧迫的是找到在 PHP 中使用的 Redis 集群发现驱动程序，还要是我们正在使用的 PHP 版本。这被证明是可行的，因为我们升级到了最新版本的 PHP。我们选择的驱动程序不喜欢使用 Redis 的授权方式，因此我们决定使用 Redis 集群作为一个额外的安全步骤 （我告诉你，这将有更多的安全性）。当我们用 Redis 集群替换每个老式 Redis 实例时，修复似乎很直接，将 Redis 授权关闭，这样它将会响应所有的请求。然而，这并不是真的，由于某些原因，Redis 集群不会接受来自 Web 服务器的连接。 Redis 在版本 3 中引入的称为“保护模式”的新安全功能将在 Redis 绑定到任何接口时将停止监听来自外部 IP 地址的连接，并无需配置 Redis 授权密码。这被证明相当容易修复，但让我们保持警惕。</p>\n<h3 id=\"toc_4\">现在？</h3>\n<p>这就是我们现在的情况。我们已经迁移了我们的一些老式 Redis 实例，并且正在迁移其余的。我们通过这样做解决了我们的一些技术债务，并提高了我们的平台的稳定性。使用 Redis 集群，我们还可以扩展内存数据库并扩展它们。 Redis 是单线程的，所以只要在单个实例中留出更多的内存就会可以得到这么多的增长，而且我们已经紧跟在这个限制后面。我们期待着从新的集群中获得改进的性能，同时也为我们提供了扩展和负载均衡的更多选择。</p>\n<h3 id=\"toc_5\">未来怎么样？</h3>\n<p>我们解决了一些技术性债务，这使我们的服务更容易支持，更加稳定。但这并不意味着这项工作完成了，Redis 4 似乎有一些我们可能想要研究的功能。而且 Redis 并不是我们使用的唯一软件。我们将继续努力改进平台，缩短处理技术债务的时间，但随着客户群体的扩大，我们力求提供更丰富的服务，我们总是会遇到需要改进的事情。下一个挑战可能与每分钟超过 20,000次 登录到超过 40,000 次甚至更高的扩展有关。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112744\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112744votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112744\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "create_date": "2017/10/20", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,Redis,数据库", "url": "http://blog.jobbole.com/112744/", "url_id": "f44e9d126df9e68989db9db38ee1066e"}
{"title": "BFPRT 算法（TOP-K问题）", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.61mon.com/index.php/archives/175/\">刘毅</a>   </div><h3>一：背景介绍</h3>\n<p>在一堆数中求其前k大或前k小的问题，简称TOP-K问题。而目前解决TOP-K问题最有效的算法即是”BFPRT算法”，又称为”中位数的中位数算法”，该算法由Blum、Floyd、Pratt、Rivest、Tarjan提出，最坏时间复杂度为$O(n)$。</p>\n<p>在首次接触TOP-K问题时，我们的第一反应就是可以先对所有数据进行一次排序，然后取其前k即可，但是这么做有两个问题：</p>\n<ul>\n<li>快速排序的平均复杂度为$O(nlogn)$，但最坏时间复杂度为$O(n^2)$，不能始终保证较好的复杂度。</li>\n<li>我们只需要前k大的，而对其余不需要的数也进行了排序，浪费了大量排序时间。</li>\n</ul>\n<p>除这种方法之外，堆排序也是一个比较好的选择，可以维护一个大小为k的堆，时间复杂度为$O(nlogk)$。</p>\n<p>那是否还存在更有效的方法呢？受到快速排序的启发，通过<strong>修改快速排序中主元的选取方法</strong>可以降低快速排序在<strong>最坏情况下的时间复杂度</strong>，并且我们的目的只是求出前k，故递归的规模变小，速度也随之提高。下面来简单回顾下快速排序的过程，以升序为例：</p>\n<p>（1）：选取主元（数组中随机一个元素）；<br>\n（2）：以选取的主元为分界点，把小于主元的放在左边，大于主元的放在右边；<br>\n（3）：分别对左边和右边进行递归，重复上述过程。</p>\n<p><span id=\"more-112753\"></span> <span id=\"menu_index_2\"></span></p>\n<h3>二：BFPRT算法过程及代码</h3>\n<p>BFPRT算法步骤如下：</p>\n<p>（1）：选取主元；<br>\n（1.1）：将n个元素划分为$⌊frac n5⌋$个组，每组5个元素，若有剩余，舍去；<br>\n（1.2）：使用插入排序找到$⌊frac n5⌋$个组中每一组的中位数；<br>\n（1.3）：对于（1.2）中找到的所有中位数，调用BFPRT算法求出它们的中位数，作为主元；<br>\n（2）：以（1.3）选取的主元为分界点，把小于主元的放在左边，大于主元的放在右边；<br>\n（3）：判断主元的位置与k的大小，有选择的对左边或右边递归。</p>\n<p>上面的描述可能并不易理解，先看下面这幅图：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/5bbd9517fcc7829ce1a5689afa13c379.png\" alt=\"\"></p>\n<p>BFPRT()调用GetPivotIndex()和Partition()来求解第k小，在这过程中，GetPivotIndex()也调用了BFPRT()，即GetPivotIndex)和BFPRT()为互递归的关系。</p>\n<p>下面为代码实现，其所求为<strong>前K小的数</strong>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a022a573f951139248466\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/**\r\n * BFPRT算法（前K小数问题）\r\n *\r\n * author : 刘毅（Limer）\r\n * date   : 2017-01-25\r\n * mode   : C++\r\n */\r\n\r\n#include &lt;iostream&gt;\r\n#include &lt;algorithm&gt;\r\n\r\nusing namespace std;\r\n\r\n/* 插入排序，返回中位数下标 */\r\nint InsertSort(int array[], int left, int right)\r\n{\r\n    int temp;\r\n    int j;\r\n\r\n    for (int i = left + 1; i &lt;= right; i++)\r\n    {\r\n        temp = array[i];\r\n        j = i - 1;\r\n        while (j &gt;= left &amp;&amp; array[j] &gt; temp)\r\n            array[j + 1] = array[j--];\r\n        array[j + 1] = temp;\r\n    }\r\n\r\n    return ((right - left) &gt;&gt; 1) + left;\r\n}\r\n\r\n/* 返回中位数的中位数下标 */\r\n\r\nint BFPRT(int array[], int left, int right, const int &amp; k);\r\n\r\nint GetPivotIndex(int array[], int left, int right)\r\n{\r\n    if (right - left &lt; 5)\r\n        return InsertSort(array, left, right);\r\n\r\n    int sub_right = left - 1;\r\n\r\n    for (int i = left; i + 4 &lt;= right; i += 5)\r\n    {\r\n        int index = InsertSort(array, i, i + 4);  // 找到五个元素的中位数的下标\r\n        swap(array[++sub_right], array[index]);   // 依次放在左侧\r\n    }\r\n\r\n    return BFPRT(array, left, sub_right, ((sub_right - left + 1) &gt;&gt; 1) + 1);\r\n}\r\n\r\n/* 利用中位数的中位数的下标进行划分，返回分界线下标 */\r\nint Partition(int array[], int left, int right, int pivot_index)\r\n{\r\n    swap(array[pivot_index], array[right]);  // 把主元放置于末尾\r\n    int divide_index = left;                 // 跟踪划分的分界线\r\n\r\n    for (int i = left; i &lt; right; i++)\r\n    {\r\n        if (array[i] &lt; array[right])\r\n            swap(array[divide_index++], array[i]);  // 比主元小的都放在左侧\r\n    }\r\n\r\n    swap(array[divide_index], array[right]);  // 最后把主元换回来\r\n\r\n    return divide_index;\r\n}\r\n\r\nint BFPRT(int array[], int left, int right, const int &amp; k)\r\n{\r\n    int pivot_index = GetPivotIndex(array, left, right);            // 得到中位数的中位数下标\r\n    int divide_index = Partition(array, left, right, pivot_index);  // 进行划分，返回划分边界\r\n    int num = divide_index - left + 1;\r\n\r\n    if (num == k)\r\n        return divide_index;\r\n    else if (num &gt; k)\r\n        return BFPRT(array, left, divide_index - 1, k);\r\n    else\r\n        return BFPRT(array, divide_index + 1, right, k - num);\r\n}\r\n\r\nint main()\r\n{\r\n    int k = 5;\r\n    int array[10] = { 1,1,2,3,1,5,-1,7,8,-10 };\r\n\r\n    cout &lt;&lt; \"原数组：\";\r\n    for (int i = 0; i &lt; 10; i++)\r\n        cout &lt;&lt; array[i] &lt;&lt; \" \";\r\n    cout &lt;&lt; endl;\r\n\r\n    cout &lt;&lt; \"第\" &lt;&lt; k &lt;&lt; \"小值为：\" &lt;&lt; array[BFPRT(array, 0, 9, k)] &lt;&lt; endl;\r\n\r\n    cout &lt;&lt; \"变换后的数组：\";\r\n    for (int i = 0; i &lt; 10; i++)\r\n        cout &lt;&lt; array[i] &lt;&lt; \" \";\r\n    cout &lt;&lt; endl;\r\n\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a022a573f951139248466-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5a022a573f951139248466-101\">101</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-1\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-2\"><span class=\"crayon-c\"> * BFPRT算法（前K小数问题）</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-3\"><span class=\"crayon-c\"> *</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-4\"><span class=\"crayon-c\"> * author : 刘毅（Limer）</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-5\"><span class=\"crayon-c\"> * date   : 2017-01-25</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-6\"><span class=\"crayon-c\"> * mode   : C++</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-7\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-9\"><span class=\"crayon-p\">#include &lt;iostream&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-10\"><span class=\"crayon-p\">#include &lt;algorithm&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-12\"><span class=\"crayon-e\">using </span><span class=\"crayon-t\">namespace</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">std</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-14\"><span class=\"crayon-c\">/* 插入排序，返回中位数下标 */</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-15\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-28\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-30\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-32\"><span class=\"crayon-c\">/* 返回中位数的中位数下标 */</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-34\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-36\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetPivotIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-37\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-40\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-42\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-45\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 找到五个元素的中位数的下标</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-46\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 依次放在左侧</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-48\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-50\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-52\"><span class=\"crayon-c\">/* 利用中位数的中位数的下标进行划分，返回分界线下标 */</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-53\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Partition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-54\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 把主元放置于末尾</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                 </span><span class=\"crayon-c\">// 跟踪划分的分界线</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-61\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 比主元小的都放在左侧</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-63\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-64\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 最后把主元换回来</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-65\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-67\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-68\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-69\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-70\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-71\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetPivotIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 得到中位数的中位数下标</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-72\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Partition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 进行划分，返回划分边界</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-73\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-74\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-75\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-76\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-77\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-78\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-79\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-80\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-81\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-82\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-83\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-84\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-85\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-86\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-87\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-88\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"原数组：\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-89\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-90\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" \"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-91\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-92\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-93\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"第\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"小值为：\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-94\"> </div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-95\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"变换后的数组：\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-96\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-97\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" \"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-98\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-99\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a022a573f951139248466-100\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a022a573f951139248466-101\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0166 seconds] -->\r\n<p><code></code>运行如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/7f4233b03fbad0d9b681860edf4a1bc3.png\" alt=\"\"></p>\n<h3>三：时间复杂度分析</h3>\n<p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/10/d206bda7b56cbfee9973074ed8eac16b.png\"><img class=\"alignnone size-full wp-image-112756\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/d206bda7b56cbfee9973074ed8eac16b.png\" alt=\"QQ截图20171024111911\"></a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/10/e4022c9658a1f141e7c9a66c6b4d1626.png\"><img class=\"alignnone size-full wp-image-112757\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/e4022c9658a1f141e7c9a66c6b4d1626.png\" alt=\"QQ截图20171024112045\"></a></p>\n<h3>四：参考文献</h3>\n<ul>\n<li>算法导论（第3版）. Page 120.</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112753\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112753votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112753\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/10/a1a4de99de0c75eab712542a7dac876f.png"], "create_date": "2017/10/24", "fav_nums": 0, "praise_nums": "2", "comment_nums": 0, "tags": "IT技术,算法", "url": "http://blog.jobbole.com/112753/", "url_id": "27bf36e3e84699824cd884b8b80ea7f6"}
{"title": "如何应对开源软件的版权牟利者？ 开源律师说这样做！", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/8/patrick-mchardy-and-copyright-profiteering\">opensource</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9005-1.html\">Linux中国/张琳</a>   </div><div>\n<blockquote><p>背景：今年早些时候，德国的 Netfilter 内核子系统贡献者 Patrick McHardy 引发了争议，他自行担负起了 GPL 执法的角色，他联络了德国的许多企业，以不遵守 GPL 为由索要小额金钱。在 18 个月内他利用这种方法勒索到了 200 万欧元。</p>\n<p>Linux 社区的许多开发人员对 GPL 许可证牟利者 Patrick McHardy 的行为表示担忧，美国资深开源律师对一些常见问题进行解答，并对如何应对版权牟利行为提出了建议。</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/f1a3d556b79a7fae23ad3ecc6f972164.jpg\" width=\"600\" height=\"464\"></p>\n<p>针对 Patrick McHardy 强制要求 Linux 分发者遵循 GPL 许可证的举动，开源社区许多人士表示了担忧。基于与 McHardy 行动相关的公开信息，以及开源合规维权的一些法律原则，美国资深开源律师对一些常见问题进行了解答。</p>\n<p>Patrick Mchardy 是谁？ McHardy 是 Netfilter 核心开发团队的前任负责人。 Netfilter 是 Linux 内核中的一个实用程序，可以执行各种网络功能，例如改善网络地址转换（NAT），NAT 是将 Internet 协议地址转换为另一个 IP 地址的过程。对于维护 Linux 系统的安全性来说，控制网络流量至关重要。</p>\n<h3>McHardy 对 Linux 有多少贡献？</h3>\n<p>这不是一个容易回答的问题。首先，评估贡献的重要性并不容易；我们能做的就是查看<ruby>提交<rp>（</rp><rt>commit</rt><rp>）</rp></ruby>的数量和大小。其次，即使去跟踪提交，跟踪机制也不完美。 Git 有一个 blame 功能，跟踪谁在名义上向 Git 数据库提交了哪些代码行。Git 的 blame 功能可以使用诸如 <a href=\"https://cregit.linuxsources.org/\">cregit</a> 这样的工具，以更具细粒度的水平来报告提交，从而在文件级别上对贡献度有一个更准确的认知。Git 的 blame 机制和 cregit 是非常实用的，因为它们都使用公开易得的信息，而信息只需要被正确解释。</p>\n<p>结合 cregit 和 blame 进行分析可以帮助评估 McHardy 的潜在贡献。例如：</p>\n<ul>\n<li>他的大部分贡献似乎是在 2006 年到 2008 年和 2012 年期间。</li>\n<li>在 McHardy 包含其版权声明的大约 135 个文件中，只有 1/3 的文件是 McHardy 贡献了该文件代码的 50％ 或以上。</li>\n<li>他的贡献看起来不到内核代码的 0.25％。</li>\n</ul>\n<p>McHardy 的大部分贡献似乎都给了 Netfilter；然而，blame 机制可能并不总能还原全貌。例如，提交者可以<ruby>签入<rp>（</rp><rt>check in</rt><rp>）</rp></ruby>许多行代码，但只进行细微修改，也可以签入其他人编写或拥有的代码。由于这些原因，提交者的作者身份可能被过低或过多报告。</p>\n<p>在 2002 年之前对内核贡献的记录对于识别贡献者来说不是特别有用，因为在当时，Linus Torvalds 签入了所有代码。 McHardy 的贡献直到 2004 年才开始。</p>\n<p><a href=\"https://www.theregister.co.uk/2016/08/15/vmware_survives_gpl_breach_case_but_plaintiff_promises_appeal/\">Hellwig 诉 VMware 一案</a>中出现了使用开发存储库的元数据确认版权所有权的困难。法院可能不愿意接受这样的信息来作为证明作者身份的证据。</p>\n<h3>McHardy 在 Linux 内核中拥有哪些版权？</h3>\n<p>大型项目（如 Linux 内核）的版权归属复杂。这就像一个拼凑的被子。当开发者对内核做出贡献时，他们不签署任何贡献协议或版权转让协议。GPL 涵盖了他们的贡献，软件副本的接收人根据 GPL 直接从所有作者获得许可。内核项目使用一个名为<ruby>“原始开发者证书”<rp>（</rp><rt>Developer Certificate of Origin</rt><rp>）</rp></ruby>的文件，该文件不授予任何版权许可。贡献者的个人权利与在项目中的权利作为整体并存。 所以，像 McHardy 这样的作者一般都会拥有他所创作的作品的版权，但并不享有整个内核的版权。</p>\n<h3>什么是<ruby>“社区维权”<rp>（</rp><rt>community enforcement</rt><rp>）</rp></ruby>？</h3>\n<p>由于大型项目（如 Linux 内核）的所有权常常分散在许多作者手中，所以个体所有者可以采取不符合社区目标的维权行动。虽然社区可能会对如何以最好的方式来鼓励遵守 GPL 条款有很多看法，但大多数人认为维权应该是非正式的（不是通过诉讼），而且主要目标应该是合规（而不是惩罚）。例如，<ruby><a href=\"https://sfconservancy.org/\">软件自由保护组织</a><rp>（</rp><rt>Software Freedom Conservancy</rt><rp>）</rp></ruby>（SFC）已经颁布了一些<a href=\"https://sfconservancy.org/copyleft-compliance/principles.html\">社区维权原则</a>，其中优选合规，而不是寻求诉讼或赔偿金。对于非正式行为何时应该成为诉讼，或维权者应该要求赔偿多少钱，没有明确的规定。然而，Linux 社区的大多数开发人员将诉讼视为最后的手段，并不愿意采取法律行动，而与真正希望合规的用户进行合作。</p>\n<h3>为什么这么多的开源诉讼在德国提交？</h3>\n<p>一些寻求进行开源许可证维权的原告已经向德国法院提交权利主张。在德国有一些在美国或其他<ruby>普通法<rp>（</rp><rt>common law</rt><rp>）</rp></ruby>国家没有能够确切与之类比的寻求法律诉讼的手段。</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Abmahnung\"><strong>Abmahnung</strong></a><strong>（<ruby>“警告”<rp>（</rp><rt>warning</rt><rp>）</rp></ruby></strong><strong>）</strong>：“警告”是索赔人要求被告停止做某事的要求。在版权语境下，这是版权所有者发出的一封信函，要求所述侵权人停止侵权。这些信件是由律师而不是法庭签发的，通常是德国版权维权行动的第一步。在美国，最接近的方式应该是<ruby>警告信<rt>cease and desist letter</rt></ruby>。</li>\n<li><a href=\"https://de.wikipedia.org/wiki/Unterlassungserkl%C3%A4rung\"><strong>Unterlassungserklaerung</strong></a><strong>（<ruby>“停止声明”<rt>cease and desist declaration</rt></ruby></strong><strong>或<ruby>“禁止声明”<rt>declaration of injunction</rt></ruby></strong><strong>）</strong>：“警告”通常会附有“停止声明”。这种“声明”就像合同一样，签署的话会要求被告人承担其它并不存在的法律义务。特别是，该声明可能包含 GPL 本身并不要求的义务。在德国，这样一份文件通常包含针对不合规进行惩罚的内容。在美国，类似的做法是和解协议，但和解协议很少规定违约的处罚方式，事实上在美国，合同中的“处罚”可能无法强制执行。“声明”不是法院命令，但如果被告签字，可以获得法院命令的法定效力。<strong>所以，在征求律师法律意见之前签字往往不是一个好主意。</strong>在考虑如何应对寄出停止声明的原告时，还有其他方法，包括提出修改后的处罚或义务较少的声明。此外，由于停止声明可能包含不公开的要求，签署这些文件也可能产生额外的困难，例如限制原告寻求其他被告支持或向社区公开索赔人的权利主张。<br>\n更多详情参见：<a href=\"http://www.abmahnung.org/unterlassungserklaerung/\">abmahnung.org/unterlassungserklaerung/</a> 。</li>\n<li><a href=\"https://de.wikipedia.org/wiki/Vorl%C3%A4ufiger_Rechtsschutz#Einstweilige_Verf.C3.BCgung\"><strong>EinstweiligeVerf</strong><strong>ü</strong><strong>gung</strong></a><strong>（“<ruby>临时禁令<rt>interim injunction</rt></ruby></strong><strong>”或“<ruby>初步禁令<rt>preliminary injunction</rt></ruby></strong><strong>”）</strong>：“临时禁令”是一项类似美国临时禁令的法院命令。虽然没有要求原告在向法院提出“临时禁令”之前发出“警告”，但在被告对“警告”或“声明”不作出回应时，鼓励原告寻求“临时禁令”。侵犯版权的临时禁令可以处以 25 万欧元罚款或 6 个月的监禁。相比之下，在美国，侵犯版权的刑事处罚极为罕见，必须由政府而不是私人机构追究。此外，在美国，法院也没有为未来的侵权行为提供补救措施，它们只是要求被告停止现行的侵权行为或者支付损害赔偿金。在德国，<ruby>单方<rt>ex parte</rt></ruby>也可以提出临时禁令，这意味着原告可以在没有被告听证的情况下向法院提出申请，而且可以在没有被告参与的情况下发出临时禁令。如果您收到“警告”，并怀疑原告可能会随之提出 “临时禁令”，可以向法院抢先提出<ruby>“异议”<rt>opposition</rt></ruby>。<br>\n更多详情参见：<a href=\"http://www.abmahnung.org/einstweilige-verfuegung/\">Abmahnung.org</a> 。</li>\n<li><a href=\"https://de.wikipedia.org/wiki/Widerspruch_%28Recht%29#Zivilprozessrecht\"><strong>Widerspruch</strong></a><strong>（<ruby>“异议”<rt>opposition</rt></ruby></strong><strong>或<ruby>“反驳”<rt>contradiction</rt></ruby></strong><strong>）</strong>：“异议”是被告向法院提出否决“临时禁令”的机会。<br>\n更多详情参见：<a href=\"http://www.jbb.de/Docs/LG_Halle_GPL3.pdf\">这篇德国法院命令的英文翻译</a> 。</li>\n</ul>\n<h3>McHardy 发起了多少权利主张？</h3>\n<p>由于许多德国法庭案件缺乏公开记录，因此很难确定 McHardy 的确切行动数量。据说 McHardy 已经接触了超过 50 个维权目标。有关详细信息，请参阅<ruby><a href=\"https://sourcecodecontrol.co/gpl/\">“源码控制”</a><rp>（</rp><rp>）</rp></ruby>和<ruby><a href=\"https://opensource.com/article/17/1/yearbook-7-notable-legal-developments-2016\">《2016 年开源社区 7 个显著的法律进展》</a><rp>（</rp></ruby>。这并不一定意味着有 50 起诉讼，而是可能意味着 50 起威胁要提起诉讼的要求。但是，很难用公开信息来核实这个说法。有关详细信息，请参阅<ruby><a href=\"https://www.slideshare.net/blackducksoftware/litigation-and-compliance-in-the-open-source-ecosystem\">《开源生态系统的诉讼和合规》</a><rp>（</rp><rp>）</rp></ruby>。</p>\n<h3>为什么社区没有去阻止 McHardy？</h3>\n<p>包括软件自由保护组织在内的各种社区成员已经开始试图说服 McHardy 改变策略，但到目前为止还没有成功。 Netfilter 项目最近发布了一个<a href=\"http://www.netfilter.org/licensing.html\">许可问答</a>，解决大家对 McHardy 行为担忧的问题。</p>\n<h3>我们可以做些什么来阻止 McHardy 和其他版权牟利者？</h3>\n<p>这个问题没有确定的答案，也许没有办法能完全阻止他们。但是，这些建议可能会减少版权牟利者的数量。</p>\n<ul>\n<li><strong>尽可能遵守开源许可证。</strong>目前有足够的资源来学习如何遵守许可证，以及如何在贵公司设立开源合规计划。例如：\n<ul>\n<li>Linux基金会发布了<ruby><a href=\"https://www.linuxfoundation.org/news-media/research/practical-gpl-compliance\">《实用 GPL 合规手册》</a><rp>（</rp><rt>Practical GPL Compliance</rt><rp>）</rp></ruby>。</li>\n<li>软件自由法律中心发布了<ruby><a href=\"https://www.softwarefreedom.org/resources/2014/SFLC-Guide_to_GPL_Compliance_2d_ed.html\">《GPL 合规实用指南” （第二版） 》</a><rp>（</rp><rt>A Practical Guide to GPL Compliance</rt><rp>）</rp></ruby>。</li>\n<li><a href=\"https://www.openchainproject.org/\">OpenChain 项目</a>发布了开源管理内部流程规范。</li>\n</ul>\n</li>\n<li><strong>在寻求法律意见之前不要签署<ruby>“停止声明”<rp>（</rp><rt>Unterlassungserklärung</rt><rp>）</rp></ruby></strong><strong>。</strong>如上所述，停止声明可能让您承担 GPL 身没有的义务和处罚。不要与版权牟利者合作。你可以使自己成为一个更难攻克的目标，并争取社区其他目标的帮助。</li>\n<li><strong>支持开源开发。</strong>作者不应该诉诸投机来谋生。使用开源软件的公司不应该期望开源开发人员免费开发软件，他们应该筹集资金支持重要项目。</li>\n<li><strong>学会识别版权牟利者。</strong>了解社区导向的 GPL 维权与版权勒索之间的一般差异。面向社区的维权一般旨在通过教育和帮助实现 GPL 合规，同时尊重用户的自由。相比之下，牟利行为可能侧重以不加考究和漫无目的的权力主张和威胁要提起法律诉讼来获得经济利益。注意确认优先考虑经济利益的权利主张，警惕不合理的损害赔偿金。</li>\n<li><strong>公开权利主张。</strong>如果你是一个牟利者的目标，并且可以选择公开其权利主张，那就公开它，通过阻碍对方的行动来帮助你和其他人。作为开源社区的成员，我们都有义务向那些企图以诉讼拖垮社区的牟利者们提出反对，因为问题能够以更恰当和更少争议的方式解决。</li>\n</ul>\n<hr>\n<p>作者简介：Heather Meeker 是 O’Melveny &amp; Myers 硅谷办公室的合伙人，为客户提供技术交易和知识产权方面的建议，是国际知名的开源软件许可专家。Heather 于 2016 年获得加州律师协会知识产权先锋奖。<ruby>《最佳律师》<rp>（</rp><rt>Best Lawyers</rt><rp>）</rp></ruby>将她提名为 2018 年年度 IT 律师。</p>\n<p>译者简介：张琳，集慧智佳知识产权咨询公司分析师，专业德语，辅修法律。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112774\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112774votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112774\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/f1a3d556b79a7fae23ad3ecc6f972164.jpg"], "create_date": "2017/10/29", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,开源", "url": "http://blog.jobbole.com/112774/", "url_id": "4fc6e0340329b2245db2d6848accecc1"}
{"title": "从银行转账失败到分布式事务：总结与思考", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/xybaby/p/7465816.html\">xybaby</a>   </div><p>思考这个问题的初衷，是有一次给朋友转账，结果我的钱被扣了，朋友没收到钱。而我之前一直认为银行转账一定是由事务保证强一致性的，于是学习、总结了一下分布式事务的各种理论、方法。</p>\n<p>事务是一个非常广义的词汇，各行各业解读都不一样。对于程序员，事务等价于Transaction，是指一组连续的操作，这些操作组合成一个逻辑的、完整的操作。即这组操作执行前后，系统需要处于一个可预知的、一致的状态。因此，这一组操作要么都成功执行，要么都不能执行；如果部分成功，部分失败，成功的部分需要回滚（rollback）。</p>\n<h3>关系型数据库事务</h3>\n<p>大多数人可能和我一样，第一次听说事务是在学习关系型数据库（mysql、sql server、Oracle）的时候，在关系型数据库中，如果一组操作满足ACID特性，那么称之为一个事务。关于关系型数据库的<a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">ACID</a>特性，不管是教材还是网络上都有大量的资料，这里只简单介绍。</p>\n<p>A（Atomic）：原子性，构成事务的所有操作，要么都执行完成，要么全部不执行，不可能出现部分成功部分失败的情况<br>\nC（Consistency）：一致性，在事务执行前后，数据库的一致性约束没有被破坏。这里的一致性含义后面会详细解释<br>\nI（Isolation）：隔离性，数据库中的事务一般都是并发的，隔离性是指并发的两个事务的执行互不干扰，一个事务不能看到其他事务运行过程的中间状态<br>\nD（Durability）：持久性，事务完成之后，该事务对数据的更改会被持久化到数据库，且不会被回滚。</p>\n<p>我们举一个简单的转账的例子，用户A给玩家B转100块钱，那么涉及到两个操作：玩家A的账户扣100元，玩家B的账户加100元。即</p>\n<blockquote><p>UserA.account -= 100<br>\nUserB.account += 100</p></blockquote>\n<p>原子性很好理解，这两个操作要么都成功，要么都不执行（更准确的是从效果上来看等价于都没有执行）。不可能出现用户A的钱减少了而用户B的钱没增加的情况，用户是不允许的；更不可能出现用户B的钱增加 而 用户A的钱没有减少的情况，银行是绝对不干的。</p>\n<p>一致性说一起来大家都懂，但是深究起来也是似懂非懂。ACID中的一致性，网络上的介绍都很模糊，都是说要处于一致的状态，那什么是一致的状态呢，比如转账操作中，A扣钱，B加钱，AB的钱的综合是一定的，这个是否属于ACID中的Consistency呢？我觉得不是的，<a href=\"https://en.wikipedia.org/wiki/Transaction_processing\" target=\"_blank\">Wiki Transaction_processing</a>和<a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">Wiki： ACID</a>分别是这么描述的</p>\n<blockquote><p> Consistency: A transaction is a correct transformation of the state. The actions taken as a group <strong>do not violate any of the integrity constraints associated</strong> with the state.</p>\n<p>The consistency property ensures that any transaction will bring the database from one valid state to another. Any data written to the database must be valid according to all defined rules, including constraints, cascades, triggers, and any combination thereof. <strong>This does not guarantee correctness of the transaction in all ways the application programmer might have wanted</strong> (that is the responsibility of application-level code), but merely that any programming errors cannot result in the violation of any defined rules.</p></blockquote>\n<p>上面黑色加粗的部分指出，ACID中的一致性是指完整性约束不被破坏，完整性包含实体完整性（主属性不为空）、参照完整性（外键必须存在原表中）、用户自定义的完整性。用户自定义的完整性比如列值非空（not null）、列值唯一（unique）、列值是否满足一个bool表达式（check语句，如性别只能有两个值、岁数是一定范围内的整数等），例如age smallint CHECK (age &gt;=0 AND age &lt;= 120).数据库保证age的值在[0, 120]的范围，如果不在这个范文，那么更新操作失败，事务也会失败。另外，向mysql中的cascade，以及触发器（trigger）都属于用户自定义的完整性约束。在MongoDB3.2中<a href=\"//docs.mongodb.com/manual/core/document-validation/\" target=\"_blank\">document validation</a>就是用户自定义的完整性约束，在插入或者更新docuemnt的时候检查，不过用户可以自行设定validationAction，确定当数据不符合约束时的表现，默认为error，即拒绝数据写操作。</p>\n<p>因此，用户A，B在这次事务操作前后，账户的总和一定，是应用层面的一致性，而不是数据库保证的一致性，应用层面的一致性事实上是由原子性来保证的。</p>\n<p>隔离性说起来简单，但事实上背后的事情很复杂，数据库的隔离性依赖于加锁或者多版本控制。简单来说，如果UserA.account初始值为500，执行完第一条指令（即减去100），但事务还没有提交，其他的事务是不能读到这个中间结果（UserA.account的值为400）的。这就是避免了脏读（Drity Read），对应的隔离级别就是READ_COMMITTED。在SQL标准中，定义了四个隔离级别：</p>\n<blockquote><p>　　READ_UNCOMMITTED<br>\nREAD_COMMITTED<br>\nREPEATABLE_READ<br>\nSERIALIZABLE</p></blockquote>\n<p>来解决事务并发中带来的一下几个问题脏读（Dirty Read)、不可重复读（Non-repeatable Read）、幻读（Phantom Read）</p>\n<p>不同的数据库或者说存储引擎默认支持不同的隔离级别，比如InnoDB存储引擎默认支持REPEATABLE_READ，而Mongodb只支持READ_UNCOMMITTED</p>\n<p>持久性需要考虑到一个事务在执行过程中的各种情况的异常。一个事务的流程是这样的：</p>\n<blockquote><p>开启一个事务<br>\n执行一组操作<br>\n如果都执行成功，那么提交并结束事务<br>\n如果任何操作失败，那么回滚已经执行的操作，结束事务</p></blockquote>\n<p>在事务执行过程中，如果出现故障，比如断电、宕机，这个时候就要利用日志（redo log或者undo log） 加上 checkpoint来保证事务的完整结束。</p>\n<h3>分布式事务</h3>\n<p>当数据的规模越来越大，超出了单个关系型数据库的处理能力，这个时候就出现了关系型数据的垂直分表或者分表，也出现了天然支持水平扩展（sharding）的NoSql。另外，大型网站的服务化（SOA）以及这两年非常火的微服务，往往将服务进行拆分，单独部署，自然也使用独立的数据库，甚至是异构的数据库。这个时候，关系型数据库保证事务的手段，比如加锁、日志就行不通了。当然，本文讨论的不仅仅是数据库，也包含分布式存储、消息队列，以及任何要保证原子性、持久性的逻辑。</p>\n<p>分布式事务的最大挑战在于CAP，在《<a href=\"http://www.cnblogs.com/xybaby/p/6871764.html\" target=\"_blank\">CAP理论与MongoDB一致性、可用性的一些思考</a>》一文中有详细介绍。简而言之，由于网络分割（P： Network Partition）的存在，用户不得不在一致性（C Consistency）与可用性（A： Avaliable）之前做权衡。如果要保证强一致性（主要是应用层面的强一致性），那么在网络分割的时候，系统就不可用；如果要保证高可用性，那么就只能提供弱一致性，保证最终一致。下面提到的各种实现分布式事务的方法、协议都需要在一致性与可用性之间权衡。</p>\n<h4>2PC</h4>\n<p>提到分布式事务，首先想到的肯定是两阶段提交（2pc， <a href=\"https://en.wikipedia.org/wiki/Two-phase_commit_protocol\" target=\"_blank\">two-phase commit protocol</a>），2pc是非常经典的<strong>强一致性</strong>、<strong>中心化</strong>的原子提交协议。中心化是指协议中有两类节点：一个中心化协调者节点（coordinator）和N个参与者节点（participant、cohort）。</p>\n<p>顾名思义，两阶段提交协议的每一次事务提交分为两个阶段：</p>\n<p>在第一阶段，协调者询问所有的参与者是否可以提交事务（请参与者投票），所有参与者向协调者投票。</p>\n<p>在第二阶段，协调者根据所有参与者的投票结果做出是否事务可以全局提交的决定，并通知所有的参与者执行该决定。在一个两阶段提交流程中，参与者不能改变自己的投票结果。两阶段提交协议的可以全局提交的前提是所有的参与者都同意提交事务，只要有一个参与者投票选择放弃(abort)事务，则事务必须被放弃。</p>\n<p>wiki上给出了简要流程：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/adcf4bbfed6036e8654af87e101d9254.png\" alt=\"\"></p>\n<p>注意，上图中洗下面一行也表明，两阶段提交协议也依赖与日志，只要存储介质不出问题，两阶段协议就能最终达到一致的状态（成功或者回滚）</p>\n<p>而下图（来自<a href=\"https://www.slideshare.net/sourabhdave/distributed-databases-24839617\" target=\"_blank\">slideshare</a>）详细描述了整个流程：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/dc09effd00629725c2a12b672bc59161.jpg\" alt=\"\"></p>\n<p>在刘杰的《分布式原理介绍中》，有非常详细的流程介绍，可以配合上图一起看，另外还介绍了在各种异常情况下（比如Coordinator、Participant宕机，网络分割导致的超时）两阶段协议的工作情况。另外，在<a href=\"http://blog.jobbole.com/95632/\" target=\"_blank\">这篇文章</a>中也有比较清晰的流程介绍。在这里只讨论2PC的优缺点：</p>\n<p>优点：强一致性，只要节点或者网络最终恢复正常，协议就能保证顺利结束；部分关系型数据库（Oracle）、框架直接支持</p>\n<p>缺点：两阶段提交协议的容错能力较差，比如在节点宕机或者超时的情况下，无法确定流程的状态，只能不断重试；两阶段提交协议的性能较差， 消息交互多，且受最慢节点影响</p>\n<p><a href=\"//blog.csdn.net/m0_38031406/article/details/76474800\" target=\"_blank\">这篇文章</a>描述了为什么两阶段提交协议在分布式系统中不适用：</p>\n<blockquote><p>　　系统“水平”伸缩的死敌。基于两阶段提交的分布式事务在提交事务时需要在多个节点之间进行协调,最大限度地推后了提交事务的时间点，客观上延长了事务的执行时间，这会<strong>导致事务在访问共享资源时发生冲突和死锁的概率增高</strong>，随着数据库节点的增多，这种趋势会越来越严重，从而成为系统在数据库层面上水平伸缩的”枷锁”， 这是很多Sharding系统不采用分布式事务的主要原因。</p></blockquote>\n<p>所言甚是！</p>\n<h4>3PC</h4>\n<p>三阶段提交协议（3pc <a href=\"https://en.wikipedia.org/wiki/Three-phase_commit_protocol\" target=\"_blank\">Three-phase_commit_protocol</a>）主要是为了解决两阶段提交协议的阻塞问题，从原来的两个阶段扩展为三个阶段，并且增加了超时机制。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/d7ff9cc44c99e8aab1b1bdbb80f20cd4.png\" alt=\"\"></p>\n<p>3PC只是解决了在异常情况下2PC的阻塞问题，但导致一次提交要传递6条消息，延时很大。具体流程描述可参见《<a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">关于分布式事务、两阶段提交协议、三阶提交</a><a href=\"http://blog.jobbole.com/95632/\" target=\"_blank\">协议 </a>》一文。</p>\n<h4>TCC</h4>\n<p>TCC是Try、Commit、Cancel的缩写，在国内由于<a href=\"http://www.sohu.com/a/124709543_468650%20\" target=\"_blank\">支付宝的布道</a>而广为人知，<strong>TCC在保证强一致性的同时，最大限度提高系统的可伸缩性与可用性</strong>。</p>\n<p>我们假设一个完整的为业务包含一组子业务，Try操作完成所有的子业务检查，预留必要的业务资源，实现与其他事务的隔离；Confirm使用Try阶段预留的业务资源真正执行业务，而且Confirm操作满足幂等性，以遍支持重试；Cancel操作释放Try阶段预留的业务资源，同样也满足幂等性。“一次完整的交易由一系列微交易的Try 操作组成，如果所有的Try 操作都成功，最终由微交易框架来统一Confirm，否则统一Cancel，从而实现了类似经典两阶段提交协议（2PC）的强一致性。”</p>\n<p>与2PC协议比较 ，TCC拥有以下特点：</p>\n<blockquote><p>　　位于业务服务层而非资源层 ，由业务层保证原子性</p>\n<p>没有单独的准备(Prepare)阶段，降低了提交协议的成本</p>\n<p>Try操作 兼备资源操作与准备能力</p>\n<p>Try操作可以灵活选择业务资源的锁定粒度，而不是锁住整个资源，提高了并发度</p></blockquote>\n<p>当然，TCC需要较的高开发成本，每个子业务都需要有响应的comfirm、Cancel操作，即实现相应的补偿逻辑。</p>\n<h4>基于消息的分布式事务</h4>\n<p>这类事务机制将分布式事务分成多个本地事务，这里称之为主事务与从事务。首先主事务本地先行提交，然后通过消息通知从事务，从事务从消息中获取信息进行本地提交。可以看出这是一种<strong>异步事务机制、只能保证最终一致性；但可用性非常高，不会因为故障而发生阻塞</strong>。另外，主事务已经先行提交，如果因为从事务无法提交，要回滚主事务还是比较麻烦，所以这种模式只适用于理论上大概率等成功的业务情况，即从事务的提交失败可能是由于故障，而不大可能是逻辑错误。</p>\n<p>基于异步消息的事务机制主要有两种方式：<strong>本地消息表与事务消息</strong>。二者的区别在于：怎么保证主事务的提交与消息发送这两个操作的原子性。</p>\n<p>如果用异步消息实现转账的例子，那么操作分为四部：用户A扣钱，发消息，用户B收消息，用户B扣钱。前两步必须保证原子性，如果A扣钱成功但是没有发出消息，那么用户A损失了；如果发消息成功，但是没有扣钱，那么用户B就多得了一笔钱，银行肯定不干。</p>\n<h5>本地消息表</h5>\n<p>基于本地消息表的方案是指将消息写入本地数据库，通过本地事务保证主事务与消息写入的原子性。例如银行转账的例子，<a href=\"http://blog.csdn.net/gaowenhui2008/article/details/53910341\" target=\"_blank\">伪码</a>如下：</p>\n<blockquote><p> begin transaction:</p>\n<p>update User set account = account – 100 where userId = ‘A’<br>\ninsert into message(userId, amount, status) values(‘A’, 100, 1)</p>\n<p>commit transaction</p></blockquote>\n<p>然后通过pull或者push模式，从业务获取消息并执行。如果是push模式，那么一般使用具有持久化功能的消息队列，从事务务订阅消息。如果是pull模式，那么从事务定时去拉取消息，然后执行。</p>\n<p>mongodb的写入就很像本地消息表，在WriteConcern为w:1的情况下，更新操作只要写到oplog以及primary就可以向客户端返回。secondary异步拉取oplog并本地记录执行。</p>\n<h5>事务消息：</h5>\n<p>事务消息依赖于支持“事务消息”的消息队列，其基本思想是 利用消息中间间实施两阶段提交，将本地事务和发消息放在了一个分布式事务里，保证要么本地操作成功成功并且对外发消息成功，要么两者都失败。流程如下：</p>\n<blockquote><p>主事务向消息队列发送预备消息</p>\n<p>主事务收到ACK之后本地执行主事务</p>\n<p>根据执行的结果（成功或失败）向消息队列发送提交或者回滚消息</p></blockquote>\n<p>详细的流程如下图（图片<a href=\"http://blog.csdn.net/mine_song/article/details/64118963\" target=\"_blank\">来源见水印</a>）所示：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/f6cbba9d1e08621af696d4e93da9aa81.png\" alt=\"\"></p>\n<p>不难看到，相比本地消息表的方式，事务消息由消息中间件保证本地事务与消息的原子性，不依赖于本地数据库存储消息。但实现了“事务消息”的消息队列比较少，还不够通用。</p>\n<p>不管是本地消息表还是事务消息，都需要保证从事务执行且仅仅执行一次，exact once。如果失败，需要重试，但也不可能无限次的重试，当从事务最终失败的情况下，需要通知主业务回滚吗？但是此时，主事务已经提交，因此只能通过补偿，实现逻辑上的回滚，而当前时间点距主事务的提交已经有一定时间，回滚也可能失败。因此，最好是保证从事务逻辑上不会失败，万一失败，记录log并报警，人工介入。</p>\n<h4>1PC</h4>\n<p>1PC（one phase commit）这个概念，我是在《<a href=\"http://book.mixu.net/distsys/\" target=\"_blank\">Distributed systems for fun and profit</a>》一文中看到的，应该是对标2PC，3PC。在wiki中并没有正式的词条，在google上的文章也不是很多。在我的理解中，1PC适用于分布式存储系统的复制集，即复制集中多个节点的数据提交，。一般来说，这些节点存储同样的数据，只要单个节点能提交，其他节点理论上也应该可以提交。 在《<a href=\"http://book.mixu.net/distsys/\" target=\"_blank\">Distributed systems for fun and profit</a>》中是这么描述的：</p>\n<blockquote><p> Having a second phase in place before the commit is considered permanent is useful, because it allows the system to roll back an update when a node fails. In contrast, in primary/backup (“1PC”), t<strong>here is no step for rolling back</strong> an operation that has failed on some nodes and succeeded on others, and hence the replicas could diverge.</p></blockquote>\n<p>即对于分布式存储中使用非常广泛的中心化复制集协议Primary Secondary，在部分节点失败、部分节点成功的情况下没有回滚操作，可能会导致不一致。不过这些分布式存储系统都竭力保证，这些不一致是暂时的，会通过重试等手段保证最终的一致。</p>\n<p>1PC的优点是性能非常好，而且只有在出现物理故障的时候才会出现不一致。</p>\n<p>比如在MongoDB中，更新操作会写入Primary节点以及oplog collection，Secondary节点从Primary节点的oplog collection拉取操作日志并执行，这是一个异步的过程。及时Secondary节点因为故障执行oplog失败，Promary节点的数据也不会回滚。在《<a href=\"http://www.cnblogs.com/xybaby/p/7153755.html\" target=\"_blank\">带着问题学习分布式系统之中心化复制集</a>》中也提到过，为了提高数据可靠性（避免极端情况下数据被回滚），设定WriteConcern为w:Majority，（shard有一个Primary 一个Secondary 一个Arbiter组成）。如果这个时候由于其中一个secondary挂掉，写入操作是不可能成功的。因此，在超时时间到达之后，会向客户端返回出错信息。但是在这个时候数据是持久化到了primary节点，不会被回滚。如果此时Secondary重启，那么是会从Primary拉取日志并执行。所以当客户端返回的出错信息包含<a href=\"https://docs.mongodb.com/manual/reference/method/WriteResult/#WriteResult.writeConcernError\">WriteResult.writeConcernError</a>  时，应该谨慎处理</p>\n<p>对于分布式文件系统GFS、haystack，如果Secondary节点失败，也会采取简单粗暴的重试，并通过一些机制（cheksum，offset）来保证最终能读到正确的数据</p>\n<h3>思考与总结</h3>\n<p>更多的时候，分布式事务只需要保证原子性，这个原子性也保证了应用层面上的一致性，而由本地事务来保证隔离性、持久性。</p>\n<p>原子性这个东西，即使不是分布式，仅仅是单进程单线程也是需要考虑的，这就是C++中的RAII，python中的with statement，以及各种语言的try…finally…。当涉及到跨进程、异步通信的时候，就很难通过语言层面的机制保证原子性了。</p>\n<p>在分布式领域，由于网络或者机器故障，经常需要重试，因此幂等性非常重要</p>\n<p>很多场景，比如电商、网络购票，首先要保证的是高可用，不大可能采用强一致性，因此我们也会看到‘正在处理中…‘这种中间状态，后台很可能是异步处理的，在12306买过票的话都知道，下单成功到最后是否能出票由很长一段时间。</p>\n<p>在笔者的业务领域，并没有涉及到强一致性的场景，只要最终一致性就行了。上面的提到的各种办法，不管是2PC、TCC、本地消息表、事务消息，都需要引入额外的框架或者组件。所以更多的时候是采取业务补偿的方式，比如一个涉及两个进程的操作需要保证原子性，进程间RPC通信，那么一般是A进程先执行，然后RPC调用B进程接口，根据B进程的返回结果，绝对是否回滚（补偿）；但如果涉及到异步RPC、或者多线程、或者两个以上进程的串联时，那么就不一定能补偿、甚至很难补偿了，这个时候只记录一个error log，然后通知人工排查。因此，事务补偿只适合业务比较简单的常见，而且很难形成通用的框架，或者说实用性不强。</p>\n<p>之前一直以为像银行转账这种场景，一定是强一致性的。后来自己遇到这么一回事，我给朋友转账，我这边显示转账成功，但朋友并没有收到钱。我以为是需要一定时间，结果24小时之后还没有收到。我自己重新比对转账单，才发现是把对方的开户银行写错了。因此可见，转账这个操作肯定不是强一致性，具体怎么搞的在网上也没有查到。更坑爹的是，转账失败，我的钱被扣了，朋友也没有收到钱，但是我没有收到任何消息，也没有给我把钱退回来，在我打电话到银行去咨询之后才退回来。这个体验真的很差，但银行是大爷，没办法！</p>\n<h3>references</h3>\n<p><a href=\"https://en.wikipedia.org/wiki/Transaction_processing\" target=\"_blank\">Wiki Transaction_processing</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">Wiki： ACID</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/Two-phase_commit_protocol\" target=\"_blank\">Wiki：two-phase commit protocol</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">关于分布式事务、两阶段提交协议、三阶提交</a><a href=\"http://blog.jobbole.com/95632/\" target=\"_blank\">协议<em id=\"__mceDel\"> </em></a></p>\n<p>刘杰：分布式原理介绍</p>\n<p><a href=\"http://book.mixu.net/distsys/\" target=\"_blank\">Distributed systems for fun and profit</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112760\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112760votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112760\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/0320c1acf91edcafcab3cfa218486cfa.jpg"], "create_date": "2017/10/24", "fav_nums": 0, "praise_nums": "1", "comment_nums": 0, "tags": "IT技术,分布式", "url": "http://blog.jobbole.com/112760/", "url_id": "0975d26f2e429051a027a8bbb24006c0"}
{"title": "Facebook 是如何做大规模代码部署的", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wrm205\">wrm</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://code.facebook.com/posts/270314900139291/rapid-release-at-massive-scale/\">code.facebook.com</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>随着时间的推移，软件行业已经提出了多种方法来更快更好更安全地交付代码。其中大部分的努力都集中在诸如持续集成、持续交付、敏捷开发、DevOps 和测试驱动开发等方面。所有这些方法都有一个共同的目标：<strong>让开发人员能够以安全、小型和渐进的步骤将代码快速正确地提供给用户。</strong></p>\n<p>Facebook 的开发和部署过程已经得到有机地发展，以涵盖这些快速迭代技术的大部分内容，同时也避免特殊依赖任何一项单独的技术。这种灵活、实用的方法使我们能够在快速的时间内成功地发布我们的网络和移动产品。</p>\n<p>多年来，我们使用简单的主程序发布分支策略每天部署三次代码到 Facebook 前端。工程师们会从主干分支中选择一些通过了一系列自动化测试的代码变更推送到每天的发布分支上（这个过程也叫做“cherry-picking”）。总的来说，我们每天选择的变更（cherry-picks）数量为 500 到 700。剩下的没有被 cherry-picked 的变更就推入到每周的发布分支中。</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fkumim26z7j20kg0bin0k.jpg\" alt=\"\"></p>\n<p>从 2007 年的几位工程师到现在的数千名工程师，这个系统的扩展性一直很好。好消息是，随着我们增加了更多的工程师，我们完成的工作也越来越多——<a href=\"https://research.fb.com/publications/continuous-deployment-at-facebook-and-oanda/\">代码交付的速度与团队的规模成比例</a>。然而，除了适当的工具和自动化系统之外，它还需要发布工程师花费一定的手工劳动，来完成每天和每周的代码推送和发布。我们知道，随着团队的不断扩大，批量处理日渐增多的交付代码块将无法持续。</p>\n<p>到了 2016 年，我们看到 branch/cherry-pick 模型已经达到了极限。我们每天接收的推送到主分支上的变更超过 1000 个，而每周的接收的变更有时多达 10,000 个。因此每周需要进行大量的手工工作来协调和交付这样大型的发布任务，这是不可持续的。</p>\n<p>2016年4月，我们决定将 facebook.com 移到一个准持续的“push-from-master”系统上。在接下来的一年里，我们逐渐把它推出，首先让50%的员工用上新代码，然后让0.1%的生产环境用上新代码，再到1%，再增加到10%。这些进程中的每一步都是对我们的工具和过程的测试，测试它们处理日益增加的推送频率的能力，从而得到真实的反馈。我们的主要目标是确保新系统能让人们的体验更好——或者至少，不会让它变得更糟。经过了几乎整整一年的规划和开发之后，在2017年4月的3天内，我们使100%的生产环境能够运行直接从master部署的代码。</p>\n<h2>大规模持续交付</h2>\n<p>虽然一个真正的持续交付系统会将每一次提交的代码变更及时发布到生产环境中，但根据Facebook的代码提交速度，我们需要开发一个每隔几个小时就能处理数十到数百个代码变更的系统。在这种准连续交付模式中所做的改变通常是小型且增量的，很少会对实际的用户体验有明显的影响。每一次发布都以分层的方式在几小时内部署到100%的生产环境，因此一旦发现任何问题，我们可以随时停止发布。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fkumimppgqj20kg0bitd5.jpg\"></p>\n<p>首先，代码变更通过一系列自动化的内部测试后才能被提交到主分支，进而被推送给Facebook的员工。在这一阶段引入的任何回归，都会使我们收到推送阻塞警报，而有个紧急停止按钮也可以使我们阻止代码的进一步发布。如果一切正常，我们会将变更推送到2%的生产环境，在那里我们会继续收集信号和监测警报，尤其是对于那些我们的自动测试和员工的内部测试没有发现的边界情况。最后，我们才将这些变更100%部署到生产环境中，由名为Flytrap的工具收集用户报告，并在异常时给我们发送警报。</p>\n<p>许多变更最初都是由 Gatekeeper 系统控制的，这使得我们能够独立地发布移动端和 web 端代码而不依赖于新功能，同时有助于降低由任何特定更新导致问题的风险。如果确实发现了问题，我们只需要关闭 gatekeeper，而不是回退到之前的版本或修复当前版本。</p>\n<p><span style=\"color: #ff0000;\"><strong>这个准持续（”quasi-continuous”）发布周期有几个优点:</strong></span></p>\n<h3>1. 它不再需要热补丁</h3>\n<p>在每天部署三次的策略下，如果一个关键变更必须立刻发布，而不是在它预定的推送时间里，这时就必须有人来打热补丁。这些带外推送是破坏性的，因为他们通常需要一些人力操作，而且可能会撞上下一个预定的推送。在新系统中，绝大多数需要热补丁的程序都可以简单地提交给master，并在下一个版本中进行发布。</p>\n<h3>2. 为全球工程师团队提供了更好支持</h3>\n<p>我们试着尽量合理安排每天三次部署的时间，以适应我们在世界各地的工程办公室。但即使是这样的努力，每周一次的发布也要求所有的工程师在某个特定的日期和时间内集中注意力，然而这些时间在他们的时区并不总是很方便。新的准持续系统意味着世界各地的工程师都可以根据需要开发并交付的代码。</p>\n<h3>3. 它迫使我们开发下一代工具、自动化和流程，以使公司能够扩大规模</h3>\n<p>我们所做的这个项目，可以作为跨越多个团队和系统的压力测试。我们改进了推动工具、diff 审查工具、测试基础架构、容量管理系统、流量路由系统，以及许多其他方面。这些团队都聚集在了一起，因为他们希望看到一个发布周期更快的自动化部署系统尽快成功。我们所做的改进将有助于确保公司为未来的发展做好准备。</p>\n<h3>4. 它使用户体验更好、更快</h3>\n<p>当需要数天或数周的时间来观察代码的运行状况时，工程师们可能已经转向了新的任务。在持续交付的情况下，工程师不必等待一周或更长的时间才能得到他们提交的代码的反馈。他们可以更快地了解到哪些地方不work，并及时进行小的增强或修复，而不是等到下一次大的发布。从基础设施的角度来看，新系统使我们能够更好地应对那些可能影响用户的稀有事件。最终，这将使工程师更加贴近用户，不仅有助于产品开发还有助于提高产品可靠性。</p>\n<h2>持续发布到移动端</h2>\n<p>在web平台上发展出一个准连续系统在某种程度上是可能的，因为我们拥有完整的技术栈，而且可以构建和改进我们需要的工具，使之成为现实。而移动平台上则面临更多的挑战，因为许多现有的移动平台的开发和部署工具使快速的迭代变得比较困难。</p>\n<p>Facebook致力于改善这一情况，并建立和开源了一整套专门针对移动平台上快速开发的工具，包括<a href=\"https://nuclide.io/\">Nuclide</a>、<a href=\"https://buckbuild.com/\">Buck</a>、<a href=\"https://github.com/phacility/phabricator\">Phabricator</a>、各种iOS类库、<a href=\"https://facebook.github.io/react-native/\">React Native</a>和<a href=\"http://fbinfer.com/\">Infer</a>。总之，这一系列构建和测试栈使我们能够产生高质量的代码，以便快速部署到移动平台上。</p>\n<p>我们的持续集成栈主要分成三层：构建、静态分析和测试。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fkuminb3fqj20kg0bi0we.jpg\"></p>\n<p>当开发人员将代码提交到移动主分支时，会在所有受影响的产品上对代码进行构建。对于移动端来说，这意味着每次提交都要重新构建Facebook、Messenger、Pages Manager、Instagram以及其他应用程序。我们还为每个产品构建了多个版本，以确保能够涵盖这些产品支持的所有芯片架构和模拟器。</p>\n<p>在构建过程中，我们会运行Infer，它集合了Linters(检查代码风格和错误的小工具)和静态分析工具，用于捕获空指针异常、资源和内存泄漏、未使用的变量和有风险的系统调用，并标记出违反Facebook编码规则的情况。</p>\n<p>第三个并发系统是移动自动化测试，包括数千个单元测试、集成测试以及由Robolectric、XCTest、JUnit和WebDriver等工具驱动的端到端的测试。</p>\n<p>不仅每次提交时会运行构建和测试栈，而且在代码变更的生命周期内也会运行多次。仅在安卓系统上，我们每天就能完成5万到6万次构建。</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fkuminyzcuj20kg0bidjp.jpg\"></p>\n<p>通过将传统的持续交付技术应用到移动栈，我们已经从四周发布一版发展到两周发布一版，再到现在的一周发布一版。目前我们在移动平台上使用的就是之前基于web的策略：branch/ cherry- pick模型。虽然我们每周只发布一个版本，但在现实环境中尽早测试代码仍然很重要，因为这样工程师就可以尽快得到反馈。我们每天都会为我们的金丝雀用户（包括大约100万个<a href=\"https://play.google.com/apps/testing/com.facebook.katana\">Android beta测试人员</a>）提供新的移动候选版本。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fkumior7jyj20kg0biwht.jpg\"></p>\n<p>与此同时，我们的发布频率增加了，我们的移动工程师团队已经增长了15倍，我们的代码交付速度也已经大大提高。尽管如此，从我们<a href=\"https://research.fb.com/publications/continuous-deployment-of-mobile-software-at-facebook-showcase/\">2012年到2016年的数据</a>来看，无论是按代码行数还是按推送数量来衡量，工程师在Android和IOS方面的生产率都保持不变。同样，无论部署多少次，移动版本出现的关键问题的数量几乎没有变化，这说明我们的代码质量并没有随着代码规模的增大而受到影响。</p>\n<p>随着现有的工具和方法不断取得进展，这是在发布工程领域工作的一个令人兴奋的时刻。我为Facebook的团队感到非常自豪，他们一起合作为我们提供了我认为是这个规模下最先进的web和移动部署系统。这一切能成为可能还有一部分原因是拥有一个强大的中央发布工程团队，因为它是基础设施工程领域的“第一类公民”（First-class citizen）。Facebook的发布团队将继续为开发人员和用户推动改善发布流程的计划，也会继续分享我们的经验、工具和最佳实践。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112764\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112764votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112764\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wrm205\">wrm</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wrm205\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/10/95902ef97dfc2bd01213807728388ea3.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            计算机应用技术、软件开发、算法设计方向        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wrm205\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wrm205/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wrm205/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://blog.csdn.net/wrm_nancy\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2619302591/profile?topnav=1&amp;wvr=6\"><i class=\"fa fa-weibo\"></i></a> <a title=\"Linked主页\" target=\"_blank\" href=\"https://cn.linkedin.com/pub/%E7%91%9E%E6%95%8F-%E7%8E%8B/ba/862/412\"><i class=\"fa fa-linkedin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/f2f9fbba105d1d3260400768bea07421.jpg"], "create_date": "2017/10/28", "fav_nums": 0, "praise_nums": "3", "comment_nums": 0, "tags": "IT技术,Facebook", "url": "http://blog.jobbole.com/112764/", "url_id": "8ea1d2c424134fca80259ab8274bfb09"}
{"title": "IT 工程师的自我管理", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>工作多年，我们见识到了很多厉害的人，他们可以兼顾家庭和工作，合理安排自己的事务和时间，能冷静的处理突发事件且理智的做出决策，把所有事情安排的妥妥当当。最初我以为这种能力来源于性格、情商甚至是天赋，因为并没有看到任何一本书来教人们做到这些，直到我把视角从普通的生活移到工作中，才发现原来一个能把生活安排的井井有条的人，在工作中往往也是优秀的管理者。</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/1-self-management-1024x640.jpg\" alt=\"\" width=\"700\" height=\"438\"></p>\n<p>管理项目或公司和管理生活有很多共通之处。有些人天生做的很好，但是像我这种普通人则不然。庆幸的是，我们依然能找到一些可行的方法和工具来做的像他们一样，在这篇文章中，我会尝试把公司项目管理的各种方法应用到个人生活中，我划分了不同的小节（收集反馈、决策、时间和任务管理、情绪管理）来阐述这些问题和解决方案，在每个小节的结尾，也会附上我使用过或者推荐的一些工具。</p>\n<h3>收集反馈和接纳自己</h3>\n<p>在ThoughtWorks，我学到了一个非常有用的方法，并且可以用到生活中。我们称之为“Feedback”，中文含义为反馈。在公司，收集“Feedback”的精神无处不在，完成一个项目、甚至完成了一次公司内部活动，都会有同事发出调查表单或者邮件来收集意见和反馈。反馈，可以给我们提供改进的方向。</p>\n<p>在团队里面，领导或者同事确实会站在不同的角度给予你“Feedback”。在此之外，也可以尝试自我反馈，甚至主动向别人索取反馈。我定了一个日历，来提醒自己在每周一晚上对反馈进行整理。在这小段时间里，让“我”不单单是我，想象自己是另外一个独立的个体，方能更客观和理性的认识自己。</p>\n<p>在收集反馈和自我审视当中，非常重要的一点就是客观的接纳自己，从心理学的角度看，更好的安排和管理自己的生活也应该从接纳自己开始，接纳自己的优点或者缺点才能积极的坚持和改变，把一副一般的牌打出精彩效果，这就是管理的哲学。接纳自己的过程和项目经理第一天接手一个遗留项目的感受是一样的，无法改变的东西很多，例如deadline、经费，而能改进的东西更多，像团队热情、开发效率和交付质量等。</p>\n<blockquote><p>优柔寡断、缺乏专注，但是也对很多东西充满热情；和人聊天不够站在对方考虑，但有时候也会幽默；拖延，但是还算勤奋。</p></blockquote>\n<p>这是我给自己的评价，通过这种审视和接纳，我应该能回答一些问题：自己不能改变什么？我能改变什么？哪些事我能做的更好？更进一步，也可以从自己有什么价值、优势和劣势、未来的计划和发展方向、风险怎么管控和人际关系等方面审视自己。</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/2-self-examination-1-1024x683.jpg\" alt=\"\" width=\"700\" height=\"467\"></p>\n<p>我买了一个白板贴到家里墙上，用来写一些需要经常提醒自己的内容。很简单的一个物件，你可以在淘宝上买到，卖家一般还会赠送黑板擦和白板笔。可以记录你想到的每一个idea和自己的计划、任务清单，甚至给自己写一个座右铭作为自己的slogan。白板在公司非常常见，放在家里可以作为自己的可视化工具，通过写下需要的思考的问题可以打开一个“上帝视角”，帮助我们更为客观的思考。</p>\n<h3>像公司一样决策</h3>\n<p>一直很好奇大的公司甚至政府是怎样做出好的决策的，普通人往往是在心里合计一下，然后拍个脑门就成，然而决策每天都在发生，小到出门要不要带伞，见女朋友需不需要买礼物，大到购置资产，投资理财，结婚买房等。“拍脑门决定”显然不是适用于所有场景的。</p>\n<p>这里想提一个有意思的东西——易学，周易的功能之一是被古代政府用来决策事务，我曾经了解过一门叫做《奇门遁甲》的易学，这种方法是绘制一张格局图，用天干代表你周围的人际关系、资源，而“甲”就是自己，“遁甲”的意思是需要把自己放到一个客观的位置上来看待，方才能清晰的看待形势和做出正确的决策。</p>\n<p>现代管理学中同样对“决策”十分重视，有很多书来阐述这个问题，甚至专门的决策学。其中有一个简单思维工具叫做SWOT，SWOT分析法（也称TOWS分析法、道斯矩阵）即态势分析法，20世纪80年代初由美国旧金山大学的管理学教授韦里克提出，经常被用于企业战略制定、竞争对手分析等场合。</p>\n<p>举个例子来说明如何使用这个方法，如果我们需要考虑换工作（毕竟换工作对于任何人来说都是一件重要的事情），根据SWOT我们可以绘制一张表格来对比：</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/3-comparison.png\" alt=\"\" width=\"608\" height=\"214\"></p>\n<p>最后需要注意的就是别忽略沉没成本在一次决策中的影响，沉没成本是一个经典的经济学概念，通俗来说沉没成本就是已经投入的资源。比如一项商务谈判，前期付出的越多，后期也就越难放弃。有意思的是，沉没成本在恋爱中的效应同样明显，爱一个人越多，投入越多，则越难割舍。</p>\n<p>对于一般来说，这种分析已经让做出选择的各项因素非常清晰，如果还是问题更加复杂，我们可以为每一项增加权重来做更为细致的思考，当然也更加复杂和浪费时间。因为做出决策本身也是需要成本的，当然也不应该在决策上花了太多的时间，没有完美的决策，简单的事情还是拍脑门儿吧。</p>\n<h3>任务和时间管理</h3>\n<p>时间就像海绵，挤挤就有的。我宁愿相信这句话是谎言、鸡汤和毒药，如果时间可以被挤出来，无非两种情况，其一是其他的安排或者娱乐时间被无情的侵占了，其二是你做事的质量被降低了，如果你在洗碗，那么可能不会洗的太干净。</p>\n<p>时间需要被管理，任务需要被有序安排。大量的时间管理书籍证明了这一点，去年流行的《暗时间》写的非常好，书中讲述了作者大量的经历和管理时间的方法。</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/6-Time-Management-1-1024x683.jpg\" alt=\"\" width=\"700\" height=\"467\"></p>\n<p>我更愿意把时间管理和任务管理结合到一起，在工作中我们的项目经理也是这样做的，任务管理是项目经理非常重要的一部分，不过我们用的是针对项目的敏捷开发/瀑布流方法，更为复杂和需要团队参与，对于个人而言需要更简化的方法，分为几个步骤：</p>\n<ol>\n<li><strong>任务拆分</strong>。拆分任务使得任务变得更简单可行是众所周知的方法，在笛卡尔的《谈谈方法》中，拆分已经被当做西方哲学和做事思想的内核。</li>\n<li><strong>评估价值</strong>。“评估这项任务是不是真的有价值去做”也许是浪费时间的行为，为什么还需要去做。然而我之前做了很多这种无用的事情，还不如打一把王者荣耀。</li>\n<li><strong>优先级排序</strong>。我们要把时间挤挤留给优先级高的事情，那么首先我们需要对任务进行排序。</li>\n<li><strong>时间控制</strong>。每个任务需要预估时间，以便于我们留出一段合适的时间用而不至于被中途打断。</li>\n</ol>\n<p>为了管理这些任务，在公司我们有看板，对于个人而言推荐使用一些Todo List 工具。我偏向使用Chrome 上的插件，工具越简单越好，当然很多笔记工具都带有TODO列表。比如印象笔记、有道笔记，或者任何支持Markdown语法的编辑器，如果没有找到合适的工具，给自己桌子上贴一张便笺也行。</p>\n<p>如果TODO列表工具有提醒的功能就更完美了，如果没有可以使用一些提醒工具，比如iPhone的手机提醒、Mac上的Calendar APP、适合国人使用习惯的QQ邮箱甚至提醒到微信和手机短信。</p>\n<p>在做事的时候，专注可以提高效率，因此一个很有名的工作方法叫做番茄工作法被提出来。这种工作方法因一个番茄形状的厨房用定时器得名，手机上有大量相关应用可以下载。使用该软件可以让你在专注工作25分钟，随后有5分钟的休息时间，但25分钟内你需要保持高度精神集中，了解更多番茄工作法可以阅读《番茄工作法图解》一书。</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/4-Pomodoro-Technique.png\" alt=\"\" width=\"469\" height=\"283\"></p>\n<p>（图片来自：番茄工作法图解）</p>\n<h3>知识体系和储备</h3>\n<p>我是一个程序员，程序员都有一个焦虑，那就是总有一大堆新的技术和工具等着你去学。几个月前我尝试思考如何解决这个问题，随着IT从业者工作的时间的增加，年龄渐长，同时还要面临家庭和其他方面的事务，越来越不可能把所有精力投入到技术的学习中（毕竟还要学习如何预防颈椎病）。</p>\n<p>通过观察一些技术强势、但业余爱好也开展的红红火火的IT大拿，发现几点非常有意思的事情。</p>\n<p>不同技术创造的价值不同。我们经常谈论是需要专才还是通才，是需要精通某项技术还是博古通今，这种思考方向还是略显片面。无论是刻意还是偶然，有些技术能学习投入更少但是赚更多的钱，学习技术也需要眼光。不得不承认，从一般趋势下，web前端需要了解一堆繁杂的知识但是没有java等后端开发薪资高。</p>\n<p>知识像一棵树，需要具备一个体系。这条经验不仅仅适用于IT行业，我们在学习某些东西时，会去网上寻找各种知识清单、书单、技能图谱，我在之前的文章中也介绍过IT行业相关的图谱。对于人脑而言，记忆和学习是线性或者网状的，这也符合我们的认知，零散的知识非常容易遗忘。构建体系的知识，我强烈推荐画图，无论是思维导图（Xmind、MindMap）还是鱼骨图、组织架构图和韦恩图都是很好的方法，甚至构建自己的技术雷达。</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/5-tec-radar.png\" alt=\"\" width=\"941\" height=\"371\"></p>\n<p>(构建自己的技术雷达)</p>\n<p>知识需要储备、学习需要有文档产出。在完成一个项目或调研后，公司都会产出一定的文档，每个专业公司都有这样一个资料库，当我们遇到问题的时候可以从中找到相关信息。在工作中我曾经用过禅道、金山云、confluence等，相比之下，禅道不仅仅是一个文档管理工具，更是一个项目管理工具，而金山云文档搜索功能略差，confluence则是一个专业的团队文档管理工具，但是需要付费。</p>\n<p>对于个人也一样，学习任何东西都需要有产出，在记笔记之外，写作是一个不错的方式，开通博客或者专栏来让学到的知识能够更好的沉淀，因此我整理了一个在线写作平台的清单：</p>\n<p>国内篇</p>\n<ul>\n<li>点点轻博客</li>\n<li>简书</li>\n<li>博客园</li>\n<li>知乎专栏</li>\n</ul>\n<p>国际篇</p>\n<ul>\n<li>WordPress</li>\n<li>Gitbook</li>\n<li>Wix</li>\n<li>Blogger</li>\n</ul>\n<p>就文档管理而言，如果不希望自己的文档被发布出去，或者认为某些资料不是通常意义上的博客，使用Wikidot编写自己的Wiki来管理文档也不错。如果是程序员的话直接使用Github做文档管理或者给自己搭建一个Wiki，也不是非常难的一件事。</p>\n<p>我自己偏爱用Markdown格式来管理自己的文档，因此创建了一个代码仓库用来放置所有文档，然后Hexo发布到github提供的静态资源服务器上供自己查看，有了这些工具和输出之后，我们能知道哪些知识是我们需要的，哪些知识暂时不需要但是在需要的时候能被快速的捡起来。</p>\n<h3>情绪管理</h3>\n<p>在第一家公司工作时，我们老板讲了一个故事，曾经因为产品出现问题，很多下级经销商上门闹事要求退款，大多数人情绪十分激动，甚至有人打砸物品，都被老板一一化解。后来来了一个年轻的经销商，笑眯眯的来到公司，淡定非凡，和老板重新聊合同和赔偿的事务，这个人看起来并不生气，只是索取了大量相关资料。据老板讲，这个人应该在收集证据和资料用于后面走法律途经，因为是我们理亏，所以老板做出了让步、答应了他全部的退款条件。</p>\n<p>我不知道人类演化出“抱怨”“气愤”“愤怒”等情绪的意义在哪里。当我们在工作中遇到麻烦，第一反应是抱怨；当别人指出我们的错误时，往往第一个动作是怼回去；遇到矛盾，我们会被激怒。但是当我们回顾这些行为本身，会发现抱怨对工作毫无益处，怼回别人的意见对自己也并没有帮助，即使在一场战斗中被激怒的一方往往会处于险镜。</p>\n<p>我曾经看过一本书叫《不抱怨的世界》，书中提到一个很好的方法来减少抱怨：佩戴一个手链或者手环，当你意识到自己在抱怨时，交换手环到另外一只手，通过这种微小的心理暗示来矫正自己的不良过激反应。</p>\n<p>生气是人的本能，没有谁能完全控制自己，一个好的建议是当我们感到愤怒的时候，请不要做任何行动和决策，先让自己安静下来至少30分钟。心理学上对于不良情绪的管理建议不要对抗不良情绪，而接纳和发泄是更为可行的办法，避免形成强迫行为，我们的目的不是消除负面情绪，而是不让情绪影响到决策，然后使用其他途径进行发泄和疏导。</p>\n<h3>写在最后</h3>\n<p>很多时候，管理这个词用到个人身上略显奇怪，对大多数人而言，管理知识如同屠龙之技。其实当把管理的各种方法用到生活中，管理并不是权利、控制和压迫，而是理性思考、引导和推动。管理并不一定是对下属，甚至可以管理上级、爱情和家庭，用各种可以学到的方法、技巧把生活打理的仅仅有条。就像古人“修身齐家治国平天下”，“修身”不正是管理自己么。限于篇幅，我们能从公司运作和管理的哲学中学到更多，希望后面有机会分享给大家。</p>\n<p>文／ThoughtWorks林宁</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112783\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112783votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112783\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 74</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2017/10/1-self-management-1024x640.jpg"], "create_date": "2017/10/30", "fav_nums": 0, "praise_nums": "2", "comment_nums": 0, "tags": "职场,职场", "url": "http://blog.jobbole.com/112783/", "url_id": "19f8589d63e8270571d22ec3ff6bd975"}
{"title": "2017 年最受欢迎的 11 个编程挑战网站", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/the-10-most-popular-coding-challenge-websites-of-2016-fb8a5672d22f\">Daniel Borowski</a>   译文出处：<a target=\"_blank\" href=\"http://geek.csdn.net/news/detail/236954\">CSDN / Vincent</a>   </div><p>【导读】：如果你想不断地提高自己的编程技能，那么不断尝试去解决那些编程中的难题，这是一个非常不错的途径。作者在本篇文章中列举出了10个编程挑战网站，你想尝试一下吗？以下为译文。</p>\n<p><img title=\"\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fl0cw0srvwj21jk11148e.jpg\" alt=\"\"></p>\n<p>如果你正在在学习编程，那么我可以告诉你一个提高技能的好方法，那就是敢于去解决编码过程中遇到的难题。解决不同类型的难题，可以帮助你成为一名优秀的问题解决者；不管编程语言多复杂，你也会得心应手；另外在面试准备以及学习新算法等很多方面，都会让你变得越来越出色。</p>\n<p>下面是一些非常受大众欢迎的编程难题网站列表，文章还对每个网站所提供的信息进行了一番简短的描述。</p>\n<h3><a href=\"https://www.topcoder.com/challenges/?pageIndex=1\" target=\"_blank\">1. TopCoder</a></h3>\n<p><img title=\"\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fl15egbohfj218g07ejsm.jpg\" alt=\"\"></p>\n<p>TopCoder是最开始的在线竞技编程平台之一。它提供了很多的<a href=\"https://www.topcoder.com/community/how-it-works/\" target=\"_blank\">算法挑战</a>，用户可以使用平台上的编辑器直接完成挑战。每个月该平台会提供几次它们最受欢迎的Single Round Matches，比赛要求用户在特定的时间内与他人竞争，看谁解决问题的速度更快。</p>\n<p>TopCoder上<a href=\"https://www.topcoder.com/tc?module=AlgoRank\" target=\"_blank\">排名靠前的用户</a>都是很有竞争力的程序员，他们会定期参加各种比赛。这些用户还可以通过名称为<em>ALGORITHMS WEEKLY BY PETR MITRICHEV</em>的<a href=\"http://petr-mitrichev.blogspot.com/\" target=\"_blank\">博客平台</a>去发表一些关于编程竞赛、算法、数学等方面的文章。</p>\n<h3><a href=\"https://coderbyte.com/\" target=\"_blank\">2. Coderbyte</a></h3>\n<p><img title=\"\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl15egy6ouj218g0g07bj.jpg\" alt=\"\"></p>\n<p>Coderbyte提供了200多项编码挑战，挑战者可以使用10门编程语言中的任意一种直接在线解决（看看这个<a href=\"https://coderbyte.com/language/First%20Factorial\" target=\"_blank\">例子</a>）。这些挑战的难易程度各不相同。</p>\n<p>另外Coderbyte还提供了很多的<a href=\"https://coderbyte.com/algorithm/dutch-national-flag-sorting-problem\" target=\"_blank\">算法教程</a>，入门视频和<a href=\"https://coderbyte.com/course/google-interview-questions\" target=\"_blank\">面试准备的课程</a>。与HackerRank和其它网站不同，用户可以查看其他挑战者提供的解决方案，而不是Coderbyte*官方*发布的。</p>\n<h3><a href=\"https://projecteuler.net/\" target=\"_blank\">3. Project Euler</a></h3>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fl15ehfu2pj20km0bqq3s.jpg\" width=\"690\" height=\"392\"></p>\n<p>Project Euler提供了很多关于计算机科学和数学领域的挑战。挑战内容大致都是要求挑战者编写一段小程序从而为某个数学公式或方程式提供解决方案。</p>\n<p>由于不支持直接在编辑器上编程，因此需要用户在自己的电脑上先写好解决方案，然后在网站上再提供出来。</p>\n<h3><a href=\"https://www.hackerrank.com/domains\" target=\"_blank\">4. HackerRank</a></h3>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl15ei023vj20m40bkt9k.jpg\" width=\"690\" height=\"361\"></p>\n<p>HackerRank提供了很多不同领域的挑战，比如算法、数学、SQL、函数式编程、人工智能等等。挑战者可以直接在线完成所有挑战（看看这个<a href=\"https://www.hackerrank.com/challenges/simple-array-sum\" target=\"_blank\">例子</a>）。HackerRank针对每一项挑战专门成立了讨论和领导委员会，而大多数挑战来自于一篇社论，它解释了更多的挑战，以及如何接近它提出解决方案。除了这篇社论，你目前还不能看到其他用户在HackerRank上的解决方案。</p>\n<p>HackerRank还支持用户<a href=\"https://www.hackerrank.com/jobs/common-app\" target=\"_blank\">提交应用程序</a>，而且通过解决公司发起的编码挑战，挑战者还有机会获得一份工作。</p>\n<h3><a href=\"https://www.codechef.com/\" target=\"_blank\">5. CodeChef</a></h3>\n<p><img title=\"\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl15eip5g9j20ri0c7grq.jpg\" alt=\"\"></p>\n<p>CodeChef是一家位于印度的编程竞赛网站，该网站提供了数百种挑战。挑战者可以通过在线编辑器进行编程，而且还可以根据自身的编程能力去查看已经分类好的适合于自己的挑战题目。CodeChef有一个庞大的编程社区，为论坛提供帮助，负责编写教程，而且也会参加CodeChef的编码竞赛。</p>\n<h3><a href=\"https://www.codeeval.com/\" target=\"_blank\">6. CodeEval</a></h3>\n<p><img title=\"\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fl15ej9874j20sg0gejso.jpg\" alt=\"\"></p>\n<p>CodeEval类似于HackerRank，它还提供了很多公司发起的挑战，如果能很好地完成这些挑战，你还有机会得到一份工作。公司可以创建挑战和举办竞争比赛来招募新的工作人员。挑战者可以在<a href=\"https://www.codeeval.com/accounts/login/?next=/open_challenges/\" target=\"_blank\">这里</a>查看当前的挑战列表。</p>\n<h3><a href=\"https://www.codewars.com/\" target=\"_blank\">7. Codewars</a></h3>\n<p><img title=\"\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fl15ekbdqbj218g0mljv7.jpg\" alt=\"\"></p>\n<p>Codewars提供了很多的编码挑战，这些挑战都是由他们自己社区提交和编辑的。挑战者可以用几种语言在编辑器中直接<a href=\"https://www.codewars.com/kata/trailing-zeros-in-factorials-in-any-given-integer-base/train/javascript\" target=\"_blank\">在线</a>完成挑战。用户还可以查看针对每个挑战的讨论以及其他用户的解决方案。</p>\n<h3><a href=\"https://leetcode.com/\" target=\"_blank\">8. LeetCode</a></h3>\n<p><img title=\"\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fl15ejsi05j218g0k6mzg.jpg\" alt=\"\"></p>\n<p>LeetCode是一个很受欢迎的<a href=\"https://en.wikipedia.org/wiki/Online_judge\" target=\"_blank\">在线判题系统</a>，它提供了 450+ 道挑战题目，这些题目可以帮助挑战者为面试做好技术准备。挑战者可以用9种编程语言<a href=\"https://leetcode.com/problems/merge-k-sorted-lists/\" target=\"_blank\">直接在线</a>完成挑战。虽然该网站不支持查看其他用户的解决方案，但用户可以为自己的解决方案提供统计数据，例如与其他用户相比，代码运行速度如何。</p>\n<p>他们也有一个专门为面试准备的<a href=\"https://leetcode.com/mockinterview/\" target=\"_blank\">Mock Interview</a>部分，这是由他们自己主持的编码<a href=\"https://leetcode.com/contest/\" target=\"_blank\">竞赛</a>，其中有一些<a href=\"https://leetcode.com/articles/recursive-approach-segment-trees-range-sum-queries-lazy-propagation/\" target=\"_blank\">文章</a>帮助用户更好地了解某些问题。</p>\n<h3><a href=\"http://www.spoj.com/\" target=\"_blank\">9. SPOJ</a></h3>\n<p><img title=\"\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fl15ekyxgmj218g0ltwl0.jpg\" alt=\"\"></p>\n<p>Sphere Online Judge(SPOJ)是一个在线判题系统，提供20000多个编程挑战。挑战者可以直接通过在线编辑器中提交代码。SPOJ还举办了自己的竞赛，并有一个区域专门供用户讨论编码挑战。他们目前没有像其他网站那样提供任何官方解决方案或社论。</p>\n<h3><a href=\"https://www.codingame.com/\" target=\"_blank\">10. CodinGame</a></h3>\n<p><img title=\"\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fl15elr4j0j218g0pk7pr.jpg\" alt=\"\"></p>\n<p>CodinGame与其他网站有点不同，因为它不是简单地在编辑器中去完成编码挑战，而是让挑战者真正游戏的。用户可以在<a href=\"https://www.codingame.com/training\" target=\"_blank\">这里</a>看到当前提供的游戏列表，在<a href=\"https://www.codingame.com/ide/puzzle/there-is-no-spoon-episode-1\" target=\"_blank\">这里</a>看到一个示例。这个游戏有一个问题描述，测试用例，和一个编辑器，你可以在其中一个 20+ 的编程语言编写你的代码。</p>\n<p>虽然这个网站不同于上面提到的那些有竞争力的编程网站，但对于那些喜欢挑战并参与竞赛的程序员来说，它还是很受欢迎额。</p>\n<p>本文所提及的都是根据以下内容整理出来的:一些是我本人浏览网站时关注到的，一些是通过<a href=\"https://www.google.com/webhp?sourceid=chrome-instant&amp;rlz=1C5CHFA_enUS689US689&amp;ion=1&amp;espv=2&amp;ie=UTF-8#safe=off&amp;q=coding+challenges\" target=\"_blank\">谷歌搜索</a>和<a href=\"https://www.quora.com/What-are-good-coding-challenges-websites\" target=\"_blank\">基于Quora 上的文章</a>，还有一些是诸如<a href=\"http://infocreeds.com/top-10-coding-challenges-websites/\" target=\"_blank\">这类文章</a>或者<a href=\"https://www.linkedin.com/pulse/most-popular-programming-contest-sites-coding-practice-somenath-panda\" target=\"_blank\">那类文章</a>里面涉及到的。我还经常访问一些类似于<a href=\"https://www.reddit.com/r/learnprogramming/\" target=\"_blank\">r/learnprogramming</a>这样的论坛和看板，看看那里的用户通常推荐哪些网站。免责声明:我在Coderbyte工作，这也是上面提到的网站之一。</p>\n<p> </p>\n<p>伯乐在线补充：</p>\n<h3><a href=\"http://codeforces.com/problemset\" target=\"_blank\">11. CodeForces</a></h3>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fl4qb8v7nqj20h80a43zw.jpg\"></p>\n<p>CodeForces 是一家俄罗斯的编程竞赛网站，由一群来自萨拉托夫州立大学的程序员在维护。该站点目前由俄罗斯知名公司 Telegram 赞助！</p>\n<p>从 CF 上最近 6 个月的排名来看，里面有蛮多中国程序员，Top 50 中有 11 个是中国的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112778\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112778votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112778\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 13 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fl0cw0srvwj21jk11148e.jpg"], "create_date": "2017/10/30", "fav_nums": 0, "praise_nums": "2", "comment_nums": 0, "tags": "IT技术,编程挑战", "url": "http://blog.jobbole.com/112778/", "url_id": "d62af6dda21759ce5579c86b16f76ef9"}
